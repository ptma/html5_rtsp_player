{"version":3,"file":"videojs.streamedian.bundle.js","sources":["../../../node_modules/bp_logger/logger.js","../../../src/core/util/url.js","../../../node_modules/bp_event/event.js","../../../src/core/iso-bmff/mp4-generator.js","../../../src/core/presentation/mse.js","../../../src/core/remuxer/base.js","../../../src/core/remuxer/aac.js","../../../src/core/util/exp-golomb.js","../../../src/core/util/binary.js","../../../src/core/elementary/NALU.js","../../../src/core/parsers/h264.js","../../../src/core/remuxer/h264.js","../../../src/core/defs.js","../../../src/core/remuxer/remuxer.js","../../../node_modules/bp_statemachine/statemachine.js","../../../src/core/parsers/sdp.js","../../../src/client/rtsp/stream.js","../../../src/core/util/md5.js","../../../src/client/rtsp/rtp/rtp.js","../../../src/client/rtsp/rtp/factory.js","../../../src/client/rtsp/message.js","../../../src/core/elementary/NALUAsm.js","../../../src/core/elementary/AACFrame.js","../../../src/core/elementary/AACAsm.js","../../../src/client/rtsp/rtp/payload/parser.js","../../../src/core/base_client.js","../../../src/core/parsers/aac.js","../../../src/client/rtsp/session.js","../../../src/client/rtsp/client.js","../../../node_modules/jsencrypt/lib/asn1js/asn1.js","../../../node_modules/jsencrypt/lib/jsbn/prng4.js","../../../node_modules/jsencrypt/lib/jsbn/rng.js","../../../node_modules/jsencrypt/lib/jsbn/jsbn.js","../../../node_modules/jsencrypt/lib/jsbn/jsbn2.js","../../../node_modules/jsencrypt/lib/jsbn/rsa.js","../../../node_modules/jsencrypt/lib/jsbn/rsa2.js","../../../node_modules/jsencrypt/lib/asn1js/base64.js","../../../node_modules/jsencrypt/lib/asn1js/hex.js","../../../node_modules/jsencrypt/lib/jsrsasign/asn1-1.0.js","../../../node_modules/jsencrypt/lib/jsbn/base64.js","../../../node_modules/jsencrypt/src/jsencrypt.js","../../../src/core/base_transport.js","../../../src/core/util/browser.js","../../../src/transport/websocket.js","../../../src/player.js","../../../src/core/parsers/pes.js","../../../src/core/parsers/ts.js","../../../src/client/hls/pes_avc.js","../../../src/client/hls/adts.js","../../../src/client/hls/pes_aac.js","../../../src/core/parsers/m3u8.js","../../../src/client/hls/client.js","../src/videojs.streamedian.js"],"sourcesContent":["// ERROR=0, WARN=1, LOG=2, DEBUG=3\nexport const LogLevel = {\n    Error: 0,\n    Warn: 1,\n    Log: 2,\n    Debug: 3\n};\n\nlet DEFAULT_LOG_LEVEL = LogLevel.Debug;\n\nexport function setDefaultLogLevel(level) {\n    DEFAULT_LOG_LEVEL = level;\n}\nexport class Logger {\n    constructor(level = DEFAULT_LOG_LEVEL, tag) {\n        this.tag = tag;\n        this.setLevel(level);\n    }\n    \n    setLevel(level) {\n        this.level = level;\n    }\n    \n    static get level_map() { return {\n        [LogLevel.Debug]:'log',\n        [LogLevel.Log]:'log',\n        [LogLevel.Warn]:'warn',\n        [LogLevel.Error]:'error'\n    }};\n\n    _log(lvl, args) {\n        args = Array.prototype.slice.call(args);\n        if (this.tag) {\n            args.unshift(`[${this.tag}]`);\n        }\n        if (this.level>=lvl) console[Logger.level_map[lvl]].apply(console, args);\n    }\n    log(){\n        this._log(LogLevel.Log, arguments)\n    }\n    debug(){\n        this._log(LogLevel.Debug, arguments)\n    }\n    error(){\n        this._log(LogLevel.Error, arguments)\n    }\n    warn(){\n        this._log(LogLevel.Warn, arguments)\n    }\n}\n\nconst taggedLoggers = new Map();\nexport function getTagged(tag) {\n    if (!taggedLoggers.has(tag)) {\n        taggedLoggers.set(tag, new Logger(DEFAULT_LOG_LEVEL, tag));\n    }\n    return taggedLoggers.get(tag);\n}\nexport const Log = new Logger();\n","export class Url {\r\n    static parse(url) {\r\n        let ret = {};\r\n\r\n        let regex = /^([^:]+):\\/\\/([^\\/]+)(.*)$/;  //protocol, login, urlpath\r\n        let result = regex.exec(url);\r\n\r\n        if (!result) {\r\n            throw new Error(\"bad url\");\r\n        }\r\n\r\n        ret.full = url;\r\n        ret.protocol = result[1];\r\n        ret.urlpath = result[3];\r\n\r\n        let parts = ret.urlpath.split('/');\r\n        ret.basename = parts.pop().split(/\\?|#/)[0];\r\n        ret.basepath = parts.join('/');\r\n\r\n        let loginSplit = result[2].split('@');\r\n        let hostport = loginSplit[0].split(':');\r\n        let userpass = [ null, null ];\r\n        if (loginSplit.length === 2) {\r\n            userpass = loginSplit[0].split(':');\r\n            hostport = loginSplit[1].split(':');\r\n        }\r\n\r\n        ret.user = userpass[0];\r\n        ret.pass = userpass[1];\r\n        ret.host = hostport[0];\r\n        ret.auth = (ret.user && ret.pass) ? `${ret.user}:${ret.pass}` : '';\r\n\r\n        ret.port = (null == hostport[1]) ? Url.protocolDefaultPort(ret.protocol) : hostport[1];\r\n        ret.portDefined = (null != hostport[1]);\r\n        ret.location = `${ret.host}:${ret.port}`;\r\n\r\n        if (ret.protocol == 'unix') {\r\n            ret.socket = ret.port;\r\n            ret.port = undefined;\r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\n    static full(parsed) {\r\n        return `${parsed.protocol}://${parsed.location}/${parsed.urlpath}`;\r\n    }\r\n\r\n    static isAbsolute(url) {\r\n        return /^[^:]+:\\/\\//.test(url);\r\n    }\r\n\r\n    static protocolDefaultPort(protocol) {\r\n        switch (protocol) {\r\n            case 'rtsp': return 554;\r\n            case 'http': return 80;\r\n            case 'https': return 443;\r\n        }\r\n\r\n        return 0;\r\n    }\r\n}","const listener = Symbol(\"event_listener\");\nconst listeners = Symbol(\"event_listeners\");\n\nexport class DestructibleEventListener {\n    constructor(eventListener) {\n        this[listener] = eventListener;\n        this[listeners] = new Map();\n    }\n\n    clear() {\n        if (this[listeners]) {\n            for (let entry of this[listeners]) {\n                for (let fn of entry[1]) {\n                    this[listener].removeEventListener(entry[0], fn);\n                }\n            };\n        }\n        this[listeners].clear();\n    }\n\n    destroy() {\n        this.clear();\n        this[listeners] = null;\n    }\n\n    on(event, selector, fn) {\n        if (fn == undefined) {\n            fn = selector;\n            selector = null;\n        }\n        if (selector) {\n            return this.addEventListener(event, (e) => {\n                if (e.target.matches(selector)) {\n                    fn(e)\n                }\n            });\n        } else {\n            return this.addEventListener(event, fn);\n        }\n    }\n\n    addEventListener(event, fn) {\n        if (!this[listeners].has(event)) {\n            this[listeners].set(event, new Set());\n        }\n        this[listeners].get(event).add(fn);\n        this[listener].addEventListener(event, fn, false);\n        return fn;\n    }\n\n    removeEventListener(event, fn) {\n        this[listener].removeEventListener(event, fn, false);\n        if (this[listeners].has(event)) {\n            //this[listeners].set(event, new Set());\n            let ev = this[listeners].get(event);\n            ev.delete(fn);\n            if (!ev.size) {\n                this[listeners].delete(event);\n            }\n        }\n    }\n\n    dispatchEvent(event) {\n        if (this[listener]) {\n            this[listener].dispatchEvent(event);\n        }\n    }\n}\n\nexport class EventEmitter {\n    constructor(element=null) {\n        this[listener] = new DestructibleEventListener(element || document.createElement('div'));\n    }\n\n    clear() {\n        if (this[listener]) {\n            this[listener].clear();\n        }\n    }\n\n    destroy() {\n        if (this[listener]) {\n            this[listener].destroy();\n            this[listener] = null;\n        }\n    }\n\n    on(event, selector, fn) {\n        if (this[listener]) {\n            return this[listener].on(event, selector, fn);\n        }\n        return null;\n    }\n\n    addEventListener(event, fn) {\n        if (this[listener]) {\n            return this[listener].addEventListener(event, fn, false);\n        }\n        return null;\n    }\n\n    removeEventListener(event, fn) {\n        if (this[listener]) {\n            this[listener].removeEventListener(event, fn, false);\n        }\n    }\n\n    dispatchEvent(event, data) {\n        if (this[listener]) {\n            this[listener].dispatchEvent(new CustomEvent(event, {detail: data}));\n        }\n    }\n}\n\nexport class EventSourceWrapper {\n    constructor(eventSource) {\n        this.eventSource = eventSource;\n        this[listeners] = new Map();\n    }\n\n    on(event, selector, fn) {\n        if (!this[listeners].has(event)) {\n            this[listeners].set(event, new Set());\n        }\n        let listener = this.eventSource.on(event, selector, fn);\n        if (listener) {\n            this[listeners].get(event).add(listener);\n        }\n    }\n\n    off(event, fn){\n        this.eventSource.removeEventListener(event, fn);\n    }\n\n    clear() {\n        this.eventSource.clear();\n        this[listeners].clear();\n    }\n\n    destroy() {\n        this.eventSource.clear();\n        this[listeners] = null;\n        this.eventSource = null;\n    }\n}\n","/**\r\n * Generate MP4 Box\r\n * got from: https://github.com/dailymotion/hls.js\r\n */\r\n\r\nexport class MP4 {\r\n    static init() {\r\n        MP4.types = {\r\n            avc1: [], // codingname\r\n            avcC: [],\r\n            btrt: [],\r\n            dinf: [],\r\n            dref: [],\r\n            esds: [],\r\n            ftyp: [],\r\n            hdlr: [],\r\n            mdat: [],\r\n            mdhd: [],\r\n            mdia: [],\r\n            mfhd: [],\r\n            minf: [],\r\n            moof: [],\r\n            moov: [],\r\n            mp4a: [],\r\n            mvex: [],\r\n            mvhd: [],\r\n            sdtp: [],\r\n            stbl: [],\r\n            stco: [],\r\n            stsc: [],\r\n            stsd: [],\r\n            stsz: [],\r\n            stts: [],\r\n            tfdt: [],\r\n            tfhd: [],\r\n            traf: [],\r\n            trak: [],\r\n            trun: [],\r\n            trex: [],\r\n            tkhd: [],\r\n            vmhd: [],\r\n            smhd: []\r\n        };\r\n\r\n        var i;\r\n        for (i in MP4.types) {\r\n            if (MP4.types.hasOwnProperty(i)) {\r\n                MP4.types[i] = [\r\n                    i.charCodeAt(0),\r\n                    i.charCodeAt(1),\r\n                    i.charCodeAt(2),\r\n                    i.charCodeAt(3)\r\n                ];\r\n            }\r\n        }\r\n\r\n        var videoHdlr = new Uint8Array([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, 0x00, 0x00, // pre_defined\r\n            0x76, 0x69, 0x64, 0x65, // handler_type: 'vide'\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            0x56, 0x69, 0x64, 0x65,\r\n            0x6f, 0x48, 0x61, 0x6e,\r\n            0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'VideoHandler'\r\n        ]);\r\n\r\n        var audioHdlr = new Uint8Array([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, 0x00, 0x00, // pre_defined\r\n            0x73, 0x6f, 0x75, 0x6e, // handler_type: 'soun'\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            0x53, 0x6f, 0x75, 0x6e,\r\n            0x64, 0x48, 0x61, 0x6e,\r\n            0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'SoundHandler'\r\n        ]);\r\n\r\n        MP4.HDLR_TYPES = {\r\n            'video': videoHdlr,\r\n            'audio': audioHdlr\r\n        };\r\n\r\n        var dref = new Uint8Array([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, 0x00, 0x01, // entry_count\r\n            0x00, 0x00, 0x00, 0x0c, // entry_size\r\n            0x75, 0x72, 0x6c, 0x20, // 'url' type\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x01 // entry_flags\r\n        ]);\r\n\r\n        var stco = new Uint8Array([\r\n            0x00, // version\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, 0x00, 0x00 // entry_count\r\n        ]);\r\n\r\n        MP4.STTS = MP4.STSC = MP4.STCO = stco;\r\n\r\n        MP4.STSZ = new Uint8Array([\r\n            0x00, // version\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, 0x00, 0x00, // sample_size\r\n            0x00, 0x00, 0x00, 0x00, // sample_count\r\n        ]);\r\n        MP4.VMHD = new Uint8Array([\r\n            0x00, // version\r\n            0x00, 0x00, 0x01, // flags\r\n            0x00, 0x00, // graphicsmode\r\n            0x00, 0x00,\r\n            0x00, 0x00,\r\n            0x00, 0x00 // opcolor\r\n        ]);\r\n        MP4.SMHD = new Uint8Array([\r\n            0x00, // version\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, // balance\r\n            0x00, 0x00 // reserved\r\n        ]);\r\n\r\n        MP4.STSD = new Uint8Array([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, 0x00, 0x01]);// entry_count\r\n\r\n        var majorBrand = new Uint8Array([105,115,111,109]); // isom\r\n        var avc1Brand = new Uint8Array([97,118,99,49]); // avc1\r\n        var minorVersion = new Uint8Array([0, 0, 0, 1]);\r\n\r\n        MP4.FTYP = MP4.box(MP4.types.ftyp, majorBrand, minorVersion, majorBrand, avc1Brand);\r\n        MP4.DINF = MP4.box(MP4.types.dinf, MP4.box(MP4.types.dref, dref));\r\n    }\r\n\r\n    static box(type, ...payload) {\r\n        var size = 8,\r\n            i = payload.length,\r\n            len = i,\r\n            result;\r\n        // calculate the total size we need to allocate\r\n        while (i--) {\r\n            size += payload[i].byteLength;\r\n        }\r\n        result = new Uint8Array(size);\r\n        result[0] = (size >> 24) & 0xff;\r\n        result[1] = (size >> 16) & 0xff;\r\n        result[2] = (size >> 8) & 0xff;\r\n        result[3] = size  & 0xff;\r\n        result.set(type, 4);\r\n        // copy the payload into the result\r\n        for (i = 0, size = 8; i < len; ++i) {\r\n            // copy payload[i] array @ offset size\r\n            result.set(payload[i], size);\r\n            size += payload[i].byteLength;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static hdlr(type) {\r\n        return MP4.box(MP4.types.hdlr, MP4.HDLR_TYPES[type]);\r\n    }\r\n\r\n    static mdat(data) {\r\n        return MP4.box(MP4.types.mdat, data);\r\n    }\r\n\r\n    static mdhd(timescale, duration) {\r\n        return MP4.box(MP4.types.mdhd, new Uint8Array([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, 0x00, 0x02, // creation_time\r\n            0x00, 0x00, 0x00, 0x03, // modification_time\r\n            (timescale >> 24) & 0xFF,\r\n            (timescale >> 16) & 0xFF,\r\n            (timescale >>  8) & 0xFF,\r\n            timescale & 0xFF, // timescale\r\n            (duration >> 24),\r\n            (duration >> 16) & 0xFF,\r\n            (duration >>  8) & 0xFF,\r\n            duration & 0xFF, // duration\r\n            0x55, 0xc4, // 'und' language (undetermined)\r\n            0x00, 0x00\r\n        ]));\r\n    }\r\n\r\n    static mdia(track) {\r\n        return MP4.box(MP4.types.mdia, MP4.mdhd(track.timescale, track.duration), MP4.hdlr(track.type), MP4.minf(track));\r\n    }\r\n\r\n    static mfhd(sequenceNumber) {\r\n        return MP4.box(MP4.types.mfhd, new Uint8Array([\r\n            0x00,\r\n            0x00, 0x00, 0x00, // flags\r\n            (sequenceNumber >> 24),\r\n            (sequenceNumber >> 16) & 0xFF,\r\n            (sequenceNumber >>  8) & 0xFF,\r\n            sequenceNumber & 0xFF, // sequence_number\r\n        ]));\r\n    }\r\n\r\n    static minf(track) {\r\n        if (track.type === 'audio') {\r\n            return MP4.box(MP4.types.minf, MP4.box(MP4.types.smhd, MP4.SMHD), MP4.DINF, MP4.stbl(track));\r\n        } else {\r\n            return MP4.box(MP4.types.minf, MP4.box(MP4.types.vmhd, MP4.VMHD), MP4.DINF, MP4.stbl(track));\r\n        }\r\n    }\r\n\r\n    static moof(sn, baseMediaDecodeTime, track) {\r\n        return MP4.box(MP4.types.moof, MP4.mfhd(sn), MP4.traf(track,baseMediaDecodeTime));\r\n    }\r\n    /**\r\n     * @param tracks... (optional) {array} the tracks associated with this movie\r\n     */\r\n    static moov(tracks, duration, timescale) {\r\n        var\r\n            i = tracks.length,\r\n            boxes = [];\r\n\r\n        while (i--) {\r\n            boxes[i] = MP4.trak(tracks[i]);\r\n        }\r\n\r\n        return MP4.box.apply(null, [MP4.types.moov, MP4.mvhd(timescale, duration)].concat(boxes).concat(MP4.mvex(tracks)));\r\n    }\r\n\r\n    static mvex(tracks) {\r\n        var\r\n            i = tracks.length,\r\n            boxes = [];\r\n\r\n        while (i--) {\r\n            boxes[i] = MP4.trex(tracks[i]);\r\n        }\r\n        return MP4.box.apply(null, [MP4.types.mvex].concat(boxes));\r\n    }\r\n\r\n    static mvhd(timescale,duration) {\r\n        var\r\n            bytes = new Uint8Array([\r\n                0x00, // version 0\r\n                0x00, 0x00, 0x00, // flags\r\n                0x00, 0x00, 0x00, 0x01, // creation_time\r\n                0x00, 0x00, 0x00, 0x02, // modification_time\r\n                (timescale >> 24) & 0xFF,\r\n                (timescale >> 16) & 0xFF,\r\n                (timescale >>  8) & 0xFF,\r\n                timescale & 0xFF, // timescale\r\n                (duration >> 24) & 0xFF,\r\n                (duration >> 16) & 0xFF,\r\n                (duration >>  8) & 0xFF,\r\n                duration & 0xFF, // duration\r\n                0x00, 0x01, 0x00, 0x00, // 1.0 rate\r\n                0x01, 0x00, // 1.0 volume\r\n                0x00, 0x00, // reserved\r\n                0x00, 0x00, 0x00, 0x00, // reserved\r\n                0x00, 0x00, 0x00, 0x00, // reserved\r\n                0x00, 0x01, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x01, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x40, 0x00, 0x00, 0x00, // transformation: unity matrix\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00, // pre_defined\r\n                0xff, 0xff, 0xff, 0xff // next_track_ID\r\n            ]);\r\n        return MP4.box(MP4.types.mvhd, bytes);\r\n    }\r\n\r\n    static sdtp(track) {\r\n        var\r\n            samples = track.samples || [],\r\n            bytes = new Uint8Array(4 + samples.length),\r\n            flags,\r\n            i;\r\n        // leave the full box header (4 bytes) all zero\r\n        // write the sample table\r\n        for (i = 0; i < samples.length; i++) {\r\n            flags = samples[i].flags;\r\n            bytes[i + 4] = (flags.dependsOn << 4) |\r\n                (flags.isDependedOn << 2) |\r\n                (flags.hasRedundancy);\r\n        }\r\n\r\n        return MP4.box(MP4.types.sdtp, bytes);\r\n    }\r\n\r\n    static stbl(track) {\r\n        return MP4.box(MP4.types.stbl, MP4.stsd(track), MP4.box(MP4.types.stts, MP4.STTS), MP4.box(MP4.types.stsc, MP4.STSC), MP4.box(MP4.types.stsz, MP4.STSZ), MP4.box(MP4.types.stco, MP4.STCO));\r\n    }\r\n\r\n    static avc1(track) {\r\n        var sps = [], pps = [], i, data, len;\r\n        // assemble the SPSs\r\n\r\n        for (i = 0; i < track.sps.length; i++) {\r\n            data = track.sps[i];\r\n            len = data.byteLength;\r\n            sps.push((len >>> 8) & 0xFF);\r\n            sps.push((len & 0xFF));\r\n            sps = sps.concat(Array.prototype.slice.call(data)); // SPS\r\n        }\r\n\r\n        // assemble the PPSs\r\n        for (i = 0; i < track.pps.length; i++) {\r\n            data = track.pps[i];\r\n            len = data.byteLength;\r\n            pps.push((len >>> 8) & 0xFF);\r\n            pps.push((len & 0xFF));\r\n            pps = pps.concat(Array.prototype.slice.call(data));\r\n        }\r\n\r\n        var avcc = MP4.box(MP4.types.avcC, new Uint8Array([\r\n                0x01,   // version\r\n                sps[3], // profile\r\n                sps[4], // profile compat\r\n                sps[5], // level\r\n                0xfc | 3, // lengthSizeMinusOne, hard-coded to 4 bytes\r\n                0xE0 | track.sps.length // 3bit reserved (111) + numOfSequenceParameterSets\r\n            ].concat(sps).concat([\r\n                track.pps.length // numOfPictureParameterSets\r\n            ]).concat(pps))), // \"PPS\"\r\n            width = track.width,\r\n            height = track.height;\r\n        //console.log('avcc:' + Hex.hexDump(avcc));\r\n        return MP4.box(MP4.types.avc1, new Uint8Array([\r\n                0x00, 0x00, 0x00, // reserved\r\n                0x00, 0x00, 0x00, // reserved\r\n                0x00, 0x01, // data_reference_index\r\n                0x00, 0x00, // pre_defined\r\n                0x00, 0x00, // reserved\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00, // pre_defined\r\n                (width >> 8) & 0xFF,\r\n                width & 0xff, // width\r\n                (height >> 8) & 0xFF,\r\n                height & 0xff, // height\r\n                0x00, 0x48, 0x00, 0x00, // horizresolution\r\n                0x00, 0x48, 0x00, 0x00, // vertresolution\r\n                0x00, 0x00, 0x00, 0x00, // reserved\r\n                0x00, 0x01, // frame_count\r\n                0x12,\r\n                0x62, 0x69, 0x6E, 0x65, //binelpro.ru\r\n                0x6C, 0x70, 0x72, 0x6F,\r\n                0x2E, 0x72, 0x75, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, // compressorname\r\n                0x00, 0x18,   // depth = 24\r\n                0x11, 0x11]), // pre_defined = -1\r\n            avcc,\r\n            MP4.box(MP4.types.btrt, new Uint8Array([\r\n                0x00, 0x1c, 0x9c, 0x80, // bufferSizeDB\r\n                0x00, 0x2d, 0xc6, 0xc0, // maxBitrate\r\n                0x00, 0x2d, 0xc6, 0xc0])) // avgBitrate\r\n        );\r\n    }\r\n\r\n    static esds(track) {\r\n        var configlen = track.config.byteLength;\r\n        let data = new Uint8Array(26+configlen+3);\r\n        data.set([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x00, // flags\r\n\r\n            0x03, // descriptor_type\r\n            0x17+configlen, // length\r\n            0x00, 0x01, //es_id\r\n            0x00, // stream_priority\r\n\r\n            0x04, // descriptor_type\r\n            0x0f+configlen, // length\r\n            0x40, //codec : mpeg4_audio\r\n            0x15, // stream_type\r\n            0x00, 0x00, 0x00, // buffer_size\r\n            0x00, 0x00, 0x00, 0x00, // maxBitrate\r\n            0x00, 0x00, 0x00, 0x00, // avgBitrate\r\n\r\n            0x05, // descriptor_type\r\n            configlen\r\n        ]);\r\n        data.set(track.config, 26);\r\n        data.set([0x06, 0x01, 0x02], 26+configlen);\r\n        // return new Uint8Array([\r\n        //     0x00, // version 0\r\n        //     0x00, 0x00, 0x00, // flags\r\n        //\r\n        //     0x03, // descriptor_type\r\n        //     0x17+configlen, // length\r\n        //     0x00, 0x01, //es_id\r\n        //     0x00, // stream_priority\r\n        //\r\n        //     0x04, // descriptor_type\r\n        //     0x0f+configlen, // length\r\n        //     0x40, //codec : mpeg4_audio\r\n        //     0x15, // stream_type\r\n        //     0x00, 0x00, 0x00, // buffer_size\r\n        //     0x00, 0x00, 0x00, 0x00, // maxBitrate\r\n        //     0x00, 0x00, 0x00, 0x00, // avgBitrate\r\n        //\r\n        //     0x05 // descriptor_type\r\n        // ].concat([configlen]).concat(track.config).concat([0x06, 0x01, 0x02])); // GASpecificConfig)); // length + audio config descriptor\r\n        return data;\r\n    }\r\n\r\n    static mp4a(track) {\r\n        var audiosamplerate = track.audiosamplerate;\r\n        return MP4.box(MP4.types.mp4a, new Uint8Array([\r\n                0x00, 0x00, 0x00, // reserved\r\n                0x00, 0x00, 0x00, // reserved\r\n                0x00, 0x01, // data_reference_index\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00, // reserved\r\n                0x00, track.channelCount, // channelcount\r\n                0x00, 0x10, // sampleSize:16bits\r\n                0x00, 0x00, // pre_defined\r\n                0x00, 0x00, // reserved2\r\n                (audiosamplerate >> 8) & 0xFF,\r\n                audiosamplerate & 0xff, //\r\n                0x00, 0x00]),\r\n            MP4.box(MP4.types.esds, MP4.esds(track)));\r\n    }\r\n\r\n    static stsd(track) {\r\n        if (track.type === 'audio') {\r\n            return MP4.box(MP4.types.stsd, MP4.STSD, MP4.mp4a(track));\r\n        } else {\r\n            return MP4.box(MP4.types.stsd, MP4.STSD, MP4.avc1(track));\r\n        }\r\n    }\r\n\r\n    static tkhd(track) {\r\n        var id = track.id,\r\n            duration = track.duration,\r\n            width = track.width,\r\n            height = track.height,\r\n            volume = track.volume;\r\n        return MP4.box(MP4.types.tkhd, new Uint8Array([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x07, // flags\r\n            0x00, 0x00, 0x00, 0x00, // creation_time\r\n            0x00, 0x00, 0x00, 0x00, // modification_time\r\n            (id >> 24) & 0xFF,\r\n            (id >> 16) & 0xFF,\r\n            (id >> 8) & 0xFF,\r\n            id & 0xFF, // track_ID\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            (duration >> 24),\r\n            (duration >> 16) & 0xFF,\r\n            (duration >>  8) & 0xFF,\r\n            duration & 0xFF, // duration\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            0x00, 0x00, // layer\r\n            0x00, 0x00, // alternate_group\r\n            (volume>>0)&0xff, (((volume%1)*10)>>0)&0xff, // track volume // FIXME\r\n            0x00, 0x00, // reserved\r\n            0x00, 0x01, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x01, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x40, 0x00, 0x00, 0x00, // transformation: unity matrix\r\n            (width >> 8) & 0xFF,\r\n            width & 0xFF,\r\n            0x00, 0x00, // width\r\n            (height >> 8) & 0xFF,\r\n            height & 0xFF,\r\n            0x00, 0x00 // height\r\n        ]));\r\n    }\r\n\r\n    static traf(track,baseMediaDecodeTime) {\r\n        var sampleDependencyTable = MP4.sdtp(track),\r\n            id = track.id;\r\n        return MP4.box(MP4.types.traf,\r\n            MP4.box(MP4.types.tfhd, new Uint8Array([\r\n                0x00, // version 0\r\n                0x00, 0x00, 0x00, // flags\r\n                (id >> 24),\r\n                (id >> 16) & 0XFF,\r\n                (id >> 8) & 0XFF,\r\n                (id & 0xFF) // track_ID\r\n            ])),\r\n            MP4.box(MP4.types.tfdt, new Uint8Array([\r\n                0x00, // version 0\r\n                0x00, 0x00, 0x00, // flags\r\n                (baseMediaDecodeTime >>24),\r\n                (baseMediaDecodeTime >> 16) & 0XFF,\r\n                (baseMediaDecodeTime >> 8) & 0XFF,\r\n                (baseMediaDecodeTime & 0xFF) // baseMediaDecodeTime\r\n            ])),\r\n            MP4.trun(track,\r\n                sampleDependencyTable.length +\r\n                16 + // tfhd\r\n                16 + // tfdt\r\n                8 +  // traf header\r\n                16 + // mfhd\r\n                8 +  // moof header\r\n                8),  // mdat header\r\n            sampleDependencyTable);\r\n    }\r\n\r\n    /**\r\n     * Generate a track box.\r\n     * @param track {object} a track definition\r\n     * @return {Uint8Array} the track box\r\n     */\r\n    static trak(track) {\r\n        track.duration = track.duration || 0xffffffff;\r\n        return MP4.box(MP4.types.trak, MP4.tkhd(track), MP4.mdia(track));\r\n    }\r\n\r\n    static trex(track) {\r\n        var id = track.id;\r\n        return MP4.box(MP4.types.trex, new Uint8Array([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x00, // flags\r\n            (id >> 24),\r\n            (id >> 16) & 0XFF,\r\n            (id >> 8) & 0XFF,\r\n            (id & 0xFF), // track_ID\r\n            0x00, 0x00, 0x00, 0x01, // default_sample_description_index\r\n            0x00, 0x00, 0x00, 0x00, // default_sample_duration\r\n            0x00, 0x00, 0x00, 0x00, // default_sample_size\r\n            0x00, 0x01, 0x00, 0x01 // default_sample_flags\r\n        ]));\r\n    }\r\n\r\n    static trun(track, offset) {\r\n        var samples= track.samples || [],\r\n            len = samples.length,\r\n            arraylen = 12 + (16 * len),\r\n            array = new Uint8Array(arraylen),\r\n            i,sample,duration,size,flags,cts;\r\n        offset += 8 + arraylen;\r\n        array.set([\r\n            0x00, // version 0\r\n            0x00, 0x0f, 0x01, // flags\r\n            (len >>> 24) & 0xFF,\r\n            (len >>> 16) & 0xFF,\r\n            (len >>> 8) & 0xFF,\r\n            len & 0xFF, // sample_count\r\n            (offset >>> 24) & 0xFF,\r\n            (offset >>> 16) & 0xFF,\r\n            (offset >>> 8) & 0xFF,\r\n            offset & 0xFF // data_offset\r\n        ],0);\r\n        for (i = 0; i < len; i++) {\r\n            sample = samples[i];\r\n            duration = sample.duration;\r\n            size = sample.size;\r\n            flags = sample.flags;\r\n            cts = sample.cts;\r\n            array.set([\r\n                (duration >>> 24) & 0xFF,\r\n                (duration >>> 16) & 0xFF,\r\n                (duration >>> 8) & 0xFF,\r\n                duration & 0xFF, // sample_duration\r\n                (size >>> 24) & 0xFF,\r\n                (size >>> 16) & 0xFF,\r\n                (size >>> 8) & 0xFF,\r\n                size & 0xFF, // sample_size\r\n                (flags.isLeading << 2) | flags.dependsOn,\r\n                (flags.isDependedOn << 6) |\r\n                (flags.hasRedundancy << 4) |\r\n                (flags.paddingValue << 1) |\r\n                flags.isNonSync,\r\n                flags.degradPrio & 0xF0 << 8,\r\n                flags.degradPrio & 0x0F, // sample_flags\r\n                (cts >>> 24) & 0xFF,\r\n                (cts >>> 16) & 0xFF,\r\n                (cts >>> 8) & 0xFF,\r\n                cts & 0xFF // sample_composition_time_offset\r\n            ],12+16*i);\r\n        }\r\n        return MP4.box(MP4.types.trun, array);\r\n    }\r\n\r\n    static initSegment(tracks, duration, timescale) {\r\n        if (!MP4.types) {\r\n            MP4.init();\r\n        }\r\n        var movie = MP4.moov(tracks, duration, timescale), result;\r\n        result = new Uint8Array(MP4.FTYP.byteLength + movie.byteLength);\r\n        result.set(MP4.FTYP);\r\n        result.set(movie, MP4.FTYP.byteLength);\r\n        return result;\r\n    }\r\n}\r\n","import {EventEmitter} from '../../deps/bp_event.js';\r\nimport {getTagged} from '../../deps/bp_logger.js';\r\n//import {MP4Inspect} from '../iso-bmff/mp4-inspector.js';\r\n\r\nconst LOG_TAG = \"mse\";\r\nconst Log = getTagged(LOG_TAG);\r\n\r\nexport class MSEBuffer {\r\n    constructor(parent, codec) {\r\n        this.mediaSource = parent.mediaSource;\r\n        this.players = parent.players;\r\n        this.cleaning = false;\r\n        this.parent = parent;\r\n        this.queue = [];\r\n        this.cleanResolvers = [];\r\n        this.codec = codec;\r\n        this.cleanRanges = [];\r\n\r\n        Log.debug(`Use codec: ${codec}`);\r\n\r\n        this.sourceBuffer = this.mediaSource.addSourceBuffer(codec);\r\n        this.eventSource = new EventEmitter(this.sourceBuffer);\r\n\r\n        this.eventSource.addEventListener('updatestart', (e)=> {\r\n            // this.updating = true;\r\n            // Log.debug('update start');\r\n            if (this.cleaning) {\r\n                Log.debug(`${this.codec} cleaning start`);\r\n            }\r\n        });\r\n\r\n        this.eventSource.addEventListener('update', (e)=> {\r\n            // this.updating = true;\r\n            if (this.cleaning) {\r\n                Log.debug(`${this.codec} cleaning update`);\r\n            }\r\n        });\r\n\r\n        this.eventSource.addEventListener('updateend', (e)=> {\r\n            // Log.debug('update end');\r\n            // this.updating = false;\r\n            if (this.cleaning) {\r\n                Log.debug(`${this.codec} cleaning end`);\r\n\r\n                try {\r\n                    if (this.sourceBuffer.buffered.length && this.players[0].currentTime < this.sourceBuffer.buffered.start(0)) {\r\n                        this.players[0].currentTime = this.sourceBuffer.buffered.start(0);\r\n                    }\r\n                } catch (e) {\r\n                    // TODO: do something?\r\n                }\r\n                while (this.cleanResolvers.length) {\r\n                    let resolver = this.cleanResolvers.shift();\r\n                    resolver();\r\n                }\r\n                this.cleaning = false;\r\n\r\n                if (this.cleanRanges.length) {\r\n                    this.doCleanup();\r\n                    return;\r\n                }\r\n            } else {\r\n                // Log.debug(`buffered: ${this.sourceBuffer.buffered.end(0)}, current ${this.players[0].currentTime}`);\r\n            }\r\n            this.feedNext();\r\n        });\r\n\r\n        this.eventSource.addEventListener('error', (e)=> {\r\n            Log.debug(`Source buffer error: ${this.mediaSource.readyState}`);\r\n            if (this.mediaSource.sourceBuffers.length) {\r\n                this.mediaSource.removeSourceBuffer(this.sourceBuffer);\r\n            }\r\n            this.parent.eventSource.dispatchEvent('error');\r\n        });\r\n\r\n        this.eventSource.addEventListener('abort', (e)=> {\r\n            Log.debug(`Source buffer aborted: ${this.mediaSource.readyState}`);\r\n            if (this.mediaSource.sourceBuffers.length) {\r\n                this.mediaSource.removeSourceBuffer(this.sourceBuffer);\r\n            }\r\n            this.parent.eventSource.dispatchEvent('error');\r\n        });\r\n\r\n        if (!this.sourceBuffer.updating) {\r\n            this.feedNext();\r\n        }\r\n        // TODO: cleanup every hour for live streams\r\n    }\r\n\r\n    destroy() {\r\n        this.eventSource.destroy();\r\n        this.clear();\r\n        this.queue = [];\r\n        this.mediaSource.removeSourceBuffer(this.sourceBuffer);\r\n    }\r\n\r\n    clear() {\r\n        this.queue = [];\r\n        let promises = [];\r\n        for (let i=0; i< this.sourceBuffer.buffered.length; ++i) {\r\n            // TODO: await remove\r\n            this.cleaning = true;\r\n            promises.push(new Promise((resolve, reject)=>{\r\n                this.cleanResolvers.push(resolve);\r\n                if (!this.sourceBuffer.updating) {\r\n                    this.sourceBuffer.remove(this.sourceBuffer.buffered.start(i), this.sourceBuffer.buffered.end(i));\r\n                    resolve();\r\n                } else {\r\n                    this.sourceBuffer.onupdateend = () => {\r\n                        if (this.sourceBuffer) {\r\n                            this.sourceBuffer.remove(this.sourceBuffer.buffered.start(i), this.sourceBuffer.buffered.end(i));\r\n                        }\r\n                        resolve();\r\n                    };\r\n                }\r\n            }));\r\n        }\r\n        return Promise.all(promises);\r\n    }\r\n\r\n    setLive(is_live) {\r\n        this.is_live = is_live;\r\n    }\r\n\r\n    feedNext() {\r\n        // Log.debug(\"feed next \", this.sourceBuffer.updating);\r\n        if (!this.sourceBuffer.updating && !this.cleaning && this.queue.length) {\r\n            this.doAppend(this.queue.shift());\r\n            // TODO: if is live and current position > 1hr => clean all and restart\r\n        }\r\n    }\r\n\r\n    doCleanup() {\r\n        if (!this.cleanRanges.length) {\r\n            this.cleaning = false;\r\n            this.feedNext();\r\n            return;\r\n        }\r\n        let range = this.cleanRanges.shift();\r\n        Log.debug(`${this.codec} remove range [${range[0]} - ${range[1]}). \r\n                    \\nUpdating: ${this.sourceBuffer.updating}\r\n                    `);\r\n        this.cleaning = true;\r\n        this.sourceBuffer.remove(range[0], range[1]);\r\n    }\r\n\r\n    initCleanup() {\r\n        if (this.sourceBuffer.buffered.length && !this.sourceBuffer.updating && !this.cleaning) {\r\n            Log.debug(`${this.codec} cleanup`);\r\n            let removeBound = this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length-1) - 2;\r\n\r\n            for (let i=0; i< this.sourceBuffer.buffered.length; ++i) {\r\n                let removeStart = this.sourceBuffer.buffered.start(i);\r\n                let removeEnd = this.sourceBuffer.buffered.end(i);\r\n                if ((this.players[0].currentTime <= removeStart) || (removeBound <= removeStart)) continue;\r\n\r\n                if ((removeBound <= removeEnd) && (removeBound >= removeStart)) {\r\n                    Log.debug(`Clear [${removeStart}, ${removeBound}), leave [${removeBound}, ${removeEnd}]`);\r\n                    removeEnd = removeBound;\r\n                    if (removeEnd!=removeStart) {\r\n                        this.cleanRanges.push([removeStart, removeEnd]);\r\n                    }\r\n                    continue; // Do not cleanup buffered range after current position\r\n                }\r\n                this.cleanRanges.push([removeStart, removeEnd]);\r\n            }\r\n\r\n            this.doCleanup();\r\n\r\n            // let bufferStart = this.sourceBuffer.buffered.start(0);\r\n            // let removeEnd = this.sourceBuffer.buffered.start(0) + (this.sourceBuffer.buffered.end(0) - this.sourceBuffer.buffered.start(0))/2;\r\n            // if (this.players[0].currentTime < removeEnd) {\r\n            //     this.players[0].currentTime = removeEnd;\r\n            // }\r\n            // let removeEnd = Math.max(this.players[0].currentTime - 3, this.sourceBuffer.buffered.end(0) - 3);\r\n            //\r\n            // if (removeEnd < bufferStart) {\r\n            //     removeEnd = this.sourceBuffer.buffered.start(0) + (this.sourceBuffer.buffered.end(0) - this.sourceBuffer.buffered.start(0))/2;\r\n            //     if (this.players[0].currentTime < removeEnd) {\r\n            //         this.players[0].currentTime = removeEnd;\r\n            //     }\r\n            // }\r\n\r\n            // if (removeEnd > bufferStart && (removeEnd - bufferStart > 0.5 )) {\r\n            //     // try {\r\n            //         Log.debug(`${this.codec} remove range [${bufferStart} - ${removeEnd}).\r\n            //         \\nBuffered end: ${this.sourceBuffer.buffered.end(0)}\r\n            //         \\nUpdating: ${this.sourceBuffer.updating}\r\n            //         `);\r\n            //         this.cleaning = true;\r\n            //         this.sourceBuffer.remove(bufferStart, removeEnd);\r\n            //     // } catch (e) {\r\n            //     //     // TODO: implement\r\n            //     //     Log.error(e);\r\n            //     // }\r\n            // } else {\r\n            //     this.feedNext();\r\n            // }\r\n        } else {\r\n            this.feedNext();\r\n        }\r\n    }\r\n\r\n    doAppend(data) {\r\n        // console.log(MP4Inspect.mp4toJSON(data));\r\n        let err = this.players[0].error;\r\n        if (err) {\r\n            Log.error(`Error occured: ${MSE.ErrorNotes[err.code]}`);\r\n            try {\r\n                this.players.forEach((video)=>{video.stop();});\r\n                this.mediaSource.endOfStream();\r\n            } catch (e){\r\n\r\n            }\r\n            this.parent.eventSource.dispatchEvent('error');\r\n        } else {\r\n            try {\r\n                this.sourceBuffer.appendBuffer(data);\r\n            } catch (e) {\r\n                if (e.name === 'QuotaExceededError') {\r\n                    Log.debug(`${this.codec} quota fail`);\r\n                    this.queue.unshift(data);\r\n                    this.initCleanup();\r\n                    return;\r\n                }\r\n\r\n                // reconnect on fail\r\n                Log.error(`Error occured while appending buffer. ${e.name}: ${e.message}`);\r\n                this.parent.eventSource.dispatchEvent('error');\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    feed(data) {\r\n        this.queue = this.queue.concat(data);\r\n        // Log.debug(this.sourceBuffer.updating, this.updating, this.queue.length);\r\n        if (this.sourceBuffer && !this.sourceBuffer.updating && !this.cleaning) {\r\n            // Log.debug('enq feed');\r\n            this.feedNext();\r\n        }\r\n    }\r\n}\r\n\r\nexport class MSE {\r\n    // static CODEC_AVC_BASELINE = \"avc1.42E01E\";\r\n    // static CODEC_AVC_MAIN = \"avc1.4D401E\";\r\n    // static CODEC_AVC_HIGH = \"avc1.64001E\";\r\n    // static CODEC_VP8 = \"vp8\";\r\n    // static CODEC_AAC = \"mp4a.40.2\";\r\n    // static CODEC_VORBIS = \"vorbis\";\r\n    // static CODEC_THEORA = \"theora\";\r\n\r\n    static get ErrorNotes() {return  {\r\n        [MediaError.MEDIA_ERR_ABORTED]: 'fetching process aborted by user',\r\n        [MediaError.MEDIA_ERR_NETWORK]: 'error occurred when downloading',\r\n        [MediaError.MEDIA_ERR_DECODE]: 'error occurred when decoding',\r\n        [MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]: 'audio/video not supported'\r\n    }};\r\n\r\n    static isSupported(codecs) {\r\n        return (window.MediaSource && window.MediaSource.isTypeSupported(`video/mp4; codecs=\"${codecs.join(',')}\"`));\r\n    }\r\n\r\n    constructor (players) {\r\n        this.players = players;\r\n        const playing = this.players.map((video, idx) => {\r\n            video.onplaying = function () {\r\n                playing[idx] = true;\r\n            };\r\n            video.onpause = function () {\r\n                playing[idx] = false;\r\n            };\r\n            return !video.paused;\r\n        });\r\n        this.playing = playing;\r\n        this.mediaSource = new MediaSource();\r\n        this.eventSource = new EventEmitter(this.mediaSource);\r\n        this.reset();\r\n    }\r\n\r\n    destroy() {\r\n        this.reset();\r\n        this.eventSource.destroy();\r\n        this.mediaSource = null;\r\n        this.eventSource = null;\r\n    }\r\n\r\n    play() {\r\n        this.players.forEach((video, idx)=>{\r\n            if (video.paused && !this.playing[idx]) {\r\n                Log.debug(`player ${idx}: play`);\r\n                video.play();\r\n            }\r\n        });\r\n    }\r\n\r\n    setLive(is_live) {\r\n        for (let idx in this.buffers) {\r\n            this.buffers[idx].setLive(is_live);\r\n        }\r\n        this.is_live = is_live;\r\n    }\r\n\r\n    resetBuffers() {\r\n        this.players.forEach((video, idx)=>{\r\n            if (!video.paused && this.playing[idx]) {\r\n                video.pause();\r\n                video.currentTime = 0;\r\n            }\r\n        });\r\n\r\n        let promises = [];\r\n        for (let buffer of this.buffers.values()) {\r\n            promises.push(buffer.clear());\r\n        }\r\n        return Promise.all(promises).then(()=>{\r\n            this.mediaSource.endOfStream();\r\n            this.mediaSource.duration = 0;\r\n            this.mediaSource.clearLiveSeekableRange();\r\n            this.play();\r\n        });\r\n    }\r\n\r\n    clear() {\r\n        this.reset();\r\n        this.players.forEach((video)=>{video.src = URL.createObjectURL(this.mediaSource)});\r\n\r\n        return this.setupEvents();\r\n    }\r\n\r\n    setupEvents() {\r\n        this.eventSource.clear();\r\n        this.resolved = false;\r\n        this.mediaReady = new Promise((resolve, reject)=> {\r\n            this._sourceOpen = ()=> {\r\n                Log.debug(`Media source opened: ${this.mediaSource.readyState}`);\r\n                if (!this.resolved) {\r\n                    this.resolved = true;\r\n                    resolve();\r\n                }\r\n            };\r\n            this._sourceEnded = ()=>{\r\n                Log.debug(`Media source ended: ${this.mediaSource.readyState}`);\r\n            };\r\n            this._sourceClose = ()=>{\r\n                Log.debug(`Media source closed: ${this.mediaSource.readyState}`);\r\n                if (this.resolved) {\r\n                    this.eventSource.dispatchEvent('sourceclosed');\r\n                }\r\n            };\r\n            this.eventSource.addEventListener('sourceopen', this._sourceOpen);\r\n            this.eventSource.addEventListener('sourceended', this._sourceEnded);\r\n            this.eventSource.addEventListener('sourceclose', this._sourceClose);\r\n        });\r\n        return this.mediaReady;\r\n    }\r\n\r\n    reset() {\r\n        this.ready = false;\r\n        for (let track in this.buffers) {\r\n            this.buffers[track].destroy();\r\n            delete this.buffers[track];\r\n        }\r\n        if (this.mediaSource.readyState == 'open') {\r\n            this.mediaSource.duration = 0;\r\n            this.mediaSource.endOfStream();\r\n        }\r\n        this.updating = false;\r\n        this.resolved = false;\r\n        this.buffers = {};\r\n        // this.players.forEach((video)=>{video.src = URL.createObjectURL(this.mediaSource)});\r\n        // TODO: remove event listeners for existing media source\r\n        // this.setupEvents();\r\n        // this.clear();\r\n    }\r\n\r\n    setCodec(track, mimeCodec) {\r\n        return this.mediaReady.then(()=>{\r\n            this.buffers[track] = new MSEBuffer(this, mimeCodec);\r\n            this.buffers[track].setLive(this.is_live);\r\n        });\r\n    }\r\n\r\n    feed(track, data) {\r\n        if (this.buffers[track]) {\r\n            this.buffers[track].feed(data);\r\n        }\r\n    }\r\n}\r\n","import {getTagged} from '../../deps/bp_logger.js';\r\n\r\nconst Log = getTagged('remuxer:base');\r\nlet track_id = 1;\r\nexport class BaseRemuxer {\r\n\r\n    static get MP4_TIMESCALE() { return 90000;}\r\n\r\n    // TODO: move to ts parser\r\n    // static PTSNormalize(value, reference) {\r\n    //\r\n    //     let offset;\r\n    //     if (reference === undefined) {\r\n    //         return value;\r\n    //     }\r\n    //     if (reference < value) {\r\n    //         // - 2^33\r\n    //         offset = -8589934592;\r\n    //     } else {\r\n    //         // + 2^33\r\n    //         offset = 8589934592;\r\n    //     }\r\n    //     /* PTS is 33bit (from 0 to 2^33 -1)\r\n    //      if diff between value and reference is bigger than half of the amplitude (2^32) then it means that\r\n    //      PTS looping occured. fill the gap */\r\n    //     while (Math.abs(value - reference) > 4294967296) {\r\n    //         value += offset;\r\n    //     }\r\n    //     return value;\r\n    // }\r\n\r\n    static getTrackID() {\r\n        return track_id++;\r\n    }\r\n\r\n    constructor(timescale, scaleFactor, params) {\r\n        this.timeOffset = 0;\r\n        this.timescale = timescale;\r\n        this.scaleFactor = scaleFactor;\r\n        this.readyToDecode = false;\r\n        this.samples = [];\r\n        this.seq = 1;\r\n        this.tsAlign = 1;\r\n    }\r\n\r\n    scaled(timestamp) {\r\n        return timestamp / this.scaleFactor;\r\n    }\r\n\r\n    unscaled(timestamp) {\r\n        return timestamp * this.scaleFactor;\r\n    }\r\n\r\n    remux(unit) {\r\n        if (unit) {\r\n            this.samples.push({\r\n                unit: unit,\r\n                pts: unit.pts,\r\n                dts: unit.dts\r\n            });\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    static toMS(timestamp) {\r\n        return timestamp/90;\r\n    }\r\n    \r\n    setConfig(config) {\r\n        \r\n    }\r\n\r\n    insertDscontinuity() {\r\n        this.samples.push(null);\r\n    }\r\n\r\n    init(initPTS, initDTS, shouldInitialize=true) {\r\n        this.initPTS = Math.min(initPTS, this.samples[0].dts /*- this.unscaled(this.timeOffset)*/);\r\n        this.initDTS = Math.min(initDTS, this.samples[0].dts /*- this.unscaled(this.timeOffset)*/);\r\n        Log.debug(`Initial pts=${this.initPTS} dts=${this.initDTS} offset=${this.unscaled(this.timeOffset)}`);\r\n        this.initialized = shouldInitialize;\r\n    }\r\n\r\n    flush() {\r\n        this.seq++;\r\n        this.mp4track.len = 0;\r\n        this.mp4track.samples = [];\r\n    }\r\n\r\n    static dtsSortFunc(a,b) {\r\n        return (a.dts-b.dts);\r\n    }\r\n\r\n    static groupByDts(gop) {\r\n        const groupBy = (xs, key) => {\r\n            return xs.reduce((rv, x) => {\r\n                (rv[x[key]] = rv[x[key]] || []).push(x);\r\n                return rv;\r\n            }, {});\r\n        };\r\n        return groupBy(gop, 'dts');\r\n    }\r\n\r\n    getPayloadBase(sampleFunction, setupSample) {\r\n        if (!this.readyToDecode || !this.initialized || !this.samples.length) return null;\r\n        this.samples.sort(BaseRemuxer.dtsSortFunc);\r\n        return true;\r\n        //\r\n        // let payload = new Uint8Array(this.mp4track.len);\r\n        // let offset = 0;\r\n        // let samples=this.mp4track.samples;\r\n        // let mp4Sample, lastDTS, pts, dts;\r\n        //\r\n        // while (this.samples.length) {\r\n        //     let sample = this.samples.shift();\r\n        //     if (sample === null) {\r\n        //         // discontinuity\r\n        //         this.nextDts = undefined;\r\n        //         break;\r\n        //     }\r\n        //\r\n        //     let unit = sample.unit;\r\n        //\r\n        //     pts = Math.round((sample.pts - this.initDTS)/this.tsAlign)*this.tsAlign;\r\n        //     dts = Math.round((sample.dts - this.initDTS)/this.tsAlign)*this.tsAlign;\r\n        //     // ensure DTS is not bigger than PTS\r\n        //     dts = Math.min(pts, dts);\r\n        //\r\n        //     // sampleFunction(pts, dts);   // TODO:\r\n        //\r\n        //     // mp4Sample = setupSample(unit, pts, dts);    // TODO:\r\n        //\r\n        //     payload.set(unit.getData(), offset);\r\n        //     offset += unit.getSize();\r\n        //\r\n        //     samples.push(mp4Sample);\r\n        //     lastDTS = dts;\r\n        // }\r\n        // if (!samples.length) return null;\r\n        //\r\n        // // samplesPostFunction(samples); // TODO:\r\n        //\r\n        // return new Uint8Array(payload.buffer, 0, this.mp4track.len);\r\n    }\r\n}","import {getTagged} from '../../deps/bp_logger.js';\r\nimport {MSE} from '../presentation/mse.js';\r\nimport {BaseRemuxer} from './base.js';\r\n\r\nconst Log = getTagged(\"remuxer:aac\");\r\n// TODO: asm.js\r\nexport class AACRemuxer extends BaseRemuxer {\r\n\r\n    constructor(timescale, scaleFactor = 1, params={}) {\r\n        super(timescale, scaleFactor);\r\n\r\n        this.codecstring=MSE.CODEC_AAC;\r\n        this.units = [];\r\n        this.initDTS = undefined;\r\n        this.nextAacPts = undefined;\r\n        this.lastPts = 0;\r\n        this.firstDTS = 0;\r\n        this.firstPTS = 0;\r\n        this.duration = params.duration || 1;\r\n        this.initialized = false;\r\n\r\n        this.mp4track={\r\n            id:BaseRemuxer.getTrackID(),\r\n            type: 'audio',\r\n            fragmented:true,\r\n            channelCount:0,\r\n            audiosamplerate: this.timescale,\r\n            duration: 0,\r\n            timescale: this.timescale,\r\n            volume: 1,\r\n            samples: [],\r\n            config: '',\r\n            len: 0\r\n        };\r\n        if (params.config) {\r\n            this.setConfig(params.config);\r\n        }\r\n    }\r\n\r\n    setConfig(config) {\r\n        this.mp4track.channelCount = config.channels;\r\n        this.mp4track.audiosamplerate = config.samplerate;\r\n        if (!this.mp4track.duration) {\r\n            this.mp4track.duration = (this.duration?this.duration:1)*config.samplerate;\r\n        }\r\n        this.mp4track.timescale = config.samplerate;\r\n        this.mp4track.config = config.config;\r\n        this.mp4track.codec = config.codec;\r\n        this.timescale = config.samplerate;\r\n        this.scaleFactor = BaseRemuxer.MP4_TIMESCALE / config.samplerate;\r\n        this.expectedSampleDuration = 1024 * this.scaleFactor;\r\n        this.readyToDecode = true;\r\n    }\r\n\r\n    remux(aac) {\r\n        if (super.remux.call(this, aac)) {\r\n            this.mp4track.len += aac.getSize();\r\n        }\r\n    }\r\n\r\n    getPayload() {\r\n        if (!this.readyToDecode || !this.samples.length) return null;\r\n        this.samples.sort(function(a, b) {\r\n            return (a.dts-b.dts);\r\n        });\r\n\r\n        let payload = new Uint8Array(this.mp4track.len);\r\n        let offset = 0;\r\n        let samples=this.mp4track.samples;\r\n        let mp4Sample, lastDTS, pts, dts;\r\n\r\n        while (this.samples.length) {\r\n            let sample = this.samples.shift();\r\n            if (sample === null) {\r\n                // discontinuity\r\n                this.nextDts = undefined;\r\n                break;\r\n            }\r\n            let unit = sample.unit;\r\n            pts = sample.pts - this.initDTS;\r\n            dts = sample.dts - this.initDTS;\r\n\r\n            if (lastDTS === undefined) {\r\n                if (this.nextDts) {\r\n                    let delta = Math.round(this.scaled(pts - this.nextAacPts));\r\n                    // if fragment are contiguous, or delta less than 600ms, ensure there is no overlap/hole between fragments\r\n                    if (/*contiguous || */Math.abs(delta) < 600) {\r\n                        // log delta\r\n                        if (delta) {\r\n                            if (delta > 0) {\r\n                                Log.log(`${delta} ms hole between AAC samples detected,filling it`);\r\n                                // if we have frame overlap, overlapping for more than half a frame duraion\r\n                            } else if (delta < -12) {\r\n                                // drop overlapping audio frames... browser will deal with it\r\n                                Log.log(`${(-delta)} ms overlapping between AAC samples detected, drop frame`);\r\n                                this.mp4track.len -= unit.getSize();\r\n                                continue;\r\n                            }\r\n                            // set DTS to next DTS\r\n                            pts = dts = this.nextAacPts;\r\n                        }\r\n                    }\r\n                }\r\n                // remember first PTS of our aacSamples, ensure value is positive\r\n                this.firstDTS = Math.max(0, dts);\r\n            }\r\n\r\n            mp4Sample = {\r\n                size: unit.getSize(),\r\n                cts: 0,\r\n                duration:1024,\r\n                flags: {\r\n                    isLeading: 0,\r\n                    isDependedOn: 0,\r\n                    hasRedundancy: 0,\r\n                    degradPrio: 0,\r\n                    dependsOn: 1\r\n                }\r\n            };\r\n\r\n            payload.set(unit.getData(), offset);\r\n            offset += unit.getSize();\r\n            samples.push(mp4Sample);\r\n            lastDTS = dts;\r\n        }\r\n        if (!samples.length) return null;\r\n        this.nextDts =pts+this.expectedSampleDuration;\r\n        return new Uint8Array(payload.buffer, 0, this.mp4track.len);\r\n    }\r\n}\r\n//test.bundle.js:42 [remuxer:h264] skip frame from the past at DTS=18397972271140676 with expected DTS=18397998040950484","/**\r\n * Parser for exponential Golomb codes, a variable-bitwidth number encoding scheme used by h264.\r\n*/\r\n// TODO: asm.js\r\nimport {Log as logger} from '../../deps/bp_logger.js';\r\n\r\nexport class ExpGolomb {\r\n\r\n  constructor(data) {\r\n    this.data = data;\r\n    // the number of bytes left to examine in this.data\r\n    this.bytesAvailable = this.data.byteLength;\r\n    // the current word being examined\r\n    this.word = 0; // :uint\r\n    // the number of bits left to examine in the current word\r\n    this.bitsAvailable = 0; // :uint\r\n  }\r\n\r\n  // ():void\r\n  loadWord() {\r\n    var\r\n      position = this.data.byteLength - this.bytesAvailable,\r\n      workingBytes = new Uint8Array(4),\r\n      availableBytes = Math.min(4, this.bytesAvailable);\r\n    if (availableBytes === 0) {\r\n      throw new Error('no bytes available');\r\n    }\r\n    workingBytes.set(this.data.subarray(position, position + availableBytes));\r\n    this.word = new DataView(workingBytes.buffer, workingBytes.byteOffset, workingBytes.byteLength).getUint32(0);\r\n    // track the amount of this.data that has been processed\r\n    this.bitsAvailable = availableBytes * 8;\r\n    this.bytesAvailable -= availableBytes;\r\n  }\r\n\r\n  // (count:int):void\r\n  skipBits(count) {\r\n    var skipBytes; // :int\r\n    if (this.bitsAvailable > count) {\r\n      this.word <<= count;\r\n      this.bitsAvailable -= count;\r\n    } else {\r\n      count -= this.bitsAvailable;\r\n      skipBytes = count >> 3;\r\n      count -= (skipBytes << 3);\r\n      this.bytesAvailable -= skipBytes;\r\n      this.loadWord();\r\n      this.word <<= count;\r\n      this.bitsAvailable -= count;\r\n    }\r\n  }\r\n\r\n  // (size:int):uint\r\n  readBits(size) {\r\n    var\r\n      bits = Math.min(this.bitsAvailable, size), // :uint\r\n      valu = this.word >>> (32 - bits); // :uint\r\n    if (size > 32) {\r\n      logger.error('Cannot read more than 32 bits at a time');\r\n    }\r\n    this.bitsAvailable -= bits;\r\n    if (this.bitsAvailable > 0) {\r\n      this.word <<= bits;\r\n    } else if (this.bytesAvailable > 0) {\r\n      this.loadWord();\r\n    }\r\n    bits = size - bits;\r\n    if (bits > 0) {\r\n      return valu << bits | this.readBits(bits);\r\n    } else {\r\n      return valu;\r\n    }\r\n  }\r\n\r\n  // ():uint\r\n  skipLZ() {\r\n    var leadingZeroCount; // :uint\r\n    for (leadingZeroCount = 0; leadingZeroCount < this.bitsAvailable; ++leadingZeroCount) {\r\n      if (0 !== (this.word & (0x80000000 >>> leadingZeroCount))) {\r\n        // the first bit of working word is 1\r\n        this.word <<= leadingZeroCount;\r\n        this.bitsAvailable -= leadingZeroCount;\r\n        return leadingZeroCount;\r\n      }\r\n    }\r\n    // we exhausted word and still have not found a 1\r\n    this.loadWord();\r\n    return leadingZeroCount + this.skipLZ();\r\n  }\r\n\r\n  // ():void\r\n  skipUEG() {\r\n    this.skipBits(1 + this.skipLZ());\r\n  }\r\n\r\n  // ():void\r\n  skipEG() {\r\n    this.skipBits(1 + this.skipLZ());\r\n  }\r\n\r\n  // ():uint\r\n  readUEG() {\r\n    var clz = this.skipLZ(); // :uint\r\n    return this.readBits(clz + 1) - 1;\r\n  }\r\n\r\n  // ():int\r\n  readEG() {\r\n    var valu = this.readUEG(); // :int\r\n    if (0x01 & valu) {\r\n      // the number is odd if the low order bit is set\r\n      return (1 + valu) >>> 1; // add 1 to make it even, and divide by 2\r\n    } else {\r\n      return -1 * (valu >>> 1); // divide by two then make it negative\r\n    }\r\n  }\r\n\r\n  // Some convenience functions\r\n  // :Boolean\r\n  readBoolean() {\r\n    return 1 === this.readBits(1);\r\n  }\r\n\r\n  // ():int\r\n  readUByte() {\r\n    return this.readBits(8);\r\n  }\r\n\r\n  // ():int\r\n  readUShort() {\r\n    return this.readBits(16);\r\n  }\r\n    // ():int\r\n  readUInt() {\r\n    return this.readBits(32);\r\n  }  \r\n}\r\n","// TODO: asm.js\r\n\r\nexport function appendByteArray(buffer1, buffer2) {\r\n    let tmp = new Uint8Array((buffer1.byteLength|0) + (buffer2.byteLength|0));\r\n    tmp.set(buffer1, 0);\r\n    tmp.set(buffer2, buffer1.byteLength|0);\r\n    return tmp;\r\n}\r\n\r\nexport function appendByteArrayAsync(buffer1, buffer2) {\r\n    return new Promise((resolve, reject)=>{\r\n        let blob = new Blob([buffer1, buffer2]);\r\n        let reader = new FileReader();\r\n        reader.addEventListener(\"loadend\", function() {\r\n            resolve();\r\n        });\r\n        reader.readAsArrayBuffer(blob);\r\n    });\r\n}\r\nexport function base64ToArrayBuffer(base64) {\r\n    var binary_string =  window.atob(base64);\r\n    var len = binary_string.length;\r\n    var bytes = new Uint8Array( len );\r\n    for (var i = 0; i < len; i++)        {\r\n        bytes[i] = binary_string.charCodeAt(i);\r\n    }\r\n    return bytes.buffer;\r\n}\r\n\r\nexport function hexToByteArray(hex) {\r\n    let len = hex.length >> 1;\r\n    var bufView = new Uint8Array(len);\r\n    for (var i = 0; i < len; i++) {\r\n        bufView[i] = parseInt(hex.substr(i<<1,2),16);\r\n    }\r\n    return bufView;\r\n}\r\n\r\nexport function concatenate(resultConstructor, ...arrays) {\r\n    let totalLength = 0;\r\n    for (let arr of arrays) {\r\n        totalLength += arr.length;\r\n    }\r\n    let result = new resultConstructor(totalLength);\r\n    let offset = 0;\r\n    for (let arr of arrays) {\r\n        result.set(arr, offset);\r\n        offset += arr.length;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function bitSlice(bytearray, start=0, end=bytearray.byteLength*8) {\r\n    let byteLen = Math.ceil((end-start)/8);\r\n    let res = new Uint8Array(byteLen);\r\n    let startByte = start >>> 3;   // /8\r\n    let endByte = (end>>>3) - 1;    // /8\r\n    let bitOffset = start & 0x7;     // %8\r\n    let nBitOffset = 8 - bitOffset;\r\n    let endOffset = 8 - end & 0x7;   // %8\r\n    for (let i=0; i<byteLen; ++i) {\r\n        let tail = 0;\r\n        if (i<endByte) {\r\n            tail = bytearray[startByte+i+1] >> nBitOffset;\r\n            if (i == endByte-1 && endOffset < 8) {\r\n                tail >>= endOffset;\r\n                tail <<= endOffset;\r\n            }\r\n        }\r\n        res[i]=(bytearray[startByte+i]<<bitOffset) | tail;\r\n    }\r\n    return res;\r\n}\r\n\r\nexport class BitArray {\r\n\r\n    constructor(src) {\r\n        this.src    = new DataView(src.buffer, src.byteOffset, src.byteLength);\r\n        this.bitpos = 0;\r\n        this.byte   = this.src.getUint8(0); /* This should really be undefined, uint wont allow it though */\r\n        this.bytepos = 0;\r\n    }\r\n\r\n    readBits(length) {\r\n        if (32 < (length|0) || 0 === (length|0)) {\r\n            /* To big for an uint */\r\n            throw new Error(\"too big\");\r\n        }\r\n\r\n        let result = 0;\r\n        for (let i = length; i > 0; --i) {\r\n\r\n            /* Shift result one left to make room for another bit,\r\n             then add the next bit on the stream. */\r\n            result = ((result|0) << 1) | (((this.byte|0) >> (8 - (++this.bitpos))) & 0x01);\r\n            if ((this.bitpos|0)>=8) {\r\n                this.byte = this.src.getUint8(++this.bytepos);\r\n                this.bitpos &= 0x7;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n    skipBits(length) {\r\n        this.bitpos += (length|0) & 0x7; // %8\r\n        this.bytepos += (length|0) >>> 3;  // *8\r\n        if (this.bitpos > 7) {\r\n            this.bitpos &= 0x7;\r\n            ++this.bytepos;\r\n        }\r\n\r\n        if (!this.finished()) {\r\n            this.byte = this.src.getUint8(this.bytepos);\r\n            return 0;\r\n        } else {\r\n            return this.bytepos-this.src.byteLength-this.src.bitpos;\r\n        }\r\n    }\r\n    \r\n    finished() {\r\n        return this.bytepos >= this.src.byteLength;\r\n    }\r\n}","import {appendByteArray} from '../util/binary.js';\r\n\r\nexport class NALU {\r\n\r\n    static get NDR() {return 1;}\r\n    static get SLICE_PART_A() {return 2;}\r\n    static get SLICE_PART_B() {return 3;}\r\n    static get SLICE_PART_C() {return 4;}\r\n    static get IDR() {return 5;}\r\n    static get SEI() {return 6;}\r\n    static get SPS() {return 7;}\r\n    static get PPS() {return 8;}\r\n    static get DELIMITER() {return 9;}\r\n    static get EOSEQ() {return 10;}\r\n    static get EOSTR() {return 11;}\r\n    static get FILTER() {return 12;}\r\n    static get STAP_A() {return 24;}\r\n    static get STAP_B() {return 25;}\r\n    static get FU_A() {return 28;}\r\n    static get FU_B() {return 29;}\r\n\r\n    static get TYPES() {return {\r\n        [NALU.IDR]: 'IDR',\r\n        [NALU.SEI]: 'SEI',\r\n        [NALU.SPS]: 'SPS',\r\n        [NALU.PPS]: 'PPS',\r\n        [NALU.NDR]: 'NDR'\r\n    }};\r\n\r\n    static type(nalu) {\r\n        if (nalu.ntype in NALU.TYPES) {\r\n            return NALU.TYPES[nalu.ntype];\r\n        } else {\r\n            return 'UNKNOWN';\r\n        }\r\n    }\r\n\r\n    constructor(ntype, nri, data, dts, pts) {\r\n\r\n        this.data = data;\r\n        this.ntype = ntype;\r\n        this.nri = nri;\r\n        this.dts = dts;\r\n        this.pts = pts ? pts : this.dts;\r\n        this.sliceType = null;\r\n    }\r\n\r\n    appendData(idata) {\r\n        this.data = appendByteArray(this.data, idata);\r\n    }\r\n\r\n    toString() {\r\n        return `${NALU.type(this)}(${this.data.byteLength}): NRI: ${this.getNri()}, PTS: ${this.pts}, DTS: ${this.dts}`;\r\n    }\r\n\r\n    getNri() {\r\n        return this.nri >> 5;\r\n    }\r\n\r\n    type() {\r\n        return this.ntype;\r\n    }\r\n\r\n    isKeyframe() {\r\n        return this.ntype === NALU.IDR || this.sliceType === 7;\r\n    }\r\n\r\n    getSize() {\r\n        return 4 + 1 + this.data.byteLength;\r\n    }\r\n\r\n    getData() {\r\n        let header = new Uint8Array(5 + this.data.byteLength);\r\n        let view = new DataView(header.buffer);\r\n        view.setUint32(0, this.data.byteLength + 1);\r\n        view.setUint8(4, (0x0 & 0x80) | (this.nri & 0x60) | (this.ntype & 0x1F));\r\n        header.set(this.data, 5);\r\n        return header;\r\n    }\r\n}\r\n","import {ExpGolomb} from '../util/exp-golomb.js';\r\nimport {NALU} from '../elementary/NALU.js';\r\n\r\nexport class H264Parser {\r\n\r\n    constructor(remuxer) {\r\n        this.remuxer = remuxer;\r\n        this.track = remuxer.mp4track;\r\n        this.firstFound = false;\r\n    }\r\n\r\n    msToScaled(timestamp) {\r\n        return (timestamp - this.remuxer.timeOffset) * this.remuxer.scaleFactor;\r\n    }\r\n\r\n    parseSPS(sps) {\r\n        var config = H264Parser.readSPS(new Uint8Array(sps));\r\n\r\n        this.track.width = config.width;\r\n        this.track.height = config.height;\r\n        this.track.sps = [new Uint8Array(sps)];\r\n        // this.track.timescale = this.remuxer.timescale;\r\n        // this.track.duration = this.remuxer.timescale; // TODO: extract duration for non-live client\r\n        this.track.codec = 'avc1.';\r\n\r\n        let codecarray = new DataView(sps.buffer, sps.byteOffset+1, 4);\r\n        for (let i = 0; i < 3; ++i) {\r\n            var h = codecarray.getUint8(i).toString(16);\r\n            if (h.length < 2) {\r\n                h = '0' + h;\r\n            }\r\n            this.track.codec  += h;\r\n        }\r\n    }\r\n\r\n    parsePPS(pps) {\r\n        this.track.pps = [new Uint8Array(pps)];\r\n    }\r\n\r\n    parseNAL(unit) {\r\n        if (!unit) return false;\r\n        \r\n        let push = null;\r\n        // console.log(unit.toString());\r\n        switch (unit.type()) {\r\n            case NALU.NDR:\r\n            case NALU.IDR:\r\n                unit.sliceType = H264Parser.parceSliceHeader(unit.data);\r\n                if (unit.isKeyframe() && !this.firstFound)  {\r\n                    this.firstFound = true;\r\n                }\r\n                if (this.firstFound) {\r\n                    push = true;\r\n                } else {\r\n                    push = false;\r\n                }\r\n                break;\r\n            case NALU.PPS:\r\n                push = false;\r\n                if (!this.track.pps) {\r\n                    this.parsePPS(unit.getData().subarray(4));\r\n                    if (!this.remuxer.readyToDecode && this.track.pps && this.track.sps) {\r\n                        this.remuxer.readyToDecode = true;\r\n                    }\r\n                }\r\n                break;\r\n            case NALU.SPS:\r\n                push = false;\r\n                if(!this.track.sps) {\r\n                    this.parseSPS(unit.getData().subarray(4));\r\n                    if (!this.remuxer.readyToDecode && this.track.pps && this.track.sps) {\r\n                        this.remuxer.readyToDecode = true;\r\n                    }\r\n                }\r\n                break;\r\n            case NALU.SEI:\r\n                push = false;\r\n                let data = new DataView(unit.data.buffer, unit.data.byteOffset, unit.data.byteLength);\r\n                let byte_idx = 0;\r\n                let pay_type = data.getUint8(byte_idx);\r\n                ++byte_idx;\r\n                let pay_size = 0;\r\n                let sz = data.getUint8(byte_idx);\r\n                ++byte_idx;\r\n                while (sz === 255) {\r\n                    pay_size+=sz;\r\n                    sz = data.getUint8(byte_idx);\r\n                    ++byte_idx;\r\n                }\r\n                pay_size+=sz;\r\n\r\n                let uuid = unit.data.subarray(byte_idx, byte_idx+16);\r\n                byte_idx+=16;\r\n                console.log(`PT: ${pay_type}, PS: ${pay_size}, UUID: ${Array.from(uuid).map(function(i) {\r\n                    return ('0' + i.toString(16)).slice(-2);\r\n                }).join('')}`);\r\n                // debugger;\r\n                break;\r\n            case NALU.EOSEQ:\r\n            case NALU.EOSTR:\r\n                push = false;\r\n            default:\r\n        }\r\n        if (push === null && unit.getNri() > 0 ) {\r\n            push=true;\r\n        }\r\n        return push;\r\n    }\r\n\r\n    static parceSliceHeader(data) {\r\n        let decoder = new ExpGolomb(data);\r\n        let first_mb = decoder.readUEG();\r\n        let slice_type = decoder.readUEG();\r\n        let ppsid = decoder.readUEG();\r\n        let frame_num = decoder.readUByte();\r\n        // console.log(`first_mb: ${first_mb}, slice_type: ${slice_type}, ppsid: ${ppsid}, frame_num: ${frame_num}`);\r\n        return slice_type;\r\n    }\r\n\r\n    /**\r\n     * Advance the ExpGolomb decoder past a scaling list. The scaling\r\n     * list is optionally transmitted as part of a sequence parameter\r\n     * set and is not relevant to transmuxing.\r\n     * @param decoder {ExpGolomb} exp golomb decoder\r\n     * @param count {number} the number of entries in this scaling list\r\n     * @see Recommendation ITU-T H.264, Section 7.3.2.1.1.1\r\n     */\r\n    static skipScalingList(decoder, count) {\r\n        let lastScale = 8,\r\n            nextScale = 8,\r\n            deltaScale;\r\n        for (let j = 0; j < count; j++) {\r\n            if (nextScale !== 0) {\r\n                deltaScale = decoder.readEG();\r\n                nextScale = (lastScale + deltaScale + 256) % 256;\r\n            }\r\n            lastScale = (nextScale === 0) ? lastScale : nextScale;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Read a sequence parameter set and return some interesting video\r\n     * properties. A sequence parameter set is the H264 metadata that\r\n     * describes the properties of upcoming video frames.\r\n     * @param data {Uint8Array} the bytes of a sequence parameter set\r\n     * @return {object} an object with configuration parsed from the\r\n     * sequence parameter set, including the dimensions of the\r\n     * associated video frames.\r\n     */\r\n    static readSPS(data) {\r\n        let decoder = new ExpGolomb(data);\r\n        let frameCropLeftOffset = 0,\r\n            frameCropRightOffset = 0,\r\n            frameCropTopOffset = 0,\r\n            frameCropBottomOffset = 0,\r\n            sarScale = 1,\r\n            profileIdc,profileCompat,levelIdc,\r\n            numRefFramesInPicOrderCntCycle, picWidthInMbsMinus1,\r\n            picHeightInMapUnitsMinus1,\r\n            frameMbsOnlyFlag,\r\n            scalingListCount;\r\n        decoder.readUByte();\r\n        profileIdc = decoder.readUByte(); // profile_idc\r\n        profileCompat = decoder.readBits(5); // constraint_set[0-4]_flag, u(5)\r\n        decoder.skipBits(3); // reserved_zero_3bits u(3),\r\n        levelIdc = decoder.readUByte(); //level_idc u(8)\r\n        decoder.skipUEG(); // seq_parameter_set_id\r\n        // some profiles have more optional data we don't need\r\n        if (profileIdc === 100 ||\r\n            profileIdc === 110 ||\r\n            profileIdc === 122 ||\r\n            profileIdc === 244 ||\r\n            profileIdc === 44  ||\r\n            profileIdc === 83  ||\r\n            profileIdc === 86  ||\r\n            profileIdc === 118 ||\r\n            profileIdc === 128) {\r\n            var chromaFormatIdc = decoder.readUEG();\r\n            if (chromaFormatIdc === 3) {\r\n                decoder.skipBits(1); // separate_colour_plane_flag\r\n            }\r\n            decoder.skipUEG(); // bit_depth_luma_minus8\r\n            decoder.skipUEG(); // bit_depth_chroma_minus8\r\n            decoder.skipBits(1); // qpprime_y_zero_transform_bypass_flag\r\n            if (decoder.readBoolean()) { // seq_scaling_matrix_present_flag\r\n                scalingListCount = (chromaFormatIdc !== 3) ? 8 : 12;\r\n                for (let i = 0; i < scalingListCount; ++i) {\r\n                    if (decoder.readBoolean()) { // seq_scaling_list_present_flag[ i ]\r\n                        if (i < 6) {\r\n                            H264Parser.skipScalingList(decoder, 16);\r\n                        } else {\r\n                            H264Parser.skipScalingList(decoder, 64);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        decoder.skipUEG(); // log2_max_frame_num_minus4\r\n        var picOrderCntType = decoder.readUEG();\r\n        if (picOrderCntType === 0) {\r\n            decoder.readUEG(); //log2_max_pic_order_cnt_lsb_minus4\r\n        } else if (picOrderCntType === 1) {\r\n            decoder.skipBits(1); // delta_pic_order_always_zero_flag\r\n            decoder.skipEG(); // offset_for_non_ref_pic\r\n            decoder.skipEG(); // offset_for_top_to_bottom_field\r\n            numRefFramesInPicOrderCntCycle = decoder.readUEG();\r\n            for(let i = 0; i < numRefFramesInPicOrderCntCycle; ++i) {\r\n                decoder.skipEG(); // offset_for_ref_frame[ i ]\r\n            }\r\n        }\r\n        decoder.skipUEG(); // max_num_ref_frames\r\n        decoder.skipBits(1); // gaps_in_frame_num_value_allowed_flag\r\n        picWidthInMbsMinus1 = decoder.readUEG();\r\n        picHeightInMapUnitsMinus1 = decoder.readUEG();\r\n        frameMbsOnlyFlag = decoder.readBits(1);\r\n        if (frameMbsOnlyFlag === 0) {\r\n            decoder.skipBits(1); // mb_adaptive_frame_field_flag\r\n        }\r\n        decoder.skipBits(1); // direct_8x8_inference_flag\r\n        if (decoder.readBoolean()) { // frame_cropping_flag\r\n            frameCropLeftOffset = decoder.readUEG();\r\n            frameCropRightOffset = decoder.readUEG();\r\n            frameCropTopOffset = decoder.readUEG();\r\n            frameCropBottomOffset = decoder.readUEG();\r\n        }\r\n        if (decoder.readBoolean()) {\r\n            // vui_parameters_present_flag\r\n            if (decoder.readBoolean()) {\r\n                // aspect_ratio_info_present_flag\r\n                let sarRatio;\r\n                const aspectRatioIdc = decoder.readUByte();\r\n                switch (aspectRatioIdc) {\r\n                    case 1: sarRatio = [1,1]; break;\r\n                    case 2: sarRatio = [12,11]; break;\r\n                    case 3: sarRatio = [10,11]; break;\r\n                    case 4: sarRatio = [16,11]; break;\r\n                    case 5: sarRatio = [40,33]; break;\r\n                    case 6: sarRatio = [24,11]; break;\r\n                    case 7: sarRatio = [20,11]; break;\r\n                    case 8: sarRatio = [32,11]; break;\r\n                    case 9: sarRatio = [80,33]; break;\r\n                    case 10: sarRatio = [18,11]; break;\r\n                    case 11: sarRatio = [15,11]; break;\r\n                    case 12: sarRatio = [64,33]; break;\r\n                    case 13: sarRatio = [160,99]; break;\r\n                    case 14: sarRatio = [4,3]; break;\r\n                    case 15: sarRatio = [3,2]; break;\r\n                    case 16: sarRatio = [2,1]; break;\r\n                    case 255: {\r\n                        sarRatio = [decoder.readUByte() << 8 | decoder.readUByte(), decoder.readUByte() << 8 | decoder.readUByte()];\r\n                        break;\r\n                    }\r\n                }\r\n                if (sarRatio) {\r\n                    sarScale = sarRatio[0] / sarRatio[1];\r\n                }\r\n            }\r\n            if (decoder.readBoolean()) {decoder.skipBits(1);}\r\n\r\n            if (decoder.readBoolean()) {\r\n                decoder.skipBits(4);\r\n                if (decoder.readBoolean()) {\r\n                    decoder.skipBits(24);\r\n                }\r\n            }\r\n            if (decoder.readBoolean()) {\r\n                decoder.skipUEG();\r\n                decoder.skipUEG();\r\n            }\r\n            if (decoder.readBoolean()) {\r\n                let unitsInTick = decoder.readUInt();\r\n                let timeScale = decoder.readUInt();\r\n                let fixedFrameRate = decoder.readBoolean();\r\n                let frameDuration = timeScale/(2*unitsInTick);\r\n                console.log(`timescale: ${timeScale}; unitsInTick: ${unitsInTick}; fixedFramerate: ${fixedFrameRate}; avgFrameDuration: ${frameDuration}`);\r\n            }\r\n        }\r\n        return {\r\n            width: Math.ceil((((picWidthInMbsMinus1 + 1) * 16) - frameCropLeftOffset * 2 - frameCropRightOffset * 2) * sarScale),\r\n            height: ((2 - frameMbsOnlyFlag) * (picHeightInMapUnitsMinus1 + 1) * 16) - ((frameMbsOnlyFlag? 2 : 4) * (frameCropTopOffset + frameCropBottomOffset))\r\n        };\r\n    }\r\n\r\n    static readSliceType(decoder) {\r\n        // skip NALu type\r\n        decoder.readUByte();\r\n        // discard first_mb_in_slice\r\n        decoder.readUEG();\r\n        // return slice_type\r\n        return decoder.readUEG();\r\n    }\r\n}","import {getTagged} from '../../deps/bp_logger.js';\r\nimport {H264Parser} from '../parsers/h264.js';\r\nimport {BaseRemuxer} from './base.js';\r\n\r\nconst Log = getTagged(\"remuxer:h264\"); \r\n// TODO: asm.js\r\nexport class H264Remuxer extends BaseRemuxer {\r\n\r\n    constructor(timescale, scaleFactor=1, params={}) {\r\n        super(timescale, scaleFactor);\r\n\r\n        this.nextDts = undefined;\r\n        this.readyToDecode = false;\r\n        this.initialized = false;\r\n\r\n        this.firstDTS=0;\r\n        this.firstPTS=0;\r\n        this.lastDTS=undefined;\r\n        this.lastSampleDuration = 0;\r\n        this.lastDurations = [];\r\n        // this.timescale = 90000;\r\n        this.tsAlign = Math.round(this.timescale/60);\r\n\r\n        this.mp4track={\r\n            id:BaseRemuxer.getTrackID(),\r\n            type: 'video',\r\n            len:0,\r\n            fragmented:true,\r\n            sps:'',\r\n            pps:'',\r\n            width:0,\r\n            height:0,\r\n            timescale: timescale,\r\n            duration: timescale,\r\n            samples: []\r\n        };\r\n        this.samples = [];\r\n        this.lastGopDTS = -99999999999999;\r\n        this.gop=[];\r\n        this.firstUnit = true;\r\n\r\n        this.h264 = new H264Parser(this);\r\n\r\n        if (params.sps) {\r\n            let arr = new Uint8Array(params.sps);\r\n            if ((arr[0] & 0x1f) === 7) {\r\n                this.setSPS(arr);\r\n            } else {\r\n                Log.warn(\"bad SPS in SDP\")\r\n            }\r\n        }\r\n        if (params.pps) {\r\n            let arr = new Uint8Array(params.pps);\r\n            if ((arr[0] & 0x1f) === 8) {\r\n                this.setPPS(arr);\r\n            } else {\r\n                Log.warn(\"bad PPS in SDP\")\r\n            }\r\n        }\r\n\r\n        if (this.mp4track.pps && this.mp4track.sps) {\r\n            this.readyToDecode = true;\r\n        }\r\n    }\r\n\r\n    _scaled(timestamp) {\r\n        return timestamp >>> this.scaleFactor;\r\n    }\r\n\r\n    _unscaled(timestamp) {\r\n        return timestamp << this.scaleFactor;\r\n    }\r\n\r\n    setSPS(sps) {\r\n        this.h264.parseSPS(sps);\r\n    }\r\n\r\n    setPPS(pps) {\r\n        this.h264.parsePPS(pps);\r\n    }\r\n\r\n    remux(nalu) {\r\n        if (this.lastGopDTS < nalu.dts) {\r\n            this.gop.sort(BaseRemuxer.dtsSortFunc);\r\n\r\n            if (this.gop.length > 1) {\r\n                // Aggregate multi-slices which belong to one frame\r\n                const groupedGop = BaseRemuxer.groupByDts(this.gop);\r\n                this.gop = Object.values(groupedGop).map(group => {\r\n                    return group.reduce((preUnit, curUnit) => {\r\n                        const naluData = curUnit.getData();\r\n                        naluData.set(new Uint8Array([0x0, 0x0, 0x0, 0x1]));\r\n                        preUnit.appendData(naluData);\r\n                        return preUnit;\r\n                    });\r\n                });\r\n            }\r\n\r\n            for (let unit of this.gop) {\r\n                // if (this.firstUnit) {\r\n                //     unit.ntype = 5;//NALU.IDR;\r\n                //     this.firstUnit = false;\r\n                // }\r\n                if (super.remux.call(this, unit)) {\r\n                    this.mp4track.len += unit.getSize();\r\n                }\r\n            }\r\n            this.gop = [];\r\n            this.lastGopDTS = nalu.dts\r\n        }\r\n        if (this.h264.parseNAL(nalu)) {\r\n            this.gop.push(nalu);\r\n        }\r\n    }\r\n\r\n    getPayload() {\r\n        if (!this.getPayloadBase()) {\r\n            return null;\r\n        }\r\n\r\n        let payload = new Uint8Array(this.mp4track.len);\r\n        let offset = 0;\r\n        let samples=this.mp4track.samples;\r\n        let mp4Sample, lastDTS, pts, dts;\r\n\r\n\r\n        // Log.debug(this.samples.map((e)=>{\r\n        //     return Math.round((e.dts - this.initDTS));\r\n        // }));\r\n\r\n        // let minDuration = Number.MAX_SAFE_INTEGER;\r\n        while (this.samples.length) {\r\n            let sample = this.samples.shift();\r\n            if (sample === null) {\r\n                // discontinuity\r\n                this.nextDts = undefined;\r\n                break;\r\n            }\r\n\r\n            let unit = sample.unit;\r\n            \r\n            pts = sample.pts- this.initDTS; // /*Math.round(*/(sample.pts - this.initDTS)/*/this.tsAlign)*this.tsAlign*/;\r\n            dts = sample.dts - this.initDTS; ///*Math.round(*/(sample.dts - this.initDTS)/*/this.tsAlign)*this.tsAlign*/;\r\n            // ensure DTS is not bigger than PTS\r\n            dts = Math.min(pts,dts);\r\n            // if not first AVC sample of video track, normalize PTS/DTS with previous sample value\r\n            // and ensure that sample duration is positive\r\n            if (lastDTS !== undefined) {\r\n                let sampleDuration = this.scaled(dts - lastDTS);\r\n                // Log.debug(`Sample duration: ${sampleDuration}`);\r\n                if (sampleDuration < 0) {\r\n                    Log.log(`invalid AVC sample duration at PTS/DTS: ${pts}/${dts}|lastDTS: ${lastDTS}:${sampleDuration}`);\r\n                    this.mp4track.len -= unit.getSize();\r\n                    continue;\r\n                }\r\n                // minDuration = Math.min(sampleDuration, minDuration);\r\n                this.lastDurations.push(sampleDuration);\r\n                if (this.lastDurations.length > 100) {\r\n                    this.lastDurations.shift();\r\n                }\r\n                mp4Sample.duration = sampleDuration;\r\n            } else {\r\n                if (this.nextDts) {\r\n                    let delta = dts - this.nextDts;\r\n                    // if fragment are contiguous, or delta less than 600ms, ensure there is no overlap/hole between fragments\r\n                    if (/*contiguous ||*/ Math.abs(Math.round(BaseRemuxer.toMS(delta))) < 600) {\r\n\r\n                        if (delta) {\r\n                            // set DTS to next DTS\r\n                            // Log.debug(`Video/PTS/DTS adjusted: ${pts}->${Math.max(pts - delta, this.nextDts)}/${dts}->${this.nextDts},delta:${delta}`);\r\n                            dts = this.nextDts;\r\n                            // offset PTS as well, ensure that PTS is smaller or equal than new DTS\r\n                            pts = Math.max(pts - delta, dts);\r\n                        }\r\n                    } else {\r\n                        if (delta < 0) {\r\n                            Log.log(`skip frame from the past at DTS=${dts} with expected DTS=${this.nextDts}`);\r\n                            this.mp4track.len -= unit.getSize();\r\n                            continue;\r\n                        }\r\n                    }\r\n                }\r\n                // remember first DTS of our avcSamples, ensure value is positive\r\n                this.firstDTS = Math.max(0, dts);\r\n            }\r\n\r\n            mp4Sample = {\r\n                size: unit.getSize(),\r\n                duration: 0,\r\n                cts: this.scaled(pts - dts),\r\n                flags: {\r\n                    isLeading: 0,\r\n                    isDependedOn: 0,\r\n                    hasRedundancy: 0,\r\n                    degradPrio: 0\r\n                }\r\n            };\r\n            let flags = mp4Sample.flags;\r\n            if (sample.unit.isKeyframe() === true) {\r\n                // the current sample is a key frame\r\n                flags.dependsOn = 2;\r\n                flags.isNonSync = 0;\r\n            } else {\r\n                flags.dependsOn = 1;\r\n                flags.isNonSync = 1;\r\n            }\r\n\r\n            payload.set(unit.getData(), offset);\r\n            offset += unit.getSize();\r\n\r\n            samples.push(mp4Sample);\r\n            lastDTS = dts;\r\n        }\r\n\r\n        if (!samples.length) return null;\r\n\r\n        let avgDuration = this.lastDurations.reduce(function(a, b) { return (a|0) + (b|0); }, 0) / (this.lastDurations.length||1)|0;\r\n        if (samples.length >= 2) {\r\n            this.lastSampleDuration = avgDuration;\r\n            mp4Sample.duration = avgDuration;\r\n        } else {\r\n            mp4Sample.duration = this.lastSampleDuration;\r\n        }\r\n\r\n        if(samples.length && (!this.nextDts || navigator.userAgent.toLowerCase().indexOf('chrome') > -1)) {\r\n            let flags = samples[0].flags;\r\n            // chrome workaround, mark first sample as being a Random Access Point to avoid sourcebuffer append issue\r\n            // https://code.google.com/p/chromium/issues/detail?id=229412\r\n            flags.dependsOn = 2;\r\n            flags.isNonSync = 0;\r\n        }\r\n\r\n        // next AVC sample DTS should be equal to last sample DTS + last sample duration\r\n        this.nextDts = dts + this.unscaled(this.lastSampleDuration);\r\n        // Log.debug(`next dts: ${this.nextDts}, last duration: ${this.lastSampleDuration}, last dts: ${dts}`);\r\n\r\n        return new Uint8Array(payload.buffer, 0, this.mp4track.len);\r\n    }\r\n}\r\n","export class StreamType {\r\n    static get VIDEO() {return 1;}\r\n    static get AUDIO() {return 2;}\r\n\r\n    static get map() {return {\r\n        [StreamType.VIDEO]: 'video',\r\n        [StreamType.AUDIO]: 'audio'\r\n    }};\r\n}\r\n\r\nexport class PayloadType {\r\n    static get H264() {return 1;}\r\n    static get AAC() {return 2;}\r\n\r\n    static get map() {return {\r\n        [PayloadType.H264]: 'video',\r\n        [PayloadType.AAC]: 'audio'\r\n    }};\r\n\r\n    static get string_map() {return  {\r\n        H264: PayloadType.H264,\r\n        AAC: PayloadType.AAC,\r\n        'MP4A-LATM': PayloadType.AAC,\r\n        'MPEG4-GENERIC': PayloadType.AAC\r\n    }}\r\n}","import {EventEmitter, EventSourceWrapper} from '../../deps/bp_event.js';\r\nimport {getTagged} from \"../../deps/bp_logger.js\";\r\nimport {MP4} from '../iso-bmff/mp4-generator.js';\r\nimport {AACRemuxer} from './aac.js';\r\nimport {H264Remuxer} from './h264.js';\r\nimport {MSE} from '../presentation/mse.js';\r\nimport {PayloadType} from \"../defs.js\";\r\n\r\nconst LOG_TAG = \"remuxer\";\r\nconst Log = getTagged(LOG_TAG);\r\n\r\nexport class Remuxer {\r\n    static get TrackConverters() {return {\r\n        [PayloadType.H264]: H264Remuxer,\r\n        [PayloadType.AAC]:  AACRemuxer\r\n    }};\r\n\r\n    static get TrackScaleFactor() {return {\r\n        [PayloadType.H264]: 1,//4,\r\n        [PayloadType.AAC]:  0\r\n    }};\r\n\r\n    static get TrackTimescale() {return {\r\n        [PayloadType.H264]: 90000,//22500,\r\n        [PayloadType.AAC]:  0\r\n    }};\r\n\r\n    constructor(mediaElement) {\r\n        this.mse = new MSE([mediaElement]);\r\n        this.eventSource = new EventEmitter();\r\n        this.mseEventSource = new EventSourceWrapper(this.mse.eventSource);\r\n        this.mse_ready = true;\r\n\r\n        this.reset();\r\n\r\n        this.errorListener = this.mseClose.bind(this);\r\n        this.closeListener = this.mseClose.bind(this);\r\n        this.errorDecodeListener = this.mseErrorDecode.bind(this);\r\n\r\n        this.eventSource.addEventListener('ready', this.init.bind(this));\r\n    }\r\n\r\n    initMSEHandlers() {\r\n        this.mseEventSource.on('error', this.errorListener);\r\n        this.mseEventSource.on('sourceclosed', this.closeListener);\r\n        this.mseEventSource.on('errordecode', this.errorDecodeListener);\r\n    }\r\n\r\n    async reset() {\r\n        this.tracks = {};\r\n        this.initialized = false;\r\n        this.initSegments = {};\r\n        this.codecs = [];\r\n        this.streams = {};\r\n        this.enabled = false;\r\n        await this.mse.clear();\r\n        this.initMSEHandlers();\r\n    }\r\n\r\n    destroy() {\r\n        this.mseEventSource.destroy();\r\n        this.mse.destroy();\r\n        this.mse = null;\r\n\r\n        this.detachClient();\r\n\r\n        this.eventSource.destroy();\r\n    }\r\n\r\n    onTracks(tracks) {\r\n        Log.debug(`ontracks: `, tracks.detail);\r\n        // store available track types\r\n        for (let track of tracks.detail) {\r\n            this.tracks[track.type] = new Remuxer.TrackConverters[track.type](Remuxer.TrackTimescale[track.type], Remuxer.TrackScaleFactor[track.type], track.params);\r\n            if (track.offset) {\r\n                this.tracks[track.type].timeOffset = track.offset;\r\n            }\r\n            if (track.duration) {\r\n                this.tracks[track.type].mp4track.duration = track.duration*(this.tracks[track.type].timescale || Remuxer.TrackTimescale[track.type]);\r\n                this.tracks[track.type].duration = track.duration;\r\n            } else {\r\n                this.tracks[track.type].duration = 1;\r\n            }\r\n\r\n            // this.tracks[track.type].duration\r\n        }\r\n        this.mse.setLive(!this.client.seekable);\r\n    }\r\n\r\n    setTimeOffset(timeOffset, track) {\r\n        if (this.tracks[track.type]) {\r\n            this.tracks[track.type].timeOffset = timeOffset;///this.tracks[track.type].scaleFactor;\r\n        }\r\n    }\r\n\r\n    init() {\r\n        let tracks = [];\r\n        this.codecs = [];\r\n        let initmse = [];\r\n        let initPts = Infinity;\r\n        let initDts = Infinity;\r\n        for (let track_type in this.tracks) {\r\n            let track = this.tracks[track_type];\r\n            if (!MSE.isSupported([track.mp4track.codec])) {\r\n                throw new Error(`${track.mp4track.type} codec ${track.mp4track.codec} is not supported`);\r\n            }\r\n            tracks.push(track.mp4track);\r\n            this.codecs.push(track.mp4track.codec);\r\n            track.init(initPts, initDts/*, false*/);\r\n            // initPts = Math.min(track.initPTS, initPts);\r\n            // initDts = Math.min(track.initDTS, initDts);\r\n        }\r\n\r\n        for (let track_type in this.tracks) {\r\n            let track = this.tracks[track_type];\r\n            //track.init(initPts, initDts);\r\n            this.initSegments[track_type] = MP4.initSegment([track.mp4track], track.duration*track.timescale, track.timescale);\r\n            initmse.push(this.initMSE(track_type, track.mp4track.codec));\r\n        }\r\n        this.initialized = true;\r\n        return Promise.all(initmse).then(()=>{\r\n            //this.mse.play();\r\n            this.enabled = true;\r\n        });\r\n        \r\n    }\r\n\r\n    initMSE(track_type, codec) {\r\n        if (MSE.isSupported(this.codecs)) {\r\n            return this.mse.setCodec(track_type, `${PayloadType.map[track_type]}/mp4; codecs=\"${codec}\"`).then(()=>{\r\n                this.mse.feed(track_type, this.initSegments[track_type]);\r\n                // this.mse.play();\r\n                // this.enabled = true;\r\n            });\r\n        } else {\r\n            throw new Error('Codecs are not supported');\r\n        }\r\n    }\r\n\r\n    mseClose() {\r\n        // this.mse.clear();\r\n        this.client.stop();\r\n        this.eventSource.dispatchEvent('stopped');\r\n    }\r\n\r\n    mseErrorDecode() {\r\n        if(this.tracks[2]) {\r\n            console.warn(this.tracks[2].mp4track.type);\r\n            this.mse.buffers[2].destroy();\r\n            delete this.tracks[2];\r\n        }\r\n    }\r\n\r\n    flush() {\r\n        this.onSamples();\r\n\r\n        if (!this.initialized) {\r\n            // Log.debug(`Initialize...`);\r\n            if (Object.keys(this.tracks).length) {\r\n                for (let track_type in this.tracks) {\r\n                    if (!this.tracks[track_type].readyToDecode || !this.tracks[track_type].samples.length) return;\r\n                    Log.debug(`Init MSE for track ${this.tracks[track_type].mp4track.type}`);\r\n                }\r\n                this.eventSource.dispatchEvent('ready');\r\n            }\r\n        } else {\r\n            for (let track_type in this.tracks) {\r\n                let track = this.tracks[track_type];\r\n                let pay = track.getPayload();\r\n                if (pay && pay.byteLength) {\r\n                    this.mse.feed(track_type, [MP4.moof(track.seq, track.scaled(track.firstDTS), track.mp4track), MP4.mdat(pay)]);\r\n                    track.flush();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onSamples(ev) {\r\n        // TODO: check format\r\n        // let data = ev.detail;\r\n        // if (this.tracks[data.pay] && this.client.sampleQueues[data.pay].length) {\r\n            // console.log(`video ${data.units[0].dts}`);\r\n        for (let qidx in this.client.sampleQueues) {\r\n            let queue = this.client.sampleQueues[qidx];\r\n            while (queue.length) {\r\n                let units = queue.shift();\r\n                if(units){\r\n                    for (let chunk of units) {\r\n                        if(this.tracks[qidx]) {\r\n                            this.tracks[qidx].remux(chunk);\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (!this.initialized) {\r\n                        delete this.tracks[qidx];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // }\r\n    }\r\n\r\n    onAudioConfig(ev) {\r\n        if (this.tracks[ev.detail.pay]) {\r\n            this.tracks[ev.detail.pay].setConfig(ev.detail.config);\r\n        }\r\n    }\r\n\r\n    attachClient(client) {\r\n        this.detachClient();\r\n        this.client = client;\r\n        this.clientEventSource = new EventSourceWrapper(this.client.eventSource);\r\n        this.clientEventSource.on('samples', this.samplesListener);\r\n        this.clientEventSource.on('audio_config', this.audioConfigListener);\r\n        this.clientEventSource.on('tracks', this.onTracks.bind(this));\r\n        this.clientEventSource.on('flush', this.flush.bind(this));\r\n        this.clientEventSource.on('clear', ()=>{\r\n            this.reset();\r\n            this.mse.clear().then(()=>{\r\n                //this.mse.play();\r\n                this.initMSEHandlers();\r\n            });\r\n        });\r\n    }\r\n\r\n    detachClient() {\r\n        if (this.client) {\r\n            this.clientEventSource.destroy();\r\n            // this.client.eventSource.removeEventListener('samples', this.onSamples.bind(this));\r\n            // this.client.eventSource.removeEventListener('audio_config', this.onAudioConfig.bind(this));\r\n            // // TODO: clear other listeners\r\n            // this.client.eventSource.removeEventListener('clear', this._clearListener);\r\n            // this.client.eventSource.removeEventListener('tracks', this._tracksListener);\r\n            // this.client.eventSource.removeEventListener('flush', this._flushListener);\r\n            this.client = null;\r\n        }\r\n    }\r\n}","class State {\n    constructor(name, stateMachine) {\n        this.stateMachine = stateMachine;\n        this.transitions = new Set();\n        this.name = name;\n    }\n\n\n    activate() {\n        return Promise.resolve(null);\n    }\n\n    finishTransition() {}\n\n    failHandler() {}\n\n    deactivate() {\n        return Promise.resolve(null);\n    }\n}\n\nexport class StateMachine {\n    constructor() {\n        this.storage = {};\n        this.currentState = null;\n        this.states = new Map();\n    }\n\n    addState(name, {activate, finishTransition, deactivate}) {\n        let state = new State(name, this);\n        if (activate) state.activate = activate;\n        if (finishTransition) state.finishTransition = finishTransition;\n        if (deactivate) state.deactivate = deactivate;\n        this.states.set(name, state);\n        return this;\n    }\n\n    addTransition(fromName, toName){\n        if (!this.states.has(fromName)) {\n            throw ReferenceError(`No such state: ${fromName} while connecting to ${toName}`);\n        }\n        if (!this.states.has(toName)) {\n            throw ReferenceError(`No such state: ${toName} while connecting from ${fromName}`);\n        }\n        this.states.get(fromName).transitions.add(toName);\n        return this;\n    }\n\n    _promisify(res) {\n        let promise;\n        try {\n            promise = res;\n            if (!promise.then) {\n                promise = Promise.resolve(promise);\n            }\n        } catch (e) {\n            promise = Promise.reject(e);\n        }\n        return promise;\n    }\n\n    transitionTo(stateName) {\n        if (this.currentState == null) {\n            let state = this.states.get(stateName);\n            return this._promisify(state.activate.call(this))\n                .then((data)=> {\n                    this.currentState = state;\n                    return data;\n                }).then(state.finishTransition.bind(this)).catch((e)=>{\n                    state.failHandler();\n                    throw e;\n                });\n        }\n        if (this.currentState.name == stateName) return Promise.resolve();\n        if (this.currentState.transitions.has(stateName)) {\n            let state = this.states.get(stateName);\n            return this._promisify(state.deactivate.call(this))\n                .then(state.activate.bind(this)).then((data)=> {\n                    this.currentState = state;\n                    return data;\n                }).then(state.finishTransition.bind(this)).catch((e)=>{\n                    state.failHandler();\n                    throw e;\n                });\n        } else {\n            return Promise.reject(`No such transition: ${this.currentState.name} to ${stateName}`);\n        }\n    }\n\n}\n","import {getTagged} from '../../deps/bp_logger';\r\nimport {PayloadType} from '../defs.js';\r\n\r\nconst Log = getTagged(\"parser:sdp\");\r\n\r\nexport class SDPParser {\r\n    constructor() {\r\n        this.version = -1;\r\n        this.origin = null;\r\n        this.sessionName = null;\r\n        this.timing = null;\r\n        this.sessionBlock = {};\r\n        this.media = {};\r\n        this.tracks = {};\r\n        this.mediaMap = {};\r\n    }\r\n\r\n    parse(content) {\r\n        // Log.debug(content);\r\n        return new Promise((resolve, reject) => {\r\n            var dataString = content;\r\n            var success = true;\r\n            var currentMediaBlock = this.sessionBlock;\r\n\r\n            // TODO: multiple audio/video tracks\r\n\r\n            for (let line of dataString.split(\"\\n\")) {\r\n                line = line.replace(/\\r/, '');\r\n                if (0 === line.length) {\r\n                    /* Empty row (last row perhaps?), skip to next */\r\n                    continue;\r\n                }\r\n\r\n                switch (line.charAt(0)) {\r\n                    case 'v':\r\n                        if (-1 !== this.version) {\r\n                            Log.log('Version present multiple times in SDP');\r\n                            reject();\r\n                            return false;\r\n                        }\r\n                        success = success && this._parseVersion(line);\r\n                        break;\r\n\r\n                    case 'o':\r\n                        if (null !== this.origin) {\r\n                            Log.log('Origin present multiple times in SDP');\r\n                            reject();\r\n                            return false;\r\n                        }\r\n                        success = success && this._parseOrigin(line);\r\n                        break;\r\n\r\n                    case 's':\r\n                        if (null !== this.sessionName) {\r\n                            Log.log('Session Name present multiple times in SDP');\r\n                            reject();\r\n                            return false;\r\n                        }\r\n                        success = success && this._parseSessionName(line);\r\n                        break;\r\n\r\n                    case 't':\r\n                        if (null !== this.timing) {\r\n                            Log.log('Timing present multiple times in SDP');\r\n                            reject();\r\n                            return false;\r\n                        }\r\n                        success = success && this._parseTiming(line);\r\n                        break;\r\n\r\n                    case 'm':\r\n                        if (null !== currentMediaBlock && this.sessionBlock !== currentMediaBlock) {\r\n                            /* Complete previous block and store it */\r\n                            this.media[currentMediaBlock.type] = currentMediaBlock;\r\n                        }\r\n\r\n                        /* A wild media block appears */\r\n                        currentMediaBlock = {};\r\n                        currentMediaBlock.rtpmap = {};\r\n                        this._parseMediaDescription(line, currentMediaBlock);\r\n                        break;\r\n\r\n                    case 'a':\r\n                        SDPParser._parseAttribute(line, currentMediaBlock);\r\n                        break;\r\n\r\n                    default:\r\n                        Log.log('Ignored unknown SDP directive: ' + line);\r\n                        break;\r\n                }\r\n\r\n                if (!success) {\r\n                    reject();\r\n                    return;\r\n                }\r\n            }\r\n\r\n            this.media[currentMediaBlock.type] = currentMediaBlock;\r\n\r\n            success ? resolve() : reject();\r\n        });\r\n    }\r\n\r\n    _parseVersion(line) {\r\n        let matches = line.match(/^v=([0-9]+)$/);\r\n        if (!matches || !matches.length) {\r\n            Log.log('\\'v=\\' (Version) formatted incorrectly: ' + line);\r\n            return false;\r\n        }\r\n\r\n        this.version = matches[1];\r\n        if (0 != this.version) {\r\n            Log.log('Unsupported SDP version:' + this.version);\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    _parseOrigin(line) {\r\n        let matches = line.match(/^o=([^ ]+) (-?[0-9]+) (-?[0-9]+) (IN) (IP4|IP6) ([^ ]+)$/);\r\n        if (!matches || !matches.length) {\r\n            Log.log('\\'o=\\' (Origin) formatted incorrectly: ' + line);\r\n            return false;\r\n        }\r\n\r\n        this.origin = {};\r\n        this.origin.username = matches[1];\r\n        this.origin.sessionid = matches[2];\r\n        this.origin.sessionversion = matches[3];\r\n        this.origin.nettype = matches[4];\r\n        this.origin.addresstype = matches[5];\r\n        this.origin.unicastaddress = matches[6];\r\n\r\n        return true;\r\n    }\r\n\r\n    _parseSessionName(line) {\r\n        let matches = line.match(/^s=([^\\r\\n]+)$/);\r\n        if (!matches || !matches.length) {\r\n            Log.log('\\'s=\\' (Session Name) formatted incorrectly: ' + line);\r\n            return false;\r\n        }\r\n\r\n        this.sessionName = matches[1];\r\n\r\n        return true;\r\n    }\r\n\r\n    _parseTiming(line) {\r\n        let matches = line.match(/^t=([0-9]+) ([0-9]+)$/);\r\n        if (!matches || !matches.length) {\r\n            Log.log('\\'t=\\' (Timing) formatted incorrectly: ' + line);\r\n            return false;\r\n        }\r\n\r\n        this.timing = {};\r\n        this.timing.start = matches[1];\r\n        this.timing.stop = matches[2];\r\n\r\n        return true;\r\n    }\r\n\r\n    _parseMediaDescription(line, media) {\r\n        let matches = line.match(/^m=([^ ]+) ([^ ]+) ([^ ]+)[ ]/);\r\n        if (!matches || !matches.length) {\r\n            Log.log('\\'m=\\' (Media) formatted incorrectly: ' + line);\r\n            return false;\r\n        }\r\n\r\n        media.type = matches[1];\r\n        media.port = matches[2];\r\n        media.proto = matches[3];\r\n        media.fmt = line.substr(matches[0].length).split(' ').map(function (fmt, index, array) {\r\n            return parseInt(fmt);\r\n        });\r\n\r\n        for (let fmt of media.fmt) {\r\n            this.mediaMap[fmt] = media;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    static _parseAttribute(line, media) {\r\n        if (null === media) {\r\n            /* Not in a media block, can't be bothered parsing attributes for session */\r\n            return true;\r\n        }\r\n\r\n        var matches;\r\n        /* Used for some cases of below switch-case */\r\n        var separator = line.indexOf(':');\r\n        var attribute = line.substr(0, (-1 === separator) ? 0x7FFFFFFF : separator);\r\n        /* 0x7FF.. is default */\r\n\r\n        switch (attribute) {\r\n            case 'a=recvonly':\r\n            case 'a=sendrecv':\r\n            case 'a=sendonly':\r\n            case 'a=inactive':\r\n                media.mode = line.substr('a='.length);\r\n                break;\r\n            case 'a=range':\r\n                matches = line.match(/^a=range:\\s*([a-zA-Z-]+)=([0-9.]+|now)\\s*-\\s*([0-9.]*)$/);\r\n                media.range = [Number(matches[2] == \"now\" ? -1 : matches[2]), Number(matches[3]), matches[1]];\r\n                break;\r\n            case 'a=control':\r\n                media.control = line.substr('a=control:'.length);\r\n                break;\r\n\r\n            case 'a=rtpmap':\r\n                matches = line.match(/^a=rtpmap:(\\d+) (.*)$/);\r\n                if (null === matches) {\r\n                    Log.log('Could not parse \\'rtpmap\\' of \\'a=\\'');\r\n                    return false;\r\n                }\r\n\r\n                var payload = parseInt(matches[1]);\r\n                media.rtpmap[payload] = {};\r\n\r\n                var attrs = matches[2].split('/');\r\n                media.rtpmap[payload].name = attrs[0].toUpperCase();\r\n                media.rtpmap[payload].clock = attrs[1];\r\n                if (undefined !== attrs[2]) {\r\n                    media.rtpmap[payload].encparams = attrs[2];\r\n                }\r\n                media.ptype = PayloadType.string_map[attrs[0].toUpperCase()];\r\n\r\n                break;\r\n\r\n            case 'a=fmtp':\r\n                matches = line.match(/^a=fmtp:(\\d+) (.*)$/);\r\n                if (0 === matches.length) {\r\n                    Log.log('Could not parse \\'fmtp\\'  of \\'a=\\'');\r\n                    return false;\r\n                }\r\n\r\n                media.fmtp = {};\r\n                var param;\r\n                for (param of matches[2].split(';')) {\r\n                    var idx = param.indexOf('=');\r\n                    media.fmtp[param.substr(0, idx).toLowerCase().trim()] = param.substr(idx + 1).trim();\r\n                }\r\n                break;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    getSessionBlock() {\r\n        return this.sessionBlock;\r\n    }\r\n\r\n    hasMedia(mediaType) {\r\n        return this.media[mediaType] != undefined;\r\n    }\r\n\r\n    getMediaBlock(mediaType) {\r\n        return this.media[mediaType];\r\n    }\r\n\r\n    getMediaBlockByPayloadType(pt) {\r\n        // for (var m in this.media) {\r\n        //     if (-1 !== this.media[m].fmt.indexOf(pt)) {\r\n        //         return this.media[m];\r\n        //     }\r\n        // }\r\n        return this.mediaMap[pt] || null;\r\n\r\n        //ErrorManager.dispatchError(826, [pt], true);\r\n        // Log.error(`failed to find media with payload type ${pt}`);\r\n        //\r\n        // return null;\r\n    }\r\n\r\n    getMediaBlockList() {\r\n        var res = [];\r\n        var m;\r\n        for (m in this.media) {\r\n            res.push(m);\r\n        }\r\n        return res;\r\n    }\r\n}\r\n","import {getTagged} from '../../deps/bp_logger.js';\r\n\r\nimport {RTSPClientSM as RTSPClient} from './client.js';\r\nimport {Url} from '../../core/util/url.js';\r\nimport {RTSPError} from \"./client\";\r\n\r\nconst LOG_TAG = \"rtsp:stream\";\r\nconst Log = getTagged(LOG_TAG);\r\n\r\nexport class RTSPStream {\r\n\r\n    constructor(client, track) {\r\n        this.state = null;\r\n        this.client = client;\r\n        this.track = track;\r\n        this.rtpChannel = 1;\r\n\r\n        this.stopKeepAlive();\r\n        this.keepaliveInterval = null;\r\n        this.keepaliveTime = 30000;\r\n    }\r\n\r\n    reset() {\r\n        this.stopKeepAlive();\r\n        this.client.forgetRTPChannel(this.rtpChannel);\r\n        this.client = null;\r\n        this.track = null;\r\n    }\r\n\r\n    start(lastSetupPromise = null) {\r\n        if (lastSetupPromise != null) {\r\n            // if a setup was already made, use the same session\r\n            return lastSetupPromise.then((obj) => this.sendSetup(obj.session))\r\n        } else {\r\n            return this.sendSetup();\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        return this.sendTeardown();\r\n    }\r\n\r\n    getSetupURL(track) {\r\n        let sessionBlock = this.client.sdp.getSessionBlock();\r\n        if (Url.isAbsolute(track.control)) {\r\n            return track.control;\r\n        } else if (Url.isAbsolute(`${sessionBlock.control}${track.control}`)) {\r\n            return `${sessionBlock.control}${track.control}`;\r\n        } else if (Url.isAbsolute(`${this.client.contentBase}${track.control}`)) {\r\n            /* Should probably check session level control before this */\r\n            return `${this.client.contentBase}${track.control}`;\r\n        }\r\n        else {//need return default\r\n            return track.control;\r\n        }\r\n        Log.error('Can\\'t determine track URL from ' +\r\n            'block.control:' + track.control + ', ' +\r\n            'session.control:' + sessionBlock.control + ', and ' +\r\n            'content-base:' + this.client.contentBase);\r\n    }\r\n\r\n    getControlURL() {\r\n        let ctrl = this.client.sdp.getSessionBlock().control;\r\n        if (Url.isAbsolute(ctrl)) {\r\n            return ctrl;\r\n        } else if (!ctrl || '*' === ctrl) {\r\n            return this.client.contentBase;\r\n        } else {\r\n            return `${this.client.contentBase}${ctrl}`;\r\n        }\r\n    }\r\n\r\n    sendKeepalive() {\r\n        if (this.client.methods.includes('GET_PARAMETER')) {\r\n            return this.client.sendRequest('GET_PARAMETER', this.getSetupURL(this.track), {\r\n                'Session': this.session\r\n            });\r\n        } else {\r\n            return this.client.sendRequest('OPTIONS', '*');\r\n        }\r\n    }\r\n\r\n    stopKeepAlive() {\r\n        clearInterval(this.keepaliveInterval);\r\n    }\r\n\r\n    startKeepAlive() {\r\n        this.keepaliveInterval = setInterval(() => {\r\n            this.sendKeepalive().catch((e) => {\r\n                Log.error(e);\r\n                if (e instanceof RTSPError) {\r\n                    if (Number(e.data.parsed.code) == 501) {\r\n                        return;\r\n                    }\r\n                }\r\n                this.client.reconnect();\r\n            });\r\n        }, this.keepaliveTime);\r\n    }\r\n\r\n    sendRequest(_cmd, _params = {}) {\r\n        let params = {};\r\n        if (this.session) {\r\n            params['Session'] = this.session;\r\n        }\r\n        Object.assign(params, _params);\r\n        return this.client.sendRequest(_cmd, this.getControlURL(), params);\r\n    }\r\n\r\n    sendSetup(session = null) {\r\n        this.state = RTSPClient.STATE_SETUP;\r\n        this.rtpChannel = this.client.interleaveChannelIndex;\r\n        let interleavedChannels = this.client.interleaveChannelIndex++ + \"-\" + this.client.interleaveChannelIndex++;\r\n        let params = {\r\n            'Transport': `RTP/AVP/TCP;unicast;interleaved=${interleavedChannels}`,\r\n            'Date': new Date().toUTCString()\r\n        };\r\n        if(session){\r\n            params.Session = session;\r\n        }\r\n        return this.client.sendRequest('SETUP', this.getSetupURL(this.track), params).then((_data) => {\r\n            this.session = _data.headers['session'];\r\n            let transport = _data.headers['transport'];\r\n            if (transport) {\r\n                let interleaved = transport.match(/interleaved=([0-9]+)-([0-9]+)/)[1];\r\n                if (interleaved) {\r\n                    this.rtpChannel = Number(interleaved);\r\n                }\r\n            }\r\n            let sessionParamsChunks = this.session.split(';').slice(1);\r\n            let sessionParams = {};\r\n            for (let chunk of sessionParamsChunks) {\r\n                let kv = chunk.split('=');\r\n                sessionParams[kv[0]] = kv[1];\r\n            }\r\n            if (sessionParams['timeout']) {\r\n                this.keepaliveInterval = Number(sessionParams['timeout']) * 500; // * 1000 / 2\r\n            }\r\n            /*if (!/RTP\\/AVP\\/TCP;unicast;interleaved=/.test(_data.headers[\"transport\"])) {\r\n                // TODO: disconnect stream and notify client\r\n                throw new Error(\"Connection broken\");\r\n            }*/\r\n            this.client.useRTPChannel(this.rtpChannel);\r\n            this.startKeepAlive();\r\n            return {track: this.track, data: _data, session: this.session};\r\n        });\r\n    }\r\n}\r\n","/*\r\n * JavaScript MD5\r\n * https://github.com/blueimp/JavaScript-MD5\r\n *\r\n * Copyright 2011, Sebastian Tschan\r\n * https://blueimp.net\r\n *\r\n * Licensed under the MIT license:\r\n * https://opensource.org/licenses/MIT\r\n *\r\n * Based on\r\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\r\n * Digest Algorithm, as defined in RFC 1321.\r\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\r\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\r\n * Distributed under the BSD License\r\n * See http://pajhome.org.uk/crypt/md5 for more info.\r\n */\r\n\r\n\r\n/*\r\n* Add integers, wrapping at 2^32. This uses 16-bit operations internally\r\n* to work around bugs in some JS interpreters.\r\n*/\r\nfunction safeAdd(x, y) {\r\n    var lsw = (x & 0xFFFF) + (y & 0xFFFF)\r\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16)\r\n    return (msw << 16) | (lsw & 0xFFFF)\r\n}\r\n\r\n/*\r\n* Bitwise rotate a 32-bit number to the left.\r\n*/\r\nfunction bitRotateLeft(num, cnt) {\r\n    return (num << cnt) | (num >>> (32 - cnt))\r\n}\r\n\r\n/*\r\n* These functions implement the four basic operations the algorithm uses.\r\n*/\r\nfunction md5cmn(q, a, b, x, s, t) {\r\n    return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b)\r\n}\r\nfunction md5ff(a, b, c, d, x, s, t) {\r\n    return md5cmn((b & c) | ((~b) & d), a, b, x, s, t)\r\n}\r\nfunction md5gg(a, b, c, d, x, s, t) {\r\n    return md5cmn((b & d) | (c & (~d)), a, b, x, s, t)\r\n}\r\nfunction md5hh(a, b, c, d, x, s, t) {\r\n    return md5cmn(b ^ c ^ d, a, b, x, s, t)\r\n}\r\nfunction md5ii(a, b, c, d, x, s, t) {\r\n    return md5cmn(c ^ (b | (~d)), a, b, x, s, t)\r\n}\r\n\r\n/*\r\n* Calculate the MD5 of an array of little-endian words, and a bit length.\r\n*/\r\nfunction binlMD5(x, len) {\r\n    /* append padding */\r\n    x[len >> 5] |= 0x80 << (len % 32)\r\n    x[(((len + 64) >>> 9) << 4) + 14] = len\r\n\r\n    var i\r\n    var olda\r\n    var oldb\r\n    var oldc\r\n    var oldd\r\n    var a = 1732584193\r\n    var b = -271733879\r\n    var c = -1732584194\r\n    var d = 271733878\r\n\r\n    for (i = 0; i < x.length; i += 16) {\r\n        olda = a\r\n        oldb = b\r\n        oldc = c\r\n        oldd = d\r\n\r\n        a = md5ff(a, b, c, d, x[i], 7, -680876936)\r\n        d = md5ff(d, a, b, c, x[i + 1], 12, -389564586)\r\n        c = md5ff(c, d, a, b, x[i + 2], 17, 606105819)\r\n        b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330)\r\n        a = md5ff(a, b, c, d, x[i + 4], 7, -176418897)\r\n        d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426)\r\n        c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341)\r\n        b = md5ff(b, c, d, a, x[i + 7], 22, -45705983)\r\n        a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416)\r\n        d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417)\r\n        c = md5ff(c, d, a, b, x[i + 10], 17, -42063)\r\n        b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162)\r\n        a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682)\r\n        d = md5ff(d, a, b, c, x[i + 13], 12, -40341101)\r\n        c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290)\r\n        b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329)\r\n\r\n        a = md5gg(a, b, c, d, x[i + 1], 5, -165796510)\r\n        d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632)\r\n        c = md5gg(c, d, a, b, x[i + 11], 14, 643717713)\r\n        b = md5gg(b, c, d, a, x[i], 20, -373897302)\r\n        a = md5gg(a, b, c, d, x[i + 5], 5, -701558691)\r\n        d = md5gg(d, a, b, c, x[i + 10], 9, 38016083)\r\n        c = md5gg(c, d, a, b, x[i + 15], 14, -660478335)\r\n        b = md5gg(b, c, d, a, x[i + 4], 20, -405537848)\r\n        a = md5gg(a, b, c, d, x[i + 9], 5, 568446438)\r\n        d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690)\r\n        c = md5gg(c, d, a, b, x[i + 3], 14, -187363961)\r\n        b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501)\r\n        a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467)\r\n        d = md5gg(d, a, b, c, x[i + 2], 9, -51403784)\r\n        c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473)\r\n        b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734)\r\n\r\n        a = md5hh(a, b, c, d, x[i + 5], 4, -378558)\r\n        d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463)\r\n        c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562)\r\n        b = md5hh(b, c, d, a, x[i + 14], 23, -35309556)\r\n        a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060)\r\n        d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353)\r\n        c = md5hh(c, d, a, b, x[i + 7], 16, -155497632)\r\n        b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640)\r\n        a = md5hh(a, b, c, d, x[i + 13], 4, 681279174)\r\n        d = md5hh(d, a, b, c, x[i], 11, -358537222)\r\n        c = md5hh(c, d, a, b, x[i + 3], 16, -722521979)\r\n        b = md5hh(b, c, d, a, x[i + 6], 23, 76029189)\r\n        a = md5hh(a, b, c, d, x[i + 9], 4, -640364487)\r\n        d = md5hh(d, a, b, c, x[i + 12], 11, -421815835)\r\n        c = md5hh(c, d, a, b, x[i + 15], 16, 530742520)\r\n        b = md5hh(b, c, d, a, x[i + 2], 23, -995338651)\r\n\r\n        a = md5ii(a, b, c, d, x[i], 6, -198630844)\r\n        d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415)\r\n        c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905)\r\n        b = md5ii(b, c, d, a, x[i + 5], 21, -57434055)\r\n        a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571)\r\n        d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606)\r\n        c = md5ii(c, d, a, b, x[i + 10], 15, -1051523)\r\n        b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799)\r\n        a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359)\r\n        d = md5ii(d, a, b, c, x[i + 15], 10, -30611744)\r\n        c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380)\r\n        b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649)\r\n        a = md5ii(a, b, c, d, x[i + 4], 6, -145523070)\r\n        d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379)\r\n        c = md5ii(c, d, a, b, x[i + 2], 15, 718787259)\r\n        b = md5ii(b, c, d, a, x[i + 9], 21, -343485551)\r\n\r\n        a = safeAdd(a, olda)\r\n        b = safeAdd(b, oldb)\r\n        c = safeAdd(c, oldc)\r\n        d = safeAdd(d, oldd)\r\n    }\r\n    return [a, b, c, d]\r\n}\r\n\r\n/*\r\n* Convert an array of little-endian words to a string\r\n*/\r\nfunction binl2rstr(input) {\r\n    var i\r\n    var output = ''\r\n    var length32 = input.length * 32\r\n    for (i = 0; i < length32; i += 8) {\r\n        output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF)\r\n    }\r\n    return output\r\n}\r\n\r\n/*\r\n* Convert a raw string to an array of little-endian words\r\n* Characters >255 have their high-byte silently ignored.\r\n*/\r\nfunction rstr2binl(input) {\r\n    var i\r\n    var output = []\r\n    output[(input.length >> 2) - 1] = undefined\r\n    for (i = 0; i < output.length; i += 1) {\r\n        output[i] = 0\r\n    }\r\n    var length8 = input.length * 8\r\n    for (i = 0; i < length8; i += 8) {\r\n        output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32)\r\n    }\r\n    return output\r\n}\r\n\r\n/*\r\n* Calculate the MD5 of a raw string\r\n*/\r\nfunction rstrMD5(s) {\r\n    return binl2rstr(binlMD5(rstr2binl(s), s.length * 8))\r\n}\r\n\r\n/*\r\n* Calculate the HMAC-MD5, of a key and some data (raw strings)\r\n*/\r\nfunction rstrHMACMD5(key, data) {\r\n    var i\r\n    var bkey = rstr2binl(key)\r\n    var ipad = []\r\n    var opad = []\r\n    var hash\r\n    ipad[15] = opad[15] = undefined\r\n    if (bkey.length > 16) {\r\n        bkey = binlMD5(bkey, key.length * 8)\r\n    }\r\n    for (i = 0; i < 16; i += 1) {\r\n        ipad[i] = bkey[i] ^ 0x36363636\r\n        opad[i] = bkey[i] ^ 0x5C5C5C5C\r\n    }\r\n    hash = binlMD5(ipad.concat(rstr2binl(data)), 512 + data.length * 8)\r\n    return binl2rstr(binlMD5(opad.concat(hash), 512 + 128))\r\n}\r\n\r\n/*\r\n* Convert a raw string to a hex string\r\n*/\r\nfunction rstr2hex(input) {\r\n    var hexTab = '0123456789abcdef'\r\n    var output = ''\r\n    var x\r\n    var i\r\n    for (i = 0; i < input.length; i += 1) {\r\n        x = input.charCodeAt(i)\r\n        output += hexTab.charAt((x >>> 4) & 0x0F) +\r\n            hexTab.charAt(x & 0x0F)\r\n    }\r\n    return output\r\n}\r\n\r\n/*\r\n* Encode a string as utf-8\r\n*/\r\nfunction str2rstrUTF8(input) {\r\n    return unescape(encodeURIComponent(input))\r\n}\r\n\r\n/*\r\n* Take string arguments and return either raw or hex encoded strings\r\n*/\r\nfunction rawMD5(s) {\r\n    return rstrMD5(str2rstrUTF8(s))\r\n}\r\nfunction hexMD5(s) {\r\n    return rstr2hex(rawMD5(s))\r\n}\r\nfunction rawHMACMD5(k, d) {\r\n    return rstrHMACMD5(str2rstrUTF8(k), str2rstrUTF8(d))\r\n}\r\nfunction hexHMACMD5(k, d) {\r\n    return rstr2hex(rawHMACMD5(k, d))\r\n}\r\n\r\nexport default function md5(string, key, raw) {\r\n    if (!key) {\r\n        if (!raw) {\r\n            return hexMD5(string)\r\n        }\r\n        return rawMD5(string)\r\n    }\r\n    if (!raw) {\r\n        return hexHMACMD5(key, string)\r\n    }\r\n    return rawHMACMD5(key, string)\r\n}\r\n","// TODO: asm.js\r\nimport {Log} from '../../../deps/bp_logger.js';\r\nexport default class RTP {\r\n    constructor(pkt/*uint8array*/, sdp) {\r\n        let bytes = new DataView(pkt.buffer, pkt.byteOffset, pkt.byteLength);\r\n\r\n        this.version   = bytes.getUint8(0) >>> 6;\r\n        this.padding   = bytes.getUint8(0) & 0x20 >>> 5;\r\n        this.has_extension = bytes.getUint8(0) & 0x10 >>> 4;\r\n        this.csrc      = bytes.getUint8(0) & 0x0F;\r\n        this.marker    = bytes.getUint8(1) >>> 7;\r\n        this.pt        = bytes.getUint8(1) & 0x7F;\r\n        this.sequence  = bytes.getUint16(2) ;\r\n        this.timestamp = bytes.getUint32(4);\r\n        this.ssrc      = bytes.getUint32(8);\r\n        this.csrcs     = [];\r\n\r\n        let pktIndex=12;\r\n        if (this.csrc>0) {\r\n            this.csrcs.push(bytes.getUint32(pktIndex));\r\n            pktIndex+=4;\r\n        }\r\n        if (this.has_extension==1) {\r\n            this.extension = bytes.getUint16(pktIndex);\r\n            this.ehl = bytes.getUint16(pktIndex+2);\r\n            pktIndex+=4;\r\n            this.header_data = pkt.slice(pktIndex, this.ehl);\r\n            pktIndex += this.ehl;\r\n        }\r\n\r\n        this.headerLength = pktIndex;\r\n        let padLength = 0;\r\n        if (this.padding) {\r\n            padLength = bytes.getUint8(pkt.byteLength-1);\r\n        }\r\n\r\n        // this.bodyLength   = pkt.byteLength-this.headerLength-padLength;\r\n\r\n        this.media = sdp.getMediaBlockByPayloadType(this.pt);\r\n        if (null === this.media) {\r\n            Log.log(`Media description for payload type: ${this.pt} not provided.`);\r\n        } else {\r\n            this.type = this.media.ptype;//PayloadType.string_map[this.media.rtpmap[this.media.fmt[0]].name];\r\n        }\r\n\r\n        this.data = pkt.subarray(pktIndex);\r\n        // this.timestamp = 1000 * (this.timestamp / this.media.rtpmap[this.pt].clock);\r\n        // console.log(this);\r\n    }\r\n    getPayload() {\r\n        return this.data;\r\n    }\r\n\r\n    getTimestampMS() {\r\n        return this.timestamp; //1000 * (this.timestamp / this.media.rtpmap[this.pt].clock);\r\n    }\r\n\r\n    toString() {\r\n        return \"RTP(\" +\r\n            \"version:\"   + this.version   + \", \" +\r\n            \"padding:\"   + this.padding   + \", \" +\r\n            \"has_extension:\" + this.has_extension + \", \" +\r\n            \"csrc:\"      + this.csrc      + \", \" +\r\n            \"marker:\"    + this.marker    + \", \" +\r\n            \"pt:\"        + this.pt        + \", \" +\r\n            \"sequence:\"  + this.sequence  + \", \" +\r\n            \"timestamp:\" + this.timestamp + \", \" +\r\n            \"ssrc:\"      + this.ssrc      + \")\";\r\n    }\r\n\r\n    isVideo(){return this.media.type == 'video';}\r\n    isAudio(){return this.media.type == 'audio';}\r\n\r\n    \r\n}","import RTP from './rtp.js';\r\n\r\nexport default class RTPFactory {\r\n    constructor(sdp) {\r\n        this.tsOffsets={};\r\n        for (let pay in sdp.media) {\r\n            for (let pt of sdp.media[pay].fmt) {\r\n                this.tsOffsets[pt] = {last: 0, overflow: 0};\r\n            }\r\n        }\r\n    }\r\n\r\n    build(pkt/*uint8array*/, sdp) {\r\n        let rtp = new RTP(pkt, sdp);\r\n\r\n        let tsOffset = this.tsOffsets[rtp.pt];\r\n        if (tsOffset) {\r\n            rtp.timestamp += tsOffset.overflow;\r\n            if (tsOffset.last && Math.abs(rtp.timestamp - tsOffset.last) > 0x7fffffff) {\r\n                console.log(`\\nlast ts: ${tsOffset.last}\\n\r\n                            new ts: ${rtp.timestamp}\\n\r\n                            new ts adjusted: ${rtp.timestamp+0xffffffff}\\n\r\n                            last overflow: ${tsOffset.overflow}\\n\r\n                            new overflow: ${tsOffset.overflow+0xffffffff}\\n\r\n                            `);\r\n                tsOffset.overflow += 0xffffffff;\r\n                rtp.timestamp += 0xffffffff;\r\n            }\r\n            /*if (rtp.timestamp>0xffffffff) {\r\n                console.log(`ts: ${rtp.timestamp}, seq: ${rtp.sequence}`);\r\n            }*/\r\n            tsOffset.last = rtp.timestamp;\r\n        }\r\n\r\n        return rtp;\r\n    }\r\n}","export class RTSPMessage {\r\n    static get RTSP_1_0() {return  \"RTSP/1.0\";}\r\n\r\n    constructor(_rtsp_version) {\r\n        this.version = _rtsp_version;\r\n    }\r\n\r\n    build(_cmd, _host, _params={}, _payload=null) {\r\n        let requestString = `${_cmd} ${_host} ${this.version}\\r\\n`;\r\n        for (let param in _params) {\r\n            requestString+=`${param}: ${_params[param]}\\r\\n`\r\n        }\r\n        // TODO: binary payload\r\n        if (_payload) {\r\n            requestString+=`Content-Length: ${_payload.length}\\r\\n`\r\n        }\r\n        requestString+='\\r\\n';\r\n        if (_payload) {\r\n            requestString+=_payload;\r\n        }\r\n        return requestString;\r\n    }\r\n\r\n    parse(_data) {\r\n        let lines = _data.split('\\r\\n');\r\n        let parsed = {\r\n            headers:{},\r\n            body:null,\r\n            code: 0,\r\n            statusLine: ''\r\n        };\r\n\r\n        let match;\r\n        [match, parsed.code, parsed.statusLine] = lines[0].match(new RegExp(`${this.version}[ ]+([0-9]{3})[ ]+(.*)`));\r\n        parsed.code = Number(parsed.code);\r\n        let lineIdx = 1;\r\n\r\n        while (lines[lineIdx]) {\r\n            let [k,v] = lines[lineIdx].split(/:(.+)/);\r\n            parsed.headers[k.toLowerCase()] = v.trim();\r\n            lineIdx++;\r\n        }\r\n\r\n        parsed.body = lines.slice(lineIdx).join('\\n\\r');\r\n\r\n        return parsed;\r\n    }\r\n\r\n}\r\n\r\nexport const MessageBuilder = new RTSPMessage(RTSPMessage.RTSP_1_0);","import {Log} from '../../deps/bp_logger.js';\r\nimport {NALU} from './NALU.js';\r\n\r\n// TODO: asm.js\r\nexport class NALUAsm {\r\n\r\n    constructor() {\r\n        this.fragmented_nalu = null;\r\n    }\r\n\r\n\r\n    static parseNALHeader(hdr) {\r\n        return {\r\n            nri: hdr & 0x60,\r\n            type: hdr & 0x1F\r\n        }\r\n    }\r\n\r\n    parseSingleNALUPacket(rawData, header, dts, pts) {\r\n        return new NALU(header.type,  header.nri, rawData.subarray(0), dts, pts);\r\n    }\r\n\r\n    parseAggregationPacket(rawData, header, dts, pts) {\r\n        let data = new DataView(rawData.buffer, rawData.byteOffset, rawData.byteLength);\r\n        let nal_start_idx = 0;\r\n        let don = null;\r\n        if (NALU.STAP_B === header.type) {\r\n            don = data.getUint16(nal_start_idx);\r\n            nal_start_idx += 2;\r\n        }\r\n        let ret = [];\r\n        while (nal_start_idx < data.byteLength) {\r\n            let size = data.getUint16(nal_start_idx);\r\n            nal_start_idx += 2;\r\n            let header = NALUAsm.parseNALHeader(data.getInt8(nal_start_idx));\r\n            nal_start_idx++;\r\n            let nalu = this.parseSingleNALUPacket(rawData.subarray(nal_start_idx, nal_start_idx+size), header, dts, pts);\r\n            if (nalu !== null) {\r\n                ret.push(nalu);\r\n            }\r\n            nal_start_idx+=size;\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    parseFragmentationUnit(rawData, header, dts, pts) {\r\n        let data = new DataView(rawData.buffer, rawData.byteOffset, rawData.byteLength);\r\n        let nal_start_idx = 0;\r\n        let fu_header = data.getUint8(nal_start_idx);\r\n        let is_start = (fu_header & 0x80) >>> 7;\r\n        let is_end = (fu_header & 0x40) >>> 6;\r\n        let payload_type = fu_header & 0x1F;\r\n        let ret = null;\r\n\r\n        nal_start_idx++;\r\n        let don = 0;\r\n        if (NALU.FU_B === header.type) {\r\n            don = data.getUint16(nal_start_idx);\r\n            nal_start_idx += 2;\r\n        }\r\n\r\n        if (is_start) {\r\n            this.fragmented_nalu = new NALU(payload_type, header.nri, rawData.subarray(nal_start_idx), dts, pts);\r\n        }\r\n        if (this.fragmented_nalu && this.fragmented_nalu.ntype === payload_type) {\r\n            if (!is_start) {\r\n                this.fragmented_nalu.appendData(rawData.subarray(nal_start_idx));\r\n            }\r\n            if (is_end) {\r\n                ret = this.fragmented_nalu;\r\n                this.fragmented_nalu = null;\r\n                return ret;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    onNALUFragment(rawData, dts, pts) {\r\n\r\n        let data = new DataView(rawData.buffer, rawData.byteOffset, rawData.byteLength);\r\n\r\n        let header = NALUAsm.parseNALHeader(data.getUint8(0));\r\n\r\n        let nal_start_idx = 1;\r\n\r\n        let unit = null;\r\n        if (header.type > 0 && header.type < 24) {\r\n            unit = this.parseSingleNALUPacket(rawData.subarray(nal_start_idx), header, dts, pts);\r\n        } else if (NALU.FU_A ===  header.type || NALU.FU_B ===  header.type) {\r\n            unit = this.parseFragmentationUnit(rawData.subarray(nal_start_idx), header, dts, pts);\r\n        } else if (NALU.STAP_A === header.type || NALU.STAP_B === header.type) {\r\n            return this.parseAggregationPacket(rawData.subarray(nal_start_idx), header, dts, pts);\r\n        } else {\r\n            /* 30 - 31 is undefined, ignore those (RFC3984). */\r\n            Log.log('Undefined NAL unit, type: ' + header.type);\r\n            return null;\r\n        }\r\n        if (unit) {\r\n            return [unit];\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","export class AACFrame {\r\n\r\n    constructor(data, dts, pts) {\r\n        this.dts = dts;\r\n        this.pts = pts ? pts : this.dts;\r\n\r\n        this.data=data;//.subarray(offset);\r\n    }\r\n\r\n    getData() {\r\n        return this.data;\r\n    }\r\n\r\n    getSize() {\r\n        return this.data.byteLength;\r\n    }\r\n}","import {AACFrame} from './AACFrame.js';\r\nimport {BitArray} from '../util/binary';\r\n// import {AACParser} from \"../parsers/aac.js\";\r\n// TODO: asm.js\r\nexport class AACAsm {\r\n    constructor() {\r\n        this.config = null;\r\n    }\r\n\r\n    onAACFragment(pkt) {\r\n        let rawData = pkt.getPayload();\r\n        if (!pkt.media) {\r\n            return null;\r\n        }\r\n        let data = new DataView(rawData.buffer, rawData.byteOffset, rawData.byteLength);\r\n\r\n        let sizeLength = Number(pkt.media.fmtp['sizelength'] || 0);\r\n        let indexLength = Number(pkt.media.fmtp['indexlength'] || 0);\r\n        let indexDeltaLength = Number(pkt.media.fmtp['indexdeltalength'] || 0);\r\n        let CTSDeltaLength = Number(pkt.media.fmtp['ctsdeltalength'] || 0);\r\n        let DTSDeltaLength = Number(pkt.media.fmtp['dtsdeltalength'] || 0);\r\n        let RandomAccessIndication = Number(pkt.media.fmtp['randomaccessindication'] || 0);\r\n        let StreamStateIndication = Number(pkt.media.fmtp['streamstateindication'] || 0);\r\n        let AuxiliaryDataSizeLength = Number(pkt.media.fmtp['auxiliarydatasizelength'] || 0);\r\n\r\n        let configHeaderLength =\r\n            sizeLength + Math.max(indexLength, indexDeltaLength) + CTSDeltaLength + DTSDeltaLength +\r\n            RandomAccessIndication + StreamStateIndication + AuxiliaryDataSizeLength;\r\n\r\n\r\n        let auHeadersLengthPadded = 0;\r\n        let offset = 0;\r\n        let ts = (Math.round(pkt.getTimestampMS()/1024) << 10) * 90000 / this.config.samplerate;\r\n        if (0 !== configHeaderLength) {\r\n            /* The AU header section is not empty, read it from payload */\r\n            let auHeadersLengthInBits = data.getUint16(0); // Always 2 octets, without padding\r\n            auHeadersLengthPadded = 2 + (auHeadersLengthInBits>>>3) + ((auHeadersLengthInBits & 0x7)?1:0); // Add padding\r\n\r\n            //this.config = AACParser.parseAudioSpecificConfig(new Uint8Array(rawData, 0 , auHeadersLengthPadded));\r\n            // TODO: parse config\r\n            let frames = [];\r\n            let frameOffset=0;\r\n            let bits = new BitArray(rawData.subarray(2 + offset));\r\n            let cts = 0;\r\n            let dts = 0;\r\n            for (let offset=0; offset<auHeadersLengthInBits;) {\r\n                let size = bits.readBits(sizeLength);\r\n                let idx = bits.readBits(offset?indexDeltaLength:indexLength);\r\n                offset+=sizeLength+(offset?indexDeltaLength:indexLength)/*+2*/;\r\n                if (/*ctsPresent &&*/ CTSDeltaLength) {\r\n                    let ctsPresent = bits.readBits(1);\r\n                    cts = bits.readBits(CTSDeltaLength);\r\n                    offset+=CTSDeltaLength;\r\n                }\r\n                if (/*dtsPresent && */DTSDeltaLength) {\r\n                    let dtsPresent = bits.readBits(1);\r\n                    dts = bits.readBits(DTSDeltaLength);\r\n                    offset+=CTSDeltaLength;\r\n                }\r\n                if (RandomAccessIndication) {\r\n                    bits.skipBits(1);\r\n                    offset+=1;\r\n                }\r\n                if (StreamStateIndication) {\r\n                    bits.skipBits(StreamStateIndication);\r\n                    offset+=StreamStateIndication;\r\n                }\r\n                frames.push(new AACFrame(rawData.subarray(auHeadersLengthPadded + frameOffset, auHeadersLengthPadded + frameOffset + size), ts+dts, ts+cts));\r\n                frameOffset+=size;\r\n            }\r\n            return frames;\r\n        } else {\r\n            let aacData = rawData.subarray(auHeadersLengthPadded);\r\n            while (true) {\r\n                if (aacData[offset] !=255) break;\r\n                ++offset;\r\n            }\r\n            ++offset;\r\n            return [new AACFrame(rawData.subarray(auHeadersLengthPadded+offset), ts)];\r\n        }\r\n    }\r\n}","import {NALUAsm} from \"../../../../core/elementary/NALUAsm.js\";\r\nimport {AACAsm} from \"../../../../core/elementary/AACAsm.js\";\r\n\r\nexport class RTPPayloadParser {\r\n\r\n    constructor() {\r\n        this.h264parser = new RTPH264Parser();\r\n        this.aacparser = new RTPAACParser();\r\n    }\r\n\r\n    parse(rtp) {\r\n        if (rtp.media.type=='video') {\r\n            return this.h264parser.parse(rtp);\r\n        } else if (rtp.media.type == 'audio') {\r\n            return this.aacparser.parse(rtp);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\nclass RTPH264Parser {\r\n    constructor() {\r\n        this.naluasm = new NALUAsm();\r\n    }\r\n\r\n    parse(rtp) {\r\n        return this.naluasm.onNALUFragment(rtp.getPayload(), rtp.getTimestampMS());\r\n    }\r\n}\r\n\r\nclass RTPAACParser {\r\n\r\n    constructor() {\r\n        this.scale = 1;\r\n        this.asm = new AACAsm();\r\n    }\r\n\r\n    setConfig(conf) {\r\n        this.asm.config = conf;\r\n    }\r\n\r\n    parse(rtp) {\r\n        return this.asm.onAACFragment(rtp);\r\n    }\r\n}","import {Log} from '../deps/bp_logger.js';\r\nimport {EventEmitter} from '../deps/bp_event.js';\r\n\r\nexport class BaseClient {\r\n    constructor(options={flush: 100}) {\r\n        this.options = options;\r\n        this.eventSource = new EventEmitter();\r\n\r\n        Object.defineProperties(this, {\r\n            sourceUrl: {value: null, writable: true},   // TODO: getter with validator\r\n            paused: {value: true, writable: true},\r\n            seekable: {value: false, writable: true},\r\n            connected: {value: false, writable: true}\r\n        });\r\n\r\n        this._onData = ()=>{\r\n            if (this.connected) {\r\n                while (this.transport.dataQueue.length) {\r\n                    this.onData(this.transport.dataQueue.pop());\r\n                }\r\n            }\r\n        };\r\n        this._onConnect = this.onConnected.bind(this);\r\n        this._onDisconnect = this.onDisconnected.bind(this);\r\n    }\r\n\r\n    static streamType() {\r\n        return null;    \r\n    }\r\n    \r\n    destroy() {\r\n        this.detachTransport();\r\n    }\r\n\r\n    attachTransport(transport) {\r\n        if (this.transport) {\r\n            this.detachTransport();\r\n        }\r\n        this.transport = transport;\r\n        this.transport.eventSource.addEventListener('data', this._onData);\r\n        this.transport.eventSource.addEventListener('connected', this._onConnect);\r\n        this.transport.eventSource.addEventListener('disconnected', this._onDisconnect);\r\n    }\r\n\r\n    detachTransport() {\r\n        if (this.transport) {\r\n            this.transport.eventSource.removeEventListener('data', this._onData);\r\n            this.transport.eventSource.removeEventListener('connected', this._onConnect);\r\n            this.transport.eventSource.removeEventListener('disconnected', this._onDisconnect);\r\n            this.transport = null;\r\n        }\r\n    }\r\n    reset() {\r\n\r\n    }\r\n\r\n    start() {\r\n        Log.log('Client started');\r\n        this.paused = false;\r\n        // this.startStreamFlush();\r\n    }\r\n\r\n    stop() {\r\n        Log.log('Client paused');\r\n        this.paused = true;\r\n        // this.stopStreamFlush();\r\n    }\r\n\r\n    seek(timeOffset) {\r\n\r\n    }\r\n\r\n    setSource(source) {\r\n        this.stop();\r\n        this.endpoint = source;\r\n        this.sourceUrl = source.urlpath;\r\n    }\r\n\r\n    startStreamFlush() {\r\n        this.flushInterval = setInterval(()=>{\r\n            if (!this.paused) {\r\n                this.eventSource.dispatchEvent('flush');\r\n            }\r\n        }, this.options.flush);\r\n    }\r\n\r\n    stopStreamFlush() {\r\n        clearInterval(this.flushInterval);\r\n    }\r\n\r\n    onData(data) {\r\n\r\n    }\r\n\r\n    onConnected() {\r\n        if (!this.seekable) {\r\n            this.transport.dataQueue = [];\r\n            this.eventSource.dispatchEvent('clear');\r\n        }\r\n        this.connected = true;\r\n    }\r\n\r\n    onDisconnected() {\r\n        this.connected = false;\r\n    }\r\n\r\n    queryCredentials() {\r\n        return Promise.resolve();\r\n    }\r\n\r\n    setCredentials(user, password) {\r\n        this.endpoint.user = user;\r\n        this.endpoint.pass = password;\r\n        this.endpoint.auth = `${user}:${password}`;\r\n    }\r\n}","import {BitArray, bitSlice} from '../util/binary.js';\r\n\r\nexport class AACParser {\r\n    static get SampleRates() {return  [\r\n        96000, 88200,\r\n        64000, 48000,\r\n        44100, 32000,\r\n        24000, 22050,\r\n        16000, 12000,\r\n        11025, 8000,\r\n        7350];}\r\n\r\n    // static Profile = [\r\n    //     0: Null\r\n    //     1: AAC Main\r\n    //     2: AAC LC (Low Complexity)\r\n    //     3: AAC SSR (Scalable Sample Rate)\r\n    //     4: AAC LTP (Long Term Prediction)\r\n    //     5: SBR (Spectral Band Replication)\r\n    //     6: AAC Scalable\r\n    // ]\r\n\r\n    static parseAudioSpecificConfig(bytesOrBits) {\r\n        let config;\r\n        if (bytesOrBits.byteLength) { // is byteArray\r\n            config = new BitArray(bytesOrBits);\r\n        } else {\r\n            config = bytesOrBits;\r\n        }\r\n\r\n        let bitpos = config.bitpos+(config.src.byteOffset+config.bytepos)*8;\r\n        let prof = config.readBits(5);\r\n        this.codec = `mp4a.40.${prof}`;\r\n        let sfi = config.readBits(4);\r\n        if (sfi == 0xf) config.skipBits(24);\r\n        let channels = config.readBits(4);\r\n\r\n        return {\r\n            config: bitSlice(new Uint8Array(config.src.buffer), bitpos, bitpos+16),\r\n            codec: `mp4a.40.${prof}`,\r\n            samplerate: AACParser.SampleRates[sfi],\r\n            channels: channels\r\n        }\r\n    }\r\n\r\n    static parseStreamMuxConfig(bytes) {\r\n        // ISO_IEC_14496-3 Part 3 Audio. StreamMuxConfig\r\n        let config = new BitArray(bytes);\r\n\r\n        if (!config.readBits(1)) {\r\n            config.skipBits(14);\r\n            return AACParser.parseAudioSpecificConfig(config);\r\n        }\r\n    }\r\n}\r\n","import {getTagged} from '../../deps/bp_logger.js';\r\n\r\nimport {RTSPClientSM as RTSPClient} from './client.js';\r\nimport {Url} from '../../core/util/url.js';\r\nimport {RTSPError} from \"./client\";\r\n\r\nconst LOG_TAG = \"rtsp:session\";\r\nconst Log = getTagged(LOG_TAG);\r\n\r\nexport class RTSPSession {\r\n\r\n    constructor(client, sessionId) {\r\n        this.state = null;\r\n        this.client = client;\r\n        this.sessionId = sessionId;\r\n        this.url = this.getControlURL();\r\n    }\r\n\r\n    reset() {\r\n        this.client = null;\r\n    }\r\n\r\n    start() {\r\n        return this.sendPlay();\r\n    }\r\n\r\n    stop() {\r\n        return this.sendTeardown();\r\n    }\r\n\r\n    getControlURL() {\r\n        let ctrl = this.client.sdp.getSessionBlock().control;\r\n        if (Url.isAbsolute(ctrl)) {\r\n            return ctrl;\r\n        } else if (!ctrl || '*' === ctrl) {\r\n            return this.client.contentBase;\r\n        } else {\r\n            return `${this.client.contentBase}${ctrl}`;\r\n        }\r\n    }\r\n\r\n    sendRequest(_cmd, _params = {}) {\r\n        let params = {};\r\n        if (this.sessionId) {\r\n            params['Session'] = this.sessionId;\r\n        }\r\n        Object.assign(params, _params);\r\n        return this.client.sendRequest(_cmd, this.getControlURL(), params);\r\n    }\r\n\r\n    async sendPlay(pos = 0) {\r\n        this.state = RTSPClient.STATE_PLAY;\r\n        let params = {};\r\n        let range = this.client.sdp.sessionBlock.range;\r\n        if (range) {\r\n            // TODO: seekable\r\n            if (range[0] == -1) {\r\n                range[0] = 0;// Do not handle now at the moment\r\n            }\r\n            // params['Range'] = `${range[2]}=${range[0]}-`;\r\n        }\r\n        let data = await this.sendRequest('PLAY', params);\r\n        this.state = RTSPClient.STATE_PLAYING;\r\n        return {data: data};\r\n    }\r\n\r\n    async sendPause() {\r\n        if (!this.client.supports(\"PAUSE\")) {\r\n            return;\r\n        }\r\n        this.state = RTSPClient.STATE_PAUSE;\r\n        await this.sendRequest(\"PAUSE\");\r\n        this.state = RTSPClient.STATE_PAUSED;\r\n    }\r\n\r\n    async sendTeardown() {\r\n        if (this.state != RTSPClient.STATE_TEARDOWN) {\r\n            this.state = RTSPClient.STATE_TEARDOWN;\r\n            await this.sendRequest(\"TEARDOWN\");\r\n            Log.log('RTSPClient: STATE_TEARDOWN');\r\n            ///this.client.connection.disconnect();\r\n            // TODO: Notify client\r\n        }\r\n    }\r\n}\r\n","import {getTagged} from '../../deps/bp_logger.js';\r\nimport {StateMachine} from '../../deps/bp_statemachine.js';\r\nimport {SDPParser} from '../../core/parsers/sdp.js';\r\nimport {RTSPStream} from './stream.js';\r\nimport md5 from '../../core/util/md5';\r\n// import {RTP} from './rtp/rtp';\r\nimport RTPFactory from './rtp/factory.js';\r\nimport {MessageBuilder} from './message.js';\r\nimport {RTPPayloadParser} from './rtp/payload/parser.js';\r\nimport {BaseClient} from '../../core/base_client.js';\r\nimport {PayloadType} from '../../core/defs.js';\r\nimport {base64ToArrayBuffer, hexToByteArray} from '../../core/util/binary.js';\r\nimport {AACParser} from '../../core/parsers/aac.js';\r\nimport {RTSPSession} from \"./session\";\r\n\r\nconst LOG_TAG = \"client:rtsp\";\r\nconst Log = getTagged(LOG_TAG);\r\n\r\nexport class RTPError {\r\n    constructor(message, file, line) {\r\n        //super(message, file, line);\r\n    }\r\n}\r\n\r\nexport default class RTSPClient extends BaseClient {\r\n    constructor(options={flush: 200}) {\r\n        super(options);\r\n        this.clientSM = new RTSPClientSM(this);\r\n        this.clientSM.ontracks = (tracks) => {\r\n            this.eventSource.dispatchEvent('tracks', tracks);\r\n            this.startStreamFlush();\r\n        };\r\n        this.sampleQueues={};\r\n    }\r\n\r\n    static streamType() {\r\n        return 'rtsp';\r\n    }\r\n\r\n    setSource(url) {\r\n        super.setSource(url);\r\n        this.clientSM.setSource(url);\r\n    }\r\n    attachTransport(transport) {\r\n        super.attachTransport(transport);\r\n        this.clientSM.transport = transport;\r\n    }\r\n\r\n    detachTransport() {\r\n        super.detachTransport();\r\n        this.clientSM.transport = null;\r\n    }\r\n\r\n    reset() {\r\n        super.reset();\r\n        this.sampleQueues={};\r\n    }\r\n\r\n    destroy() {\r\n        this.clientSM.destroy();\r\n        return super.destroy();\r\n    }\r\n\r\n    start() {\r\n        super.start();\r\n        if (this.transport) {\r\n            return this.transport.ready.then(() => {\r\n                return this.clientSM.start();\r\n            });\r\n        } else {\r\n            return Promise.reject(\"no transport attached\");\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        super.stop();\r\n        return this.clientSM.stop();\r\n    }\r\n\r\n    onData(data) {\r\n        this.clientSM.onData(data);\r\n    }\r\n\r\n    onConnected() {\r\n        this.clientSM.onConnected();\r\n        super.onConnected();\r\n    }\r\n\r\n    onDisconnected() {\r\n        super.onDisconnected();\r\n        this.clientSM.onDisconnected();\r\n    }\r\n}\r\n\r\nclass AuthError extends Error {\r\n    constructor(msg) {\r\n        super(msg);\r\n    }\r\n}\r\n\r\nexport class RTSPError extends Error {\r\n    constructor(data) {\r\n        super(data.msg);\r\n        this.data = data;\r\n    }\r\n}\r\n\r\nexport class RTSPClientSM extends StateMachine {\r\n    static get USER_AGENT() {return 'SFRtsp 0.3';}\r\n    static get STATE_INITIAL() {return  1 << 0;}\r\n    static get STATE_OPTIONS() {return 1 << 1;}\r\n    static get STATE_DESCRIBE () {return  1 << 2;}\r\n    static get STATE_SETUP() {return  1 << 3;}\r\n    static get STATE_STREAMS() {return 1 << 4;}\r\n    static get STATE_TEARDOWN() {return  1 << 5;}\r\n    static get STATE_PLAY() {return  1 << 6;}\r\n    static get STATE_PLAYING() {return  1 << 7;}\r\n    static get STATE_PAUSE() {return  1 << 8;}\r\n    static get STATE_PAUSED() {return  1 << 9;}\r\n    // static STATE_PAUSED = 1 << 6;\r\n\r\n    constructor(parent) {\r\n        super();\r\n\r\n        this.parent = parent;\r\n        this.transport = null;\r\n        this.payParser = new RTPPayloadParser();\r\n        this.rtp_channels = new Set();\r\n        this.sessions = {};\r\n        this.ontracks = null;\r\n\r\n        this.addState(RTSPClientSM.STATE_INITIAL,{\r\n        }).addState(RTSPClientSM.STATE_OPTIONS, {\r\n            activate: this.sendOptions,\r\n            finishTransition: this.onOptions\r\n        }).addState(RTSPClientSM.STATE_DESCRIBE, {\r\n            activate: this.sendDescribe,\r\n            finishTransition: this.onDescribe\r\n        }).addState(RTSPClientSM.STATE_SETUP, {\r\n            activate: this.sendSetup,\r\n            finishTransition: this.onSetup\r\n        }).addState(RTSPClientSM.STATE_STREAMS, {\r\n\r\n        }).addState(RTSPClientSM.STATE_TEARDOWN, {\r\n            activate: ()=>{\r\n                this.started = false;\r\n            },\r\n            finishTransition: ()=>{\r\n                return this.transitionTo(RTSPClientSM.STATE_INITIAL)\r\n            }\r\n        }).addTransition(RTSPClientSM.STATE_INITIAL, RTSPClientSM.STATE_OPTIONS)\r\n            .addTransition(RTSPClientSM.STATE_INITIAL, RTSPClientSM.STATE_TEARDOWN)\r\n            .addTransition(RTSPClientSM.STATE_OPTIONS, RTSPClientSM.STATE_DESCRIBE)\r\n            .addTransition(RTSPClientSM.STATE_DESCRIBE, RTSPClientSM.STATE_SETUP)\r\n            .addTransition(RTSPClientSM.STATE_SETUP, RTSPClientSM.STATE_STREAMS)\r\n            .addTransition(RTSPClientSM.STATE_TEARDOWN, RTSPClientSM.STATE_INITIAL)\r\n            // .addTransition(RTSPClientSM.STATE_STREAMS, RTSPClientSM.STATE_PAUSED)\r\n            // .addTransition(RTSPClientSM.STATE_PAUSED, RTSPClientSM.STATE_STREAMS)\r\n            .addTransition(RTSPClientSM.STATE_STREAMS, RTSPClientSM.STATE_TEARDOWN)\r\n            // .addTransition(RTSPClientSM.STATE_PAUSED, RTSPClientSM.STATE_TEARDOWN)\r\n            .addTransition(RTSPClientSM.STATE_SETUP, RTSPClientSM.STATE_TEARDOWN)\r\n            .addTransition(RTSPClientSM.STATE_DESCRIBE, RTSPClientSM.STATE_TEARDOWN)\r\n            .addTransition(RTSPClientSM.STATE_OPTIONS, RTSPClientSM.STATE_TEARDOWN);\r\n\r\n        this.reset();\r\n\r\n        this.shouldReconnect = false;\r\n\r\n        // TODO: remove listeners\r\n        // this.connection.eventSource.addEventListener('connected', ()=>{\r\n        //     if (this.shouldReconnect) {\r\n        //         this.reconnect();\r\n        //     }\r\n        // });\r\n        // this.connection.eventSource.addEventListener('disconnected', ()=>{\r\n        //     if (this.started) {\r\n        //         this.shouldReconnect = true;\r\n        //     }\r\n        // });\r\n        // this.connection.eventSource.addEventListener('data', (data)=>{\r\n        //     let channel = new DataView(data).getUint8(1);\r\n        //     if (this.rtp_channels.has(channel)) {\r\n        //         this.onRTP({packet: new Uint8Array(data, 4), type: channel});\r\n        //     }\r\n        //\r\n        // });\r\n    }\r\n\r\n    destroy() {\r\n        this.parent = null;\r\n    }\r\n\r\n    setSource(url) {\r\n        this.reset();\r\n        this.endpoint = url;\r\n        this.url = `${url.protocol}://${url.location}${url.urlpath}`;\r\n    }\r\n\r\n    onConnected() {\r\n        if (this.rtpFactory) {\r\n            this.rtpFactory = null;\r\n        }\r\n        if (this.shouldReconnect) {\r\n            this.start();\r\n        }\r\n    }\r\n\r\n    async onDisconnected() {\r\n        this.reset();\r\n        this.shouldReconnect = true;\r\n        await this.transitionTo(RTSPClientSM.STATE_TEARDOWN);\r\n        await this.transitionTo(RTSPClientSM.STATE_INITIAL);\r\n    }\r\n\r\n    start() {\r\n        if (this.currentState.name !== RTSPClientSM.STATE_STREAMS) {\r\n            return this.transitionTo(RTSPClientSM.STATE_OPTIONS);\r\n        } else {\r\n            // TODO: seekable\r\n            let promises = [];\r\n            for (let session in this.sessions) {\r\n                promises.push(this.sessions[session].sendPlay());\r\n            }\r\n            return Promise.all(promises);\r\n        }\r\n    }\r\n\r\n    onData(data) {\r\n        let channel = data[1];\r\n        if (this.rtp_channels.has(channel)) {\r\n            this.onRTP({packet: data.subarray(4), type: channel});\r\n        }\r\n    }\r\n\r\n    useRTPChannel(channel) {\r\n        this.rtp_channels.add(channel);\r\n    }\r\n\r\n    forgetRTPChannel(channel) {\r\n        this.rtp_channels.delete(channel);\r\n    }\r\n\r\n    stop() {\r\n        this.shouldReconnect = false;\r\n        let promises = [];\r\n        for (let session in this.sessions) {\r\n            promises.push(this.sessions[session].sendPause());\r\n        }\r\n        return Promise.all(promises);\r\n        // this.mse = null;\r\n    }\r\n\r\n    async reset() {\r\n        this.authenticator = '';\r\n        this.methods = [];\r\n        this.tracks = [];\r\n        this.rtpBuffer={};\r\n        for (let stream in this.streams) {\r\n            this.streams[stream].reset();\r\n        }\r\n        for (let session in this.sessions) {\r\n            this.sessions[session].reset();\r\n        }\r\n        this.streams={};\r\n        this.sessions={};\r\n        this.contentBase = \"\";\r\n        if (this.currentState) {\r\n            if (this.currentState.name != RTSPClientSM.STATE_INITIAL) {\r\n                await this.transitionTo(RTSPClientSM.STATE_TEARDOWN);\r\n                await this.transitionTo(RTSPClientSM.STATE_INITIAL);\r\n            }\r\n        } else {\r\n            await this.transitionTo(RTSPClientSM.STATE_INITIAL);\r\n        }\r\n        this.sdp = null;\r\n        this.interleaveChannelIndex = 0;\r\n        this.session = null;\r\n        this.timeOffset = {};\r\n        this.lastTimestamp = {};\r\n    }\r\n\r\n    async reconnect() {\r\n        //this.parent.eventSource.dispatchEvent('clear');\r\n        await this.reset();\r\n        if (this.currentState.name != RTSPClientSM.STATE_INITIAL) {\r\n            await this.transitionTo(RTSPClientSM.STATE_TEARDOWN);\r\n            return this.transitionTo(RTSPClientSM.STATE_OPTIONS);\r\n        } else {\r\n            return this.transitionTo(RTSPClientSM.STATE_OPTIONS);\r\n        }\r\n    }\r\n\r\n    supports(method) {\r\n        return this.methods.includes(method)\r\n    }\r\n\r\n    parse(_data) {\r\n        Log.debug(_data.payload);\r\n        let d=_data.payload.split('\\r\\n\\r\\n');\r\n        let parsed =  MessageBuilder.parse(d[0]);\r\n        let len = Number(parsed.headers['content-length']);\r\n        if (len) {\r\n            let d=_data.payload.split('\\r\\n\\r\\n');\r\n            parsed.body = d[1];\r\n        } else {\r\n            parsed.body=\"\";\r\n        }\r\n        return parsed\r\n    }\r\n\r\n    sendRequest(_cmd, _host, _params={}, _payload=null) {\r\n        this.cSeq++;\r\n        Object.assign(_params, {\r\n            CSeq: this.cSeq,\r\n            'User-Agent': RTSPClientSM.USER_AGENT\r\n        });\r\n        if (this.authenticator) {\r\n            _params['Authorization'] = this.authenticator(_cmd);\r\n        }\r\n        return this.send(MessageBuilder.build(_cmd, _host, _params, _payload), _cmd).catch((e)=>{\r\n            if ((e instanceof AuthError) && !_params['Authorization'] ) {\r\n                return this.sendRequest(_cmd, _host, _params, _payload);\r\n            } else {\r\n                throw e;\r\n            }\r\n        });\r\n    }\r\n\r\n    async send(_data, _method) {\r\n        if (this.transport) {\r\n            try {\r\n                await this.transport.ready;\r\n            } catch(e) {\r\n                this.onDisconnected();\r\n                throw e;\r\n            }\r\n            Log.debug(_data);\r\n            let response = await this.transport.send(_data);\r\n            let parsed = this.parse(response);\r\n            // TODO: parse status codes\r\n            if (parsed.code == 401 /*&& !this.authenticator */) {\r\n                Log.debug(parsed.headers['www-authenticate']);\r\n                let auth = parsed.headers['www-authenticate'];\r\n                let method = auth.substring(0, auth.indexOf(' '));\r\n                auth = auth.substr(method.length+1);\r\n                let chunks = auth.split(',');\r\n\r\n                let ep = this.parent.endpoint;\r\n                if (!ep.user || !ep.pass) {\r\n                    try {\r\n                        await this.parent.queryCredentials.call(this.parent);\r\n                    } catch (e) {\r\n                        throw new AuthError();\r\n                    }\r\n                }\r\n\r\n                if (method.toLowerCase() == 'digest') {\r\n                    let parsedChunks = {};\r\n                    for (let chunk of chunks) {\r\n                        let c = chunk.trim();\r\n                        let [k,v] = c.split('=');\r\n                        parsedChunks[k] = v.substr(1, v.length-2);\r\n                    }\r\n                    this.authenticator = (_method)=>{\r\n                        let ep = this.parent.endpoint;\r\n                        let ha1 = md5(`${ep.user}:${parsedChunks.realm}:${ep.pass}`);\r\n                        let ha2 = md5(`${_method}:${this.url}`);\r\n                        let response = md5(`${ha1}:${parsedChunks.nonce}:${ha2}`);\r\n                        let tail=''; // TODO: handle other params\r\n                        return `Digest username=\"${ep.user}\", realm=\"${parsedChunks.realm}\", nonce=\"${parsedChunks.nonce}\", uri=\"${this.url}\", response=\"${response}\"${tail}`;\r\n                    }\r\n                } else {\r\n                    this.authenticator = ()=>{return `Basic ${btoa(this.parent.endpoint.auth)}`;};\r\n                }\r\n\r\n                throw new AuthError(parsed);\r\n            }\r\n            if (parsed.code >= 300) {\r\n                Log.error(parsed.statusLine);\r\n                throw new RTSPError({msg: `RTSP error: ${parsed.code} ${parsed.statusLine}`, parsed: parsed});\r\n            }\r\n            return parsed;\r\n        } else {\r\n            return Promise.reject(\"No transport attached\");\r\n        }\r\n    }\r\n\r\n    sendOptions() {\r\n        this.reset();\r\n        this.started = true;\r\n        this.cSeq = 0;\r\n        return this.sendRequest('OPTIONS', '*', {});\r\n    }\r\n\r\n    onOptions(data) {\r\n        this.methods = data.headers['public'].split(',').map((e)=>e.trim());\r\n        this.transitionTo(RTSPClientSM.STATE_DESCRIBE);\r\n    }\r\n\r\n    sendDescribe() {\r\n        return this.sendRequest('DESCRIBE', this.url, {\r\n            'Accept': 'application/sdp'\r\n        }).then((data)=>{\r\n            this.sdp = new SDPParser();\r\n            return this.sdp.parse(data.body).catch(()=>{\r\n                throw new Error(\"Failed to parse SDP\");\r\n            }).then(()=>{return data;});\r\n        });\r\n    }\r\n\r\n    onDescribe(data) {\r\n        this.contentBase = data.headers['content-base'] || this.url;// `${this.endpoint.protocol}://${this.endpoint.location}${this.endpoint.urlpath}/`;\r\n        this.tracks = this.sdp.getMediaBlockList();\r\n        this.rtpFactory = new RTPFactory(this.sdp);\r\n\r\n        Log.log('SDP contained ' + this.tracks.length + ' track(s). Calling SETUP for each.');\r\n\r\n        if (data.headers['session']) {\r\n            this.session = data.headers['session'];\r\n        }\r\n\r\n        if (!this.tracks.length) {\r\n            throw new Error(\"No tracks in SDP\");\r\n        }\r\n\r\n        this.transitionTo(RTSPClientSM.STATE_SETUP);\r\n    }\r\n\r\n    sendSetup() {\r\n        let streams=[];\r\n        let lastPromise = null;\r\n\r\n        // TODO: select first video and first audio tracks\r\n        for (let track_type of this.tracks) {\r\n            Log.log(\"setup track: \"+track_type);\r\n            // if (track_type=='audio') continue;\r\n            // if (track_type=='video') continue;\r\n            let track = this.sdp.getMediaBlock(track_type);\r\n            if (!PayloadType.string_map[track.rtpmap[track.fmt[0]].name]) continue;\r\n\r\n            this.streams[track_type] = new RTSPStream(this, track);\r\n            let setupPromise = this.streams[track_type].start(lastPromise);\r\n            lastPromise = setupPromise;\r\n            this.parent.sampleQueues[PayloadType.string_map[track.rtpmap[track.fmt[0]].name]]=[];\r\n            this.rtpBuffer[track.fmt[0]]=[];\r\n            streams.push(setupPromise.then(({track, data})=>{\r\n                let timeOffset = 0;\r\n                this.timeOffset[track.fmt[0]] = 0;\r\n                try {\r\n                    let rtp_info = data.headers[\"rtp-info\"].split(';');\r\n                    for (let chunk of rtp_info) {\r\n                        let [key, val] = chunk.split(\"=\");\r\n                        if (key === \"rtptime\") {\r\n                            this.timeOffset[track.fmt[0]] = 0;//Number(val);\r\n                        }\r\n                    }\r\n                } catch (e) {\r\n                    // new Date().getTime();\r\n                }\r\n                let params = {\r\n                    timescale: 0,\r\n                    scaleFactor: 0\r\n                };\r\n                if (track.fmtp['sprop-parameter-sets']) {\r\n                    let sps_pps = track.fmtp['sprop-parameter-sets'].split(',');\r\n                    params = {\r\n                        sps:base64ToArrayBuffer(sps_pps[0]),\r\n                        pps:base64ToArrayBuffer(sps_pps[1])\r\n                    };\r\n                } else if (track.fmtp['config']) {\r\n                    let config = track.fmtp['config'];\r\n                    this.has_config = track.fmtp['cpresent']!='0';\r\n                    let generic = track.rtpmap[track.fmt[0]].name == 'MPEG4-GENERIC';\r\n                    if (generic) {\r\n                        params={config:\r\n                            AACParser.parseAudioSpecificConfig(hexToByteArray(config))\r\n                        };\r\n                        this.payParser.aacparser.setConfig(params.config);\r\n                    } else if (config) {\r\n                        // todo: parse audio specific config for mpeg4-generic\r\n                        params={config:\r\n                            AACParser.parseStreamMuxConfig(hexToByteArray(config))\r\n                        };\r\n                        this.payParser.aacparser.setConfig(params.config);\r\n                    }\r\n                }\r\n                params.duration = this.sdp.sessionBlock.range?this.sdp.sessionBlock.range[1]-this.sdp.sessionBlock.range[0]:1;\r\n                this.parent.seekable = (params.duration > 1);\r\n                let res = {\r\n                    track: track,\r\n                    offset: this.timeOffset[track.fmt[0]],\r\n                    type: PayloadType.string_map[track.rtpmap[track.fmt[0]].name],\r\n                    params: params,\r\n                    duration: params.duration\r\n                };\r\n                console.log(res, this.timeOffset);\r\n                let session = data.headers.session.split(';')[0];\r\n                if (!this.sessions[session]) {\r\n                    this.sessions[session] = new RTSPSession(this, session);\r\n                }\r\n                return res;\r\n            }));\r\n        }\r\n        return Promise.all(streams).then((tracks)=>{\r\n            let sessionPromises = [];\r\n            for (let session in this.sessions) {\r\n                sessionPromises.push(this.sessions[session].start());\r\n            }\r\n            return Promise.all(sessionPromises).then(()=>{\r\n                if (this.ontracks) {\r\n                    this.ontracks(tracks);\r\n                }\r\n            })\r\n        }).catch((e)=>{\r\n            console.error(e);\r\n            this.stop();\r\n            this.reset();\r\n        });\r\n    }\r\n\r\n    onSetup() {\r\n        this.transitionTo(RTSPClientSM.STATE_STREAMS);\r\n    }\r\n\r\n    onRTP(_data) {\r\n        if (!this.rtpFactory) return;\r\n\r\n        let rtp = this.rtpFactory.build(_data.packet, this.sdp);\r\n        if (!rtp.type) {\r\n            return;\r\n        }\r\n\r\n        if (this.timeOffset[rtp.pt] === undefined) {\r\n            //console.log(rtp.pt, this.timeOffset[rtp.pt]);\r\n            this.rtpBuffer[rtp.pt].push(rtp);\r\n            return;\r\n        }\r\n\r\n        if (this.lastTimestamp[rtp.pt] === undefined) {\r\n            this.lastTimestamp[rtp.pt] = rtp.timestamp-this.timeOffset[rtp.pt];\r\n        }\r\n\r\n        let queue = this.rtpBuffer[rtp.pt];\r\n        queue.push(rtp);\r\n\r\n        while (queue.length) {\r\n            let rtp = queue.shift();\r\n\r\n            rtp.timestamp = rtp.timestamp-this.timeOffset[rtp.pt]-this.lastTimestamp[rtp.pt];\r\n            // TODO: overflow\r\n            // if (rtp.timestamp < 0) {\r\n            //     rtp.timestamp = (rtp.timestamp + Number.MAX_SAFE_INTEGER) % 0x7fffffff;\r\n            // }\r\n            if (rtp.media) {\r\n                let pay = this.payParser.parse(rtp);\r\n                if (pay) {\r\n                    // if (typeof pay == typeof []) {\r\n                    this.parent.sampleQueues[rtp.type].push(pay);\r\n                    // } else {\r\n                    //     this.parent.sampleQueues[rtp.type].push([pay]);\r\n                    // }\r\n                } else {\r\n                    // this.parent.sampleQueues[rtp.type].push(pay);\r\n                }\r\n            }\r\n        }\r\n        // this.remuxer.feedRTP();\r\n    }\r\n}\r\n","// ASN.1 JavaScript decoder\r\n// Copyright (c) 2008-2013 Lapo Luchini <lapo@lapo.it>\r\n\r\n// Permission to use, copy, modify, and/or distribute this software for any\r\n// purpose with or without fee is hereby granted, provided that the above\r\n// copyright notice and this permission notice appear in all copies.\r\n// \r\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\r\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\r\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\r\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\r\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\r\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\r\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\r\n\r\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\r\n/*global oids */\r\n\r\nvar hardLimit = 100,\r\n    ellipsis = \"\\u2026\",\r\n    DOM = {\r\n        tag: function (tagName, className) {\r\n            var t = document.createElement(tagName);\r\n            t.className = className;\r\n            return t;\r\n        },\r\n        text: function (str) {\r\n            return document.createTextNode(str);\r\n        }\r\n    };\r\n\r\nclass Stream {\r\n    static get hexDigits() {\r\n        return \"0123456789ABCDEF\";\r\n    };\r\n\r\n    static get reTime() {\r\n        return /^((?:1[89]|2\\d)?\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\r\n    }\r\n\r\n\r\n    constructor(enc, pos) {\r\n        if (enc instanceof Stream) {\r\n            this.enc = enc.enc;\r\n            this.pos = enc.pos;\r\n        } else {\r\n            this.enc = enc;\r\n            this.pos = pos;\r\n        }\r\n    }\r\n\r\n    get(pos) {\r\n        if (pos === undefined)\r\n            pos = this.pos++;\r\n        if (pos >= this.enc.length)\r\n            throw 'Requesting byte offset ' + pos + ' on a stream of length ' + this.enc.length;\r\n        return this.enc[pos];\r\n    };\r\n\r\n    hexByte(b) {\r\n        return Stream.hexDigits.charAt((b >> 4) & 0xF) + Stream.hexDigits.charAt(b & 0xF);\r\n    };\r\n\r\n    hexDump(start, end, raw) {\r\n        var s = \"\";\r\n        for (var i = start; i < end; ++i) {\r\n            s += this.hexByte(this.get(i));\r\n            if (raw !== true)\r\n                switch (i & 0xF) {\r\n                    case 0x7:\r\n                        s += \"  \";\r\n                        break;\r\n                    case 0xF:\r\n                        s += \"\\n\";\r\n                        break;\r\n                    default:\r\n                        s += \" \";\r\n                }\r\n        }\r\n        return s;\r\n    };\r\n\r\n    parseStringISO(start, end) {\r\n        var s = \"\";\r\n        for (var i = start; i < end; ++i)\r\n            s += String.fromCharCode(this.get(i));\r\n        return s;\r\n    };\r\n\r\n    parseStringUTF(start, end) {\r\n        var s = \"\";\r\n        for (var i = start; i < end;) {\r\n            var c = this.get(i++);\r\n            if (c < 128)\r\n                s += String.fromCharCode(c);\r\n            else if ((c > 191) && (c < 224))\r\n                s += String.fromCharCode(((c & 0x1F) << 6) | (this.get(i++) & 0x3F));\r\n            else\r\n                s += String.fromCharCode(((c & 0x0F) << 12) | ((this.get(i++) & 0x3F) << 6) | (this.get(i++) & 0x3F));\r\n        }\r\n        return s;\r\n    };\r\n\r\n    parseStringBMP(start, end) {\r\n        var str = \"\"\r\n        for (var i = start; i < end; i += 2) {\r\n            var high_byte = this.get(i);\r\n            var low_byte = this.get(i + 1);\r\n            str += String.fromCharCode((high_byte << 8) + low_byte);\r\n        }\r\n\r\n        return str;\r\n    };\r\n\r\n    parseTime(start, end) {\r\n        var s = this.parseStringISO(start, end),\r\n            m = Stream.reTime.exec(s);\r\n        if (!m)\r\n            return \"Unrecognized time: \" + s;\r\n        s = m[1] + \"-\" + m[2] + \"-\" + m[3] + \" \" + m[4];\r\n        if (m[5]) {\r\n            s += \":\" + m[5];\r\n            if (m[6]) {\r\n                s += \":\" + m[6];\r\n                if (m[7])\r\n                    s += \".\" + m[7];\r\n            }\r\n        }\r\n        if (m[8]) {\r\n            s += \" UTC\";\r\n            if (m[8] != 'Z') {\r\n                s += m[8];\r\n                if (m[9])\r\n                    s += \":\" + m[9];\r\n            }\r\n        }\r\n        return s;\r\n    };\r\n\r\n    parseInteger(start, end) {\r\n        //TODO support negative numbers\r\n        var len = end - start;\r\n        if (len > 4) {\r\n            len <<= 3;\r\n            var s = this.get(start);\r\n            if (s === 0)\r\n                len -= 8;\r\n            else\r\n                while (s < 128) {\r\n                    s <<= 1;\r\n                    --len;\r\n                }\r\n            return \"(\" + len + \" bit)\";\r\n        }\r\n        var n = 0;\r\n        for (var i = start; i < end; ++i)\r\n            n = (n << 8) | this.get(i);\r\n        return n;\r\n    };\r\n\r\n    parseBitString(start, end) {\r\n        var unusedBit = this.get(start),\r\n            lenBit = ((end - start - 1) << 3) - unusedBit,\r\n            s = \"(\" + lenBit + \" bit)\";\r\n        if (lenBit <= 20) {\r\n            var skip = unusedBit;\r\n            s += \" \";\r\n            for (var i = end - 1; i > start; --i) {\r\n                var b = this.get(i);\r\n                for (var j = skip; j < 8; ++j)\r\n                    s += (b >> j) & 1 ? \"1\" : \"0\";\r\n                skip = 0;\r\n            }\r\n        }\r\n        return s;\r\n    };\r\n\r\n    parseOctetString(start, end) {\r\n        var len = end - start,\r\n            s = \"(\" + len + \" byte) \";\r\n        if (len > hardLimit)\r\n            end = start + hardLimit;\r\n        for (var i = start; i < end; ++i)\r\n            s += this.hexByte(this.get(i)); //TODO: also try Latin1?\r\n        if (len > hardLimit)\r\n            s += ellipsis;\r\n        return s;\r\n    };\r\n\r\n    parseOID(start, end) {\r\n        var s = '',\r\n            n = 0,\r\n            bits = 0;\r\n        for (var i = start; i < end; ++i) {\r\n            var v = this.get(i);\r\n            n = (n << 7) | (v & 0x7F);\r\n            bits += 7;\r\n            if (!(v & 0x80)) { // finished\r\n                if (s === '') {\r\n                    var m = n < 80 ? n < 40 ? 0 : 1 : 2;\r\n                    s = m + \".\" + (n - m * 40);\r\n                } else\r\n                    s += \".\" + ((bits >= 31) ? \"bigint\" : n);\r\n                n = bits = 0;\r\n            }\r\n        }\r\n        return s;\r\n    };\r\n}\r\n\r\nexport class ASN1 {\r\n    static get reSeemsASCII() {\r\n        return /^[ -~]+$/;\r\n    }\r\n\r\n    constructor(stream, header, length, tag, sub) {\r\n        this.stream = stream;\r\n        this.header = header;\r\n        this.length = length;\r\n        this.tag = tag;\r\n        this.sub = sub;\r\n    }\r\n\r\n    typeName() {\r\n        if (this.tag === undefined)\r\n            return \"unknown\";\r\n        var tagClass = this.tag >> 6,\r\n            tagConstructed = (this.tag >> 5) & 1,\r\n            tagNumber = this.tag & 0x1F;\r\n        switch (tagClass) {\r\n            case 0: // universal\r\n                switch (tagNumber) {\r\n                    case 0x00:\r\n                        return \"EOC\";\r\n                    case 0x01:\r\n                        return \"BOOLEAN\";\r\n                    case 0x02:\r\n                        return \"INTEGER\";\r\n                    case 0x03:\r\n                        return \"BIT_STRING\";\r\n                    case 0x04:\r\n                        return \"OCTET_STRING\";\r\n                    case 0x05:\r\n                        return \"NULL\";\r\n                    case 0x06:\r\n                        return \"OBJECT_IDENTIFIER\";\r\n                    case 0x07:\r\n                        return \"ObjectDescriptor\";\r\n                    case 0x08:\r\n                        return \"EXTERNAL\";\r\n                    case 0x09:\r\n                        return \"REAL\";\r\n                    case 0x0A:\r\n                        return \"ENUMERATED\";\r\n                    case 0x0B:\r\n                        return \"EMBEDDED_PDV\";\r\n                    case 0x0C:\r\n                        return \"UTF8String\";\r\n                    case 0x10:\r\n                        return \"SEQUENCE\";\r\n                    case 0x11:\r\n                        return \"SET\";\r\n                    case 0x12:\r\n                        return \"NumericString\";\r\n                    case 0x13:\r\n                        return \"PrintableString\"; // ASCII subset\r\n                    case 0x14:\r\n                        return \"TeletexString\"; // aka T61String\r\n                    case 0x15:\r\n                        return \"VideotexString\";\r\n                    case 0x16:\r\n                        return \"IA5String\"; // ASCII\r\n                    case 0x17:\r\n                        return \"UTCTime\";\r\n                    case 0x18:\r\n                        return \"GeneralizedTime\";\r\n                    case 0x19:\r\n                        return \"GraphicString\";\r\n                    case 0x1A:\r\n                        return \"VisibleString\"; // ASCII subset\r\n                    case 0x1B:\r\n                        return \"GeneralString\";\r\n                    case 0x1C:\r\n                        return \"UniversalString\";\r\n                    case 0x1E:\r\n                        return \"BMPString\";\r\n                    default:\r\n                        return \"Universal_\" + tagNumber.toString(16);\r\n                }\r\n            case 1:\r\n                return \"Application_\" + tagNumber.toString(16);\r\n            case 2:\r\n                return \"[\" + tagNumber + \"]\"; // Context\r\n            case 3:\r\n                return \"Private_\" + tagNumber.toString(16);\r\n        }\r\n    }\r\n\r\n    content() {\r\n        if (this.tag === undefined)\r\n            return null;\r\n        var tagClass = this.tag >> 6,\r\n            tagNumber = this.tag & 0x1F,\r\n            content = this.posContent(),\r\n            len = Math.abs(this.length);\r\n        if (tagClass !== 0) { // universal\r\n            if (this.sub !== null)\r\n                return \"(\" + this.sub.length + \" elem)\";\r\n            //TODO: TRY TO PARSE ASCII STRING\r\n            var s = this.stream.parseStringISO(content, content + Math.min(len, hardLimit));\r\n            if (ASN1.reSeemsASCII.test(s))\r\n                return s.substring(0, 2 * hardLimit) + ((s.length > 2 * hardLimit) ? ellipsis : \"\");\r\n            else\r\n                return this.stream.parseOctetString(content, content + len);\r\n        }\r\n        switch (tagNumber) {\r\n            case 0x01: // BOOLEAN\r\n                return (this.stream.get(content) === 0) ? \"false\" : \"true\";\r\n            case 0x02: // INTEGER\r\n                return this.stream.parseInteger(content, content + len);\r\n            case 0x03: // BIT_STRING\r\n                return this.sub ? \"(\" + this.sub.length + \" elem)\" :\r\n                    this.stream.parseBitString(content, content + len);\r\n            case 0x04: // OCTET_STRING\r\n                return this.sub ? \"(\" + this.sub.length + \" elem)\" :\r\n                    this.stream.parseOctetString(content, content + len);\r\n            //case 0x05: // NULL\r\n            case 0x06: // OBJECT_IDENTIFIER\r\n                return this.stream.parseOID(content, content + len);\r\n            //case 0x07: // ObjectDescriptor\r\n            //case 0x08: // EXTERNAL\r\n            //case 0x09: // REAL\r\n            //case 0x0A: // ENUMERATED\r\n            //case 0x0B: // EMBEDDED_PDV\r\n            case 0x10: // SEQUENCE\r\n            case 0x11: // SET\r\n                return \"(\" + this.sub.length + \" elem)\";\r\n            case 0x0C: // UTF8String\r\n                return this.stream.parseStringUTF(content, content + len);\r\n            case 0x12: // NumericString\r\n            case 0x13: // PrintableString\r\n            case 0x14: // TeletexString\r\n            case 0x15: // VideotexString\r\n            case 0x16: // IA5String\r\n            //case 0x19: // GraphicString\r\n            case 0x1A: // VisibleString\r\n                //case 0x1B: // GeneralString\r\n                //case 0x1C: // UniversalString\r\n                return this.stream.parseStringISO(content, content + len);\r\n            case 0x1E: // BMPString\r\n                return this.stream.parseStringBMP(content, content + len);\r\n            case 0x17: // UTCTime\r\n            case 0x18: // GeneralizedTime\r\n                return this.stream.parseTime(content, content + len);\r\n        }\r\n        return null;\r\n    };\r\n\r\n    toString() {\r\n        return this.typeName() + \"@\" + this.stream.pos + \"[header:\" + this.header + \",length:\" + this.length + \",sub:\" + ((this.sub === null) ? 'null' : this.sub.length) + \"]\";\r\n    };\r\n\r\n    print(indent) {\r\n        if (indent === undefined) indent = '';\r\n        document.writeln(indent + this);\r\n        if (this.sub !== null) {\r\n            indent += '  ';\r\n            for (var i = 0, max = this.sub.length; i < max; ++i)\r\n                this.sub[i].print(indent);\r\n        }\r\n    };\r\n\r\n    toPrettyString(indent) {\r\n        if (indent === undefined) indent = '';\r\n        var s = indent + this.typeName() + \" @\" + this.stream.pos;\r\n        if (this.length >= 0)\r\n            s += \"+\";\r\n        s += this.length;\r\n        if (this.tag & 0x20)\r\n            s += \" (constructed)\";\r\n        else if (((this.tag == 0x03) || (this.tag == 0x04)) && (this.sub !== null))\r\n            s += \" (encapsulates)\";\r\n        s += \"\\n\";\r\n        if (this.sub !== null) {\r\n            indent += '  ';\r\n            for (var i = 0, max = this.sub.length; i < max; ++i)\r\n                s += this.sub[i].toPrettyString(indent);\r\n        }\r\n        return s;\r\n    };\r\n\r\n    toDOM() {\r\n        var node = DOM.tag(\"div\", \"node\");\r\n        node.asn1 = this;\r\n        var head = DOM.tag(\"div\", \"head\");\r\n        var s = this.typeName().replace(/_/g, \" \");\r\n        head.innerHTML = s;\r\n        var content = this.content();\r\n        if (content !== null) {\r\n            content = String(content).replace(/</g, \"&lt;\");\r\n            var preview = DOM.tag(\"span\", \"preview\");\r\n            preview.appendChild(DOM.text(content));\r\n            head.appendChild(preview);\r\n        }\r\n        node.appendChild(head);\r\n        this.node = node;\r\n        this.head = head;\r\n        var value = DOM.tag(\"div\", \"value\");\r\n        s = \"Offset: \" + this.stream.pos + \"<br/>\";\r\n        s += \"Length: \" + this.header + \"+\";\r\n        if (this.length >= 0)\r\n            s += this.length;\r\n        else\r\n            s += (-this.length) + \" (undefined)\";\r\n        if (this.tag & 0x20)\r\n            s += \"<br/>(constructed)\";\r\n        else if (((this.tag == 0x03) || (this.tag == 0x04)) && (this.sub !== null))\r\n            s += \"<br/>(encapsulates)\";\r\n        //TODO if (this.tag == 0x03) s += \"Unused bits: \"\r\n        if (content !== null) {\r\n            s += \"<br/>Value:<br/><b>\" + content + \"</b>\";\r\n            if ((typeof oids === 'object') && (this.tag == 0x06)) {\r\n                var oid = oids[content];\r\n                if (oid) {\r\n                    if (oid.d) s += \"<br/>\" + oid.d;\r\n                    if (oid.c) s += \"<br/>\" + oid.c;\r\n                    if (oid.w) s += \"<br/>(warning!)\";\r\n                }\r\n            }\r\n        }\r\n        value.innerHTML = s;\r\n        node.appendChild(value);\r\n        var sub = DOM.tag(\"div\", \"sub\");\r\n        if (this.sub !== null) {\r\n            for (var i = 0, max = this.sub.length; i < max; ++i)\r\n                sub.appendChild(this.sub[i].toDOM());\r\n        }\r\n        node.appendChild(sub);\r\n        head.onclick = function () {\r\n            node.className = (node.className == \"node collapsed\") ? \"node\" : \"node collapsed\";\r\n        };\r\n        return node;\r\n    };\r\n\r\n    posStart() {\r\n        return this.stream.pos;\r\n    };\r\n\r\n    posContent() {\r\n        return this.stream.pos + this.header;\r\n    };\r\n\r\n    posEnd() {\r\n        return this.stream.pos + this.header + Math.abs(this.length);\r\n    };\r\n\r\n    fakeHover(current) {\r\n        this.node.className += \" hover\";\r\n        if (current)\r\n            this.head.className += \" hover\";\r\n    };\r\n\r\n    fakeOut(current) {\r\n        var re = / ?hover/;\r\n        this.node.className = this.node.className.replace(re, \"\");\r\n        if (current)\r\n            this.head.className = this.head.className.replace(re, \"\");\r\n    };\r\n\r\n    toHexDOM_sub(node, className, stream, start, end) {\r\n        if (start >= end)\r\n            return;\r\n        var sub = DOM.tag(\"span\", className);\r\n        sub.appendChild(DOM.text(\r\n            stream.hexDump(start, end)));\r\n        node.appendChild(sub);\r\n    };\r\n\r\n    toHexDOM(root) {\r\n        var node = DOM.tag(\"span\", \"hex\");\r\n        if (root === undefined) root = node;\r\n        this.head.hexNode = node;\r\n        this.head.onmouseover = function () {\r\n            this.hexNode.className = \"hexCurrent\";\r\n        };\r\n        this.head.onmouseout = function () {\r\n            this.hexNode.className = \"hex\";\r\n        };\r\n        node.asn1 = this;\r\n        node.onmouseover = function () {\r\n            var current = !root.selected;\r\n            if (current) {\r\n                root.selected = this.asn1;\r\n                this.className = \"hexCurrent\";\r\n            }\r\n            this.asn1.fakeHover(current);\r\n        };\r\n        node.onmouseout = function () {\r\n            var current = (root.selected == this.asn1);\r\n            this.asn1.fakeOut(current);\r\n            if (current) {\r\n                root.selected = null;\r\n                this.className = \"hex\";\r\n            }\r\n        };\r\n        this.toHexDOM_sub(node, \"tag\", this.stream, this.posStart(), this.posStart() + 1);\r\n        this.toHexDOM_sub(node, (this.length >= 0) ? \"dlen\" : \"ulen\", this.stream, this.posStart() + 1, this.posContent());\r\n        if (this.sub === null)\r\n            node.appendChild(DOM.text(\r\n                this.stream.hexDump(this.posContent(), this.posEnd())));\r\n        else if (this.sub.length > 0) {\r\n            var first = this.sub[0];\r\n            var last = this.sub[this.sub.length - 1];\r\n            this.toHexDOM_sub(node, \"intro\", this.stream, this.posContent(), first.posStart());\r\n            for (var i = 0, max = this.sub.length; i < max; ++i)\r\n                node.appendChild(this.sub[i].toHexDOM(root));\r\n            this.toHexDOM_sub(node, \"outro\", this.stream, last.posEnd(), this.posEnd());\r\n        }\r\n        return node;\r\n    };\r\n\r\n    toHexString(root) {\r\n        return this.stream.hexDump(this.posStart(), this.posEnd(), true);\r\n    };\r\n\r\n}\r\n\r\nASN1.decodeLength = function (stream) {\r\n    var buf = stream.get(),\r\n        len = buf & 0x7F;\r\n    if (len == buf)\r\n        return len;\r\n    if (len > 3)\r\n        throw \"Length over 24 bits not supported at position \" + (stream.pos - 1);\r\n    if (len === 0)\r\n        return -1; // undefined\r\n    buf = 0;\r\n    for (var i = 0; i < len; ++i)\r\n        buf = (buf << 8) | stream.get();\r\n    return buf;\r\n};\r\nASN1.hasContent = function (tag, len, stream) {\r\n    if (tag & 0x20) // constructed\r\n        return true;\r\n    if ((tag < 0x03) || (tag > 0x04))\r\n        return false;\r\n    var p = new Stream(stream);\r\n    if (tag == 0x03) p.get(); // BitString unused bits, must be in [0, 7]\r\n    var subTag = p.get();\r\n    if ((subTag >> 6) & 0x01) // not (universal or context)\r\n        return false;\r\n    try {\r\n        var subLength = ASN1.decodeLength(p);\r\n        return ((p.pos - stream.pos) + subLength == len);\r\n    } catch (exception) {\r\n        return false;\r\n    }\r\n};\r\nASN1.decode = function (stream) {\r\n    if (!(stream instanceof Stream))\r\n        stream = new Stream(stream, 0);\r\n    var streamStart = new Stream(stream),\r\n        tag = stream.get(),\r\n        len = ASN1.decodeLength(stream),\r\n        header = stream.pos - streamStart.pos,\r\n        sub = null;\r\n    if (ASN1.hasContent(tag, len, stream)) {\r\n        // it has content, so we decode it\r\n        var start = stream.pos;\r\n        if (tag == 0x03) stream.get(); // skip BitString unused bits, must be in [0, 7]\r\n        sub = [];\r\n        if (len >= 0) {\r\n            // definite length\r\n            var end = start + len;\r\n            while (stream.pos < end)\r\n                sub[sub.length] = ASN1.decode(stream);\r\n            if (stream.pos != end)\r\n                throw \"Content size is not correct for container starting at offset \" + start;\r\n        } else {\r\n            // undefined length\r\n            try {\r\n                for (; ;) {\r\n                    var s = ASN1.decode(stream);\r\n                    if (s.tag === 0)\r\n                        break;\r\n                    sub[sub.length] = s;\r\n                }\r\n                len = start - stream.pos;\r\n            } catch (e) {\r\n                throw \"Exception while decoding undefined length content: \" + e;\r\n            }\r\n        }\r\n    } else\r\n        stream.pos += len; // skip content\r\n    return new ASN1(streamStart, header, len, tag, sub);\r\n};\r\nASN1.test = function () {\r\n    var test = [\r\n        {value: [0x27], expected: 0x27},\r\n        {value: [0x81, 0xC9], expected: 0xC9},\r\n        {value: [0x83, 0xFE, 0xDC, 0xBA], expected: 0xFEDCBA}\r\n    ];\r\n    for (var i = 0, max = test.length; i < max; ++i) {\r\n        var pos = 0,\r\n            stream = new Stream(test[i].value, 0),\r\n            res = ASN1.decodeLength(stream);\r\n        if (res != test[i].expected)\r\n            document.write(\"In test[\" + i + \"] expected \" + test[i].expected + \" got \" + res + \"\\n\");\r\n    }\r\n};","// prng4.js - uses Arcfour as a PRNG\r\n\r\nexport class Arcfour {\r\n  constructor() {\r\n    this.i = 0;\r\n    this.j = 0;\r\n    this.S = [];\r\n  }\r\n}\r\n\r\n// Initialize arcfour context from key, an array of ints, each from [0..255]\r\nfunction ARC4init(key) {\r\n  var i, j, t;\r\n  for(i = 0; i < 256; ++i)\r\n    this.S[i] = i;\r\n  j = 0;\r\n  for(i = 0; i < 256; ++i) {\r\n    j = (j + this.S[i] + key[i % key.length]) & 255;\r\n    t = this.S[i];\r\n    this.S[i] = this.S[j];\r\n    this.S[j] = t;\r\n  }\r\n  this.i = 0;\r\n  this.j = 0;\r\n}\r\n\r\nfunction ARC4next() {\r\n  var t;\r\n  this.i = (this.i + 1) & 255;\r\n  this.j = (this.j + this.S[this.i]) & 255;\r\n  t = this.S[this.i];\r\n  this.S[this.i] = this.S[this.j];\r\n  this.S[this.j] = t;\r\n  return this.S[(t + this.S[this.i]) & 255];\r\n}\r\n\r\nArcfour.prototype.init = ARC4init;\r\nArcfour.prototype.next = ARC4next;\r\n\r\n// Plug in your RNG constructor here\r\nexport function prng_newstate() {\r\n  return new Arcfour();\r\n}\r\n\r\n// Pool size must be a multiple of 4 and greater than 32.\r\n// An array of bytes the size of the pool will be passed to init()\r\nexport var rng_psize = 256;\r\n","import {rng_psize} from \"./prng4\";\r\nimport {prng_newstate} from \"./prng4\";\r\n// Random number generator - requires a PRNG backend, e.g. prng4.js\r\nvar rng_state;\r\nvar rng_pool;\r\nvar rng_pptr;\r\n\r\n// Initialize the pool with junk if needed.\r\nif(rng_pool == null) {\r\n  rng_pool = new Array();\r\n  rng_pptr = 0;\r\n  var t;\r\n  if(window.crypto && window.crypto.getRandomValues) {\r\n    // Extract entropy (2048 bits) from RNG if available\r\n    var z = new Uint32Array(256);\r\n    window.crypto.getRandomValues(z);\r\n    for (t = 0; t < z.length; ++t)\r\n      rng_pool[rng_pptr++] = z[t] & 255;\r\n  }\r\n\r\n  // Use mouse events for entropy, if we do not have enough entropy by the time\r\n  // we need it, entropy will be generated by Math.random.\r\n  var onMouseMoveListener = function(ev) {\r\n    this.count = this.count || 0;\r\n    if (this.count >= 256 || rng_pptr >= rng_psize) {\r\n      if (window.removeEventListener)\r\n        window.removeEventListener(\"mousemove\", onMouseMoveListener, false);\r\n      else if (window.detachEvent)\r\n        window.detachEvent(\"onmousemove\", onMouseMoveListener);\r\n      return;\r\n    }\r\n    try {\r\n      var mouseCoordinates = ev.x + ev.y;\r\n      rng_pool[rng_pptr++] = mouseCoordinates & 255;\r\n      this.count += 1;\r\n    } catch (e) {\r\n      // Sometimes Firefox will deny permission to access event properties for some reason. Ignore.\r\n    }\r\n  };\r\n  if (window.addEventListener)\r\n    window.addEventListener(\"mousemove\", onMouseMoveListener, false);\r\n  else if (window.attachEvent)\r\n    window.attachEvent(\"onmousemove\", onMouseMoveListener);\r\n\r\n}\r\n\r\nfunction rng_get_byte() {\r\n  if(rng_state == null) {\r\n    rng_state = prng_newstate();\r\n    // At this point, we may not have collected enough entropy.  If not, fall back to Math.random\r\n    while (rng_pptr < rng_psize) {\r\n      var random = Math.floor(65536 * Math.random());\r\n      rng_pool[rng_pptr++] = random & 255;\r\n    }\r\n    rng_state.init(rng_pool);\r\n    for(rng_pptr = 0; rng_pptr < rng_pool.length; ++rng_pptr)\r\n      rng_pool[rng_pptr] = 0;\r\n    rng_pptr = 0;\r\n  }\r\n  // TODO: allow reseeding after first request\r\n  return rng_state.next();\r\n}\r\n\r\nfunction rng_get_bytes(ba) {\r\n  var i;\r\n  for(i = 0; i < ba.length; ++i) ba[i] = rng_get_byte();\r\n}\r\n\r\nexport class SecureRandom {\r\n  constructor(){}\r\n}\r\n\r\nSecureRandom.prototype.nextBytes = rng_get_bytes;\r\n","// Copyright (c) 2005  Tom Wu\r\n// All Rights Reserved.\r\n// See \"LICENSE\" for details.\r\n\r\n// Basic JavaScript BN library - subset useful for RSA encryption.\r\n\r\n// Bits per digit\r\nvar dbits;\r\n\r\n// JavaScript engine analysis\r\nvar canary = 0xdeadbeefcafe;\r\nvar j_lm = ((canary&0xffffff)==0xefcafe);\r\n\r\n// (public) Constructor\r\nexport class BigInteger {\r\n  constructor(a,b,c) {\r\n    if (a != null)\r\n      if (\"number\" == typeof a) this.fromNumber(a, b, c);\r\n      else if (b == null && \"string\" != typeof a) this.fromString(a, 256);\r\n      else this.fromString(a, b);\r\n  }\r\n}\r\n\r\n// return new, unset BigInteger\r\nexport function nbi() { return new BigInteger(null); }\r\n\r\n// am: Compute w_j += (x*this_i), propagate carries,\r\n// c is initial carry, returns final carry.\r\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\r\n// We need to select the fastest one that works in this environment.\r\n\r\n// am1: use a single mult and divide to get the high bits,\r\n// max digit bits should be 26 because\r\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\r\nfunction am1(i,x,w,j,c,n) {\r\n  while(--n >= 0) {\r\n    var v = x*this[i++]+w[j]+c;\r\n    c = Math.floor(v/0x4000000);\r\n    w[j++] = v&0x3ffffff;\r\n  }\r\n  return c;\r\n}\r\n// am2 avoids a big mult-and-extract completely.\r\n// Max digit bits should be <= 30 because we do bitwise ops\r\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\r\nfunction am2(i,x,w,j,c,n) {\r\n  var xl = x&0x7fff, xh = x>>15;\r\n  while(--n >= 0) {\r\n    var l = this[i]&0x7fff;\r\n    var h = this[i++]>>15;\r\n    var m = xh*l+h*xl;\r\n    l = xl*l+((m&0x7fff)<<15)+w[j]+(c&0x3fffffff);\r\n    c = (l>>>30)+(m>>>15)+xh*h+(c>>>30);\r\n    w[j++] = l&0x3fffffff;\r\n  }\r\n  return c;\r\n}\r\n// Alternately, set max digit bits to 28 since some\r\n// browsers slow down when dealing with 32-bit numbers.\r\nfunction am3(i,x,w,j,c,n) {\r\n  var xl = x&0x3fff, xh = x>>14;\r\n  while(--n >= 0) {\r\n    var l = this[i]&0x3fff;\r\n    var h = this[i++]>>14;\r\n    var m = xh*l+h*xl;\r\n    l = xl*l+((m&0x3fff)<<14)+w[j]+c;\r\n    c = (l>>28)+(m>>14)+xh*h;\r\n    w[j++] = l&0xfffffff;\r\n  }\r\n  return c;\r\n}\r\nif(j_lm && (navigator.appName == \"Microsoft Internet Explorer\")) {\r\n  BigInteger.prototype.am = am2;\r\n  dbits = 30;\r\n}\r\nelse if(j_lm && (navigator.appName != \"Netscape\")) {\r\n  BigInteger.prototype.am = am1;\r\n  dbits = 26;\r\n}\r\nelse { // Mozilla/Netscape seems to prefer am3\r\n  BigInteger.prototype.am = am3;\r\n  dbits = 28;\r\n}\r\n\r\nBigInteger.prototype.DB = dbits;\r\nBigInteger.prototype.DM = ((1<<dbits)-1);\r\nBigInteger.prototype.DV = (1<<dbits);\r\n\r\nvar BI_FP = 52;\r\nBigInteger.prototype.FV = Math.pow(2,BI_FP);\r\nBigInteger.prototype.F1 = BI_FP-dbits;\r\nBigInteger.prototype.F2 = 2*dbits-BI_FP;\r\n\r\n// Digit conversions\r\nvar BI_RM = \"0123456789abcdefghijklmnopqrstuvwxyz\";\r\nvar BI_RC = [];\r\nvar rr,vv;\r\nrr = \"0\".charCodeAt(0);\r\nfor(vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;\r\nrr = \"a\".charCodeAt(0);\r\nfor(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\r\nrr = \"A\".charCodeAt(0);\r\nfor(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\r\n\r\nexport function int2char(n) { return BI_RM.charAt(n); }\r\nexport function intAt(s,i) {\r\n  var c = BI_RC[s.charCodeAt(i)];\r\n  return (c==null)?-1:c;\r\n}\r\n\r\n// (protected) copy this to r\r\nfunction bnpCopyTo(r) {\r\n  for(var i = this.t-1; i >= 0; --i) r[i] = this[i];\r\n  r.t = this.t;\r\n  r.s = this.s;\r\n}\r\n\r\n// (protected) set from integer value x, -DV <= x < DV\r\nfunction bnpFromInt(x) {\r\n  this.t = 1;\r\n  this.s = (x<0)?-1:0;\r\n  if(x > 0) this[0] = x;\r\n  else if(x < -1) this[0] = x+this.DV;\r\n  else this.t = 0;\r\n}\r\n\r\n// return bigint initialized to value\r\nexport function nbv(i) { var r = nbi(); r.fromInt(i); return r; }\r\n\r\n// (protected) set from string and radix\r\nfunction bnpFromString(s,b) {\r\n  var k;\r\n  if(b == 16) k = 4;\r\n  else if(b == 8) k = 3;\r\n  else if(b == 256) k = 8; // byte array\r\n  else if(b == 2) k = 1;\r\n  else if(b == 32) k = 5;\r\n  else if(b == 4) k = 2;\r\n  else { this.fromRadix(s,b); return; }\r\n  this.t = 0;\r\n  this.s = 0;\r\n  var i = s.length, mi = false, sh = 0;\r\n  while(--i >= 0) {\r\n    var x = (k==8)?s[i]&0xff:intAt(s,i);\r\n    if(x < 0) {\r\n      if(s.charAt(i) == \"-\") mi = true;\r\n      continue;\r\n    }\r\n    mi = false;\r\n    if(sh == 0)\r\n      this[this.t++] = x;\r\n    else if(sh+k > this.DB) {\r\n      this[this.t-1] |= (x&((1<<(this.DB-sh))-1))<<sh;\r\n      this[this.t++] = (x>>(this.DB-sh));\r\n    }\r\n    else\r\n      this[this.t-1] |= x<<sh;\r\n    sh += k;\r\n    if(sh >= this.DB) sh -= this.DB;\r\n  }\r\n  if(k == 8 && (s[0]&0x80) != 0) {\r\n    this.s = -1;\r\n    if(sh > 0) this[this.t-1] |= ((1<<(this.DB-sh))-1)<<sh;\r\n  }\r\n  this.clamp();\r\n  if(mi) BigInteger.ZERO.subTo(this,this);\r\n}\r\n\r\n// (protected) clamp off excess high words\r\nfunction bnpClamp() {\r\n  var c = this.s&this.DM;\r\n  while(this.t > 0 && this[this.t-1] == c) --this.t;\r\n}\r\n\r\n// (public) return string representation in given radix\r\nfunction bnToString(b) {\r\n  if(this.s < 0) return \"-\"+this.negate().toString(b);\r\n  var k;\r\n  if(b == 16) k = 4;\r\n  else if(b == 8) k = 3;\r\n  else if(b == 2) k = 1;\r\n  else if(b == 32) k = 5;\r\n  else if(b == 4) k = 2;\r\n  else return this.toRadix(b);\r\n  var km = (1<<k)-1, d, m = false, r = \"\", i = this.t;\r\n  var p = this.DB-(i*this.DB)%k;\r\n  if(i-- > 0) {\r\n    if(p < this.DB && (d = this[i]>>p) > 0) { m = true; r = int2char(d); }\r\n    while(i >= 0) {\r\n      if(p < k) {\r\n        d = (this[i]&((1<<p)-1))<<(k-p);\r\n        d |= this[--i]>>(p+=this.DB-k);\r\n      }\r\n      else {\r\n        d = (this[i]>>(p-=k))&km;\r\n        if(p <= 0) { p += this.DB; --i; }\r\n      }\r\n      if(d > 0) m = true;\r\n      if(m) r += int2char(d);\r\n    }\r\n  }\r\n  return m?r:\"0\";\r\n}\r\n\r\n// (public) -this\r\nfunction bnNegate() { var r = nbi(); BigInteger.ZERO.subTo(this,r); return r; }\r\n\r\n// (public) |this|\r\nfunction bnAbs() { return (this.s<0)?this.negate():this; }\r\n\r\n// (public) return + if this > a, - if this < a, 0 if equal\r\nfunction bnCompareTo(a) {\r\n  var r = this.s-a.s;\r\n  if(r != 0) return r;\r\n  var i = this.t;\r\n  r = i-a.t;\r\n  if(r != 0) return (this.s<0)?-r:r;\r\n  while(--i >= 0) if((r=this[i]-a[i]) != 0) return r;\r\n  return 0;\r\n}\r\n\r\n// returns bit length of the integer x\r\nexport function nbits(x) {\r\n  var r = 1, t;\r\n  if((t=x>>>16) != 0) { x = t; r += 16; }\r\n  if((t=x>>8) != 0) { x = t; r += 8; }\r\n  if((t=x>>4) != 0) { x = t; r += 4; }\r\n  if((t=x>>2) != 0) { x = t; r += 2; }\r\n  if((t=x>>1) != 0) { x = t; r += 1; }\r\n  return r;\r\n}\r\n\r\n// (public) return the number of bits in \"this\"\r\nfunction bnBitLength() {\r\n  if(this.t <= 0) return 0;\r\n  return this.DB*(this.t-1)+nbits(this[this.t-1]^(this.s&this.DM));\r\n}\r\n\r\n// (protected) r = this << n*DB\r\nfunction bnpDLShiftTo(n,r) {\r\n  var i;\r\n  for(i = this.t-1; i >= 0; --i) r[i+n] = this[i];\r\n  for(i = n-1; i >= 0; --i) r[i] = 0;\r\n  r.t = this.t+n;\r\n  r.s = this.s;\r\n}\r\n\r\n// (protected) r = this >> n*DB\r\nfunction bnpDRShiftTo(n,r) {\r\n  for(var i = n; i < this.t; ++i) r[i-n] = this[i];\r\n  r.t = Math.max(this.t-n,0);\r\n  r.s = this.s;\r\n}\r\n\r\n// (protected) r = this << n\r\nfunction bnpLShiftTo(n,r) {\r\n  var bs = n%this.DB;\r\n  var cbs = this.DB-bs;\r\n  var bm = (1<<cbs)-1;\r\n  var ds = Math.floor(n/this.DB), c = (this.s<<bs)&this.DM, i;\r\n  for(i = this.t-1; i >= 0; --i) {\r\n    r[i+ds+1] = (this[i]>>cbs)|c;\r\n    c = (this[i]&bm)<<bs;\r\n  }\r\n  for(i = ds-1; i >= 0; --i) r[i] = 0;\r\n  r[ds] = c;\r\n  r.t = this.t+ds+1;\r\n  r.s = this.s;\r\n  r.clamp();\r\n}\r\n\r\n// (protected) r = this >> n\r\nfunction bnpRShiftTo(n,r) {\r\n  r.s = this.s;\r\n  var ds = Math.floor(n/this.DB);\r\n  if(ds >= this.t) { r.t = 0; return; }\r\n  var bs = n%this.DB;\r\n  var cbs = this.DB-bs;\r\n  var bm = (1<<bs)-1;\r\n  r[0] = this[ds]>>bs;\r\n  for(var i = ds+1; i < this.t; ++i) {\r\n    r[i-ds-1] |= (this[i]&bm)<<cbs;\r\n    r[i-ds] = this[i]>>bs;\r\n  }\r\n  if(bs > 0) r[this.t-ds-1] |= (this.s&bm)<<cbs;\r\n  r.t = this.t-ds;\r\n  r.clamp();\r\n}\r\n\r\n// (protected) r = this - a\r\nfunction bnpSubTo(a,r) {\r\n  var i = 0, c = 0, m = Math.min(a.t,this.t);\r\n  while(i < m) {\r\n    c += this[i]-a[i];\r\n    r[i++] = c&this.DM;\r\n    c >>= this.DB;\r\n  }\r\n  if(a.t < this.t) {\r\n    c -= a.s;\r\n    while(i < this.t) {\r\n      c += this[i];\r\n      r[i++] = c&this.DM;\r\n      c >>= this.DB;\r\n    }\r\n    c += this.s;\r\n  }\r\n  else {\r\n    c += this.s;\r\n    while(i < a.t) {\r\n      c -= a[i];\r\n      r[i++] = c&this.DM;\r\n      c >>= this.DB;\r\n    }\r\n    c -= a.s;\r\n  }\r\n  r.s = (c<0)?-1:0;\r\n  if(c < -1) r[i++] = this.DV+c;\r\n  else if(c > 0) r[i++] = c;\r\n  r.t = i;\r\n  r.clamp();\r\n}\r\n\r\n// (protected) r = this * a, r != this,a (HAC 14.12)\r\n// \"this\" should be the larger one if appropriate.\r\nfunction bnpMultiplyTo(a,r) {\r\n  var x = this.abs(), y = a.abs();\r\n  var i = x.t;\r\n  r.t = i+y.t;\r\n  while(--i >= 0) r[i] = 0;\r\n  for(i = 0; i < y.t; ++i) r[i+x.t] = x.am(0,y[i],r,i,0,x.t);\r\n  r.s = 0;\r\n  r.clamp();\r\n  if(this.s != a.s) BigInteger.ZERO.subTo(r,r);\r\n}\r\n\r\n// (protected) r = this^2, r != this (HAC 14.16)\r\nfunction bnpSquareTo(r) {\r\n  var x = this.abs();\r\n  var i = r.t = 2*x.t;\r\n  while(--i >= 0) r[i] = 0;\r\n  for(i = 0; i < x.t-1; ++i) {\r\n    var c = x.am(i,x[i],r,2*i,0,1);\r\n    if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1)) >= x.DV) {\r\n      r[i+x.t] -= x.DV;\r\n      r[i+x.t+1] = 1;\r\n    }\r\n  }\r\n  if(r.t > 0) r[r.t-1] += x.am(i,x[i],r,2*i,0,1);\r\n  r.s = 0;\r\n  r.clamp();\r\n}\r\n\r\n// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\r\n// r != q, this != m.  q or r may be null.\r\nfunction bnpDivRemTo(m,q,r) {\r\n  var pm = m.abs();\r\n  if(pm.t <= 0) return;\r\n  var pt = this.abs();\r\n  if(pt.t < pm.t) {\r\n    if(q != null) q.fromInt(0);\r\n    if(r != null) this.copyTo(r);\r\n    return;\r\n  }\r\n  if(r == null) r = nbi();\r\n  var y = nbi(), ts = this.s, ms = m.s;\r\n  var nsh = this.DB-nbits(pm[pm.t-1]);\t// normalize modulus\r\n  if(nsh > 0) { pm.lShiftTo(nsh,y); pt.lShiftTo(nsh,r); }\r\n  else { pm.copyTo(y); pt.copyTo(r); }\r\n  var ys = y.t;\r\n  var y0 = y[ys-1];\r\n  if(y0 == 0) return;\r\n  var yt = y0*(1<<this.F1)+((ys>1)?y[ys-2]>>this.F2:0);\r\n  var d1 = this.FV/yt, d2 = (1<<this.F1)/yt, e = 1<<this.F2;\r\n  var i = r.t, j = i-ys, t = (q==null)?nbi():q;\r\n  y.dlShiftTo(j,t);\r\n  if(r.compareTo(t) >= 0) {\r\n    r[r.t++] = 1;\r\n    r.subTo(t,r);\r\n  }\r\n  BigInteger.ONE.dlShiftTo(ys,t);\r\n  t.subTo(y,y);\t// \"negative\" y so we can replace sub with am later\r\n  while(y.t < ys) y[y.t++] = 0;\r\n  while(--j >= 0) {\r\n    // Estimate quotient digit\r\n    var qd = (r[--i]==y0)?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);\r\n    if((r[i]+=y.am(0,qd,r,j,0,ys)) < qd) {\t// Try it out\r\n      y.dlShiftTo(j,t);\r\n      r.subTo(t,r);\r\n      while(r[i] < --qd) r.subTo(t,r);\r\n    }\r\n  }\r\n  if(q != null) {\r\n    r.drShiftTo(ys,q);\r\n    if(ts != ms) BigInteger.ZERO.subTo(q,q);\r\n  }\r\n  r.t = ys;\r\n  r.clamp();\r\n  if(nsh > 0) r.rShiftTo(nsh,r);\t// Denormalize remainder\r\n  if(ts < 0) BigInteger.ZERO.subTo(r,r);\r\n}\r\n\r\n// (public) this mod a\r\nfunction bnMod(a) {\r\n  var r = nbi();\r\n  this.abs().divRemTo(a,null,r);\r\n  if(this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r,r);\r\n  return r;\r\n}\r\n\r\n// Modular reduction using \"classic\" algorithm\r\nexport class Classic{\r\n  constructor(m){\r\n    this.m = m;\r\n  }\r\n}\r\nfunction cConvert(x) {\r\n  if(x.s < 0 || x.compareTo(this.m) >= 0) return x.mod(this.m);\r\n  else return x;\r\n}\r\nfunction cRevert(x) { return x; }\r\nfunction cReduce(x) { x.divRemTo(this.m,null,x); }\r\nfunction cMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\r\nfunction cSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\r\n\r\nClassic.prototype.convert = cConvert;\r\nClassic.prototype.revert = cRevert;\r\nClassic.prototype.reduce = cReduce;\r\nClassic.prototype.mulTo = cMulTo;\r\nClassic.prototype.sqrTo = cSqrTo;\r\n\r\n// (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\r\n// justification:\r\n//         xy == 1 (mod m)\r\n//         xy =  1+km\r\n//   xy(2-xy) = (1+km)(1-km)\r\n// x[y(2-xy)] = 1-k^2m^2\r\n// x[y(2-xy)] == 1 (mod m^2)\r\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\r\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\r\n// JS multiply \"overflows\" differently from C/C++, so care is needed here.\r\nfunction bnpInvDigit() {\r\n  if(this.t < 1) return 0;\r\n  var x = this[0];\r\n  if((x&1) == 0) return 0;\r\n  var y = x&3;\t\t// y == 1/x mod 2^2\r\n  y = (y*(2-(x&0xf)*y))&0xf;\t// y == 1/x mod 2^4\r\n  y = (y*(2-(x&0xff)*y))&0xff;\t// y == 1/x mod 2^8\r\n  y = (y*(2-(((x&0xffff)*y)&0xffff)))&0xffff;\t// y == 1/x mod 2^16\r\n  // last step - calculate inverse mod DV directly;\r\n  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\r\n  y = (y*(2-x*y%this.DV))%this.DV;\t\t// y == 1/x mod 2^dbits\r\n  // we really want the negative inverse, and -DV < y < DV\r\n  return (y>0)?this.DV-y:-y;\r\n}\r\n\r\n// Montgomery reduction\r\nexport class Montgomery {\r\n  constructor(m) {\r\n    this.m = m;\r\n    this.mp = m.invDigit();\r\n    this.mpl = this.mp & 0x7fff;\r\n    this.mph = this.mp >> 15;\r\n    this.um = (1 << (m.DB - 15)) - 1;\r\n    this.mt2 = 2 * m.t;\r\n  }\r\n}\r\n\r\n// xR mod m\r\nfunction montConvert(x) {\r\n  var r = nbi();\r\n  x.abs().dlShiftTo(this.m.t,r);\r\n  r.divRemTo(this.m,null,r);\r\n  if(x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r,r);\r\n  return r;\r\n}\r\n\r\n// x/R mod m\r\nfunction montRevert(x) {\r\n  var r = nbi();\r\n  x.copyTo(r);\r\n  this.reduce(r);\r\n  return r;\r\n}\r\n\r\n// x = x/R mod m (HAC 14.32)\r\nfunction montReduce(x) {\r\n  while(x.t <= this.mt2)\t// pad x so am has enough room later\r\n    x[x.t++] = 0;\r\n  for(var i = 0; i < this.m.t; ++i) {\r\n    // faster way of calculating u0 = x[i]*mp mod DV\r\n    var j = x[i]&0x7fff;\r\n    var u0 = (j*this.mpl+(((j*this.mph+(x[i]>>15)*this.mpl)&this.um)<<15))&x.DM;\r\n    // use am to combine the multiply-shift-add into one call\r\n    j = i+this.m.t;\r\n    x[j] += this.m.am(0,u0,x,i,0,this.m.t);\r\n    // propagate carry\r\n    while(x[j] >= x.DV) { x[j] -= x.DV; x[++j]++; }\r\n  }\r\n  x.clamp();\r\n  x.drShiftTo(this.m.t,x);\r\n  if(x.compareTo(this.m) >= 0) x.subTo(this.m,x);\r\n}\r\n\r\n// r = \"x^2/R mod m\"; x != r\r\nfunction montSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\r\n\r\n// r = \"xy/R mod m\"; x,y != r\r\nfunction montMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\r\n\r\nMontgomery.prototype.convert = montConvert;\r\nMontgomery.prototype.revert = montRevert;\r\nMontgomery.prototype.reduce = montReduce;\r\nMontgomery.prototype.mulTo = montMulTo;\r\nMontgomery.prototype.sqrTo = montSqrTo;\r\n\r\n// (protected) true iff this is even\r\nfunction bnpIsEven() { return ((this.t>0)?(this[0]&1):this.s) == 0; }\r\n\r\n// (protected) this^e, e < 2^32, doing sqr and mul with \"r\" (HAC 14.79)\r\nfunction bnpExp(e,z) {\r\n  if(e > 0xffffffff || e < 1) return BigInteger.ONE;\r\n  var r = nbi(), r2 = nbi(), g = z.convert(this), i = nbits(e)-1;\r\n  g.copyTo(r);\r\n  while(--i >= 0) {\r\n    z.sqrTo(r,r2);\r\n    if((e&(1<<i)) > 0) z.mulTo(r2,g,r);\r\n    else { var t = r; r = r2; r2 = t; }\r\n  }\r\n  return z.revert(r);\r\n}\r\n\r\n// (public) this^e % m, 0 <= e < 2^32\r\nfunction bnModPowInt(e,m) {\r\n  var z;\r\n  if(e < 256 || m.isEven()) z = new Classic(m); else z = new Montgomery(m);\r\n  return this.exp(e,z);\r\n}\r\n\r\n// protected\r\nBigInteger.prototype.copyTo = bnpCopyTo;\r\nBigInteger.prototype.fromInt = bnpFromInt;\r\nBigInteger.prototype.fromString = bnpFromString;\r\nBigInteger.prototype.clamp = bnpClamp;\r\nBigInteger.prototype.dlShiftTo = bnpDLShiftTo;\r\nBigInteger.prototype.drShiftTo = bnpDRShiftTo;\r\nBigInteger.prototype.lShiftTo = bnpLShiftTo;\r\nBigInteger.prototype.rShiftTo = bnpRShiftTo;\r\nBigInteger.prototype.subTo = bnpSubTo;\r\nBigInteger.prototype.multiplyTo = bnpMultiplyTo;\r\nBigInteger.prototype.squareTo = bnpSquareTo;\r\nBigInteger.prototype.divRemTo = bnpDivRemTo;\r\nBigInteger.prototype.invDigit = bnpInvDigit;\r\nBigInteger.prototype.isEven = bnpIsEven;\r\nBigInteger.prototype.exp = bnpExp;\r\n\r\n// public\r\nBigInteger.prototype.toString = bnToString;\r\nBigInteger.prototype.negate = bnNegate;\r\nBigInteger.prototype.abs = bnAbs;\r\nBigInteger.prototype.compareTo = bnCompareTo;\r\nBigInteger.prototype.bitLength = bnBitLength;\r\nBigInteger.prototype.mod = bnMod;\r\nBigInteger.prototype.modPowInt = bnModPowInt;\r\n\r\n// \"constants\"\r\nBigInteger.ZERO = nbv(0);\r\nBigInteger.ONE = nbv(1);\r\n","// Copyright (c) 2005-2009  Tom Wu\r\n// All Rights Reserved.\r\n// See \"LICENSE\" for details.\r\n\r\n// Extended JavaScript BN functions, required for RSA private ops.\r\n\r\n// Version 1.1: new BigInteger(\"0\", 10) returns \"proper\" zero\r\n// Version 1.2: square() API, isProbablePrime fix\r\n\r\nimport {BigInteger, nbi, nbv, nbits, intAt, Classic, Montgomery} from \"./jsbn\";\r\nexport {BigInteger} from \"./jsbn\";\r\n// (public)\r\nfunction bnClone() { var r = nbi(); this.copyTo(r); return r; }\r\n\r\n// (public) return value as integer\r\nfunction bnIntValue() {\r\n  if(this.s < 0) {\r\n    if(this.t == 1) return this[0]-this.DV;\r\n    else if(this.t == 0) return -1;\r\n  }\r\n  else if(this.t == 1) return this[0];\r\n  else if(this.t == 0) return 0;\r\n  // assumes 16 < DB < 32\r\n  return ((this[1]&((1<<(32-this.DB))-1))<<this.DB)|this[0];\r\n}\r\n\r\n// (public) return value as byte\r\nfunction bnByteValue() { return (this.t==0)?this.s:(this[0]<<24)>>24; }\r\n\r\n// (public) return value as short (assumes DB>=16)\r\nfunction bnShortValue() { return (this.t==0)?this.s:(this[0]<<16)>>16; }\r\n\r\n// (protected) return x s.t. r^x < DV\r\nfunction bnpChunkSize(r) { return Math.floor(Math.LN2*this.DB/Math.log(r)); }\r\n\r\n// (public) 0 if this == 0, 1 if this > 0\r\nfunction bnSigNum() {\r\n  if(this.s < 0) return -1;\r\n  else if(this.t <= 0 || (this.t == 1 && this[0] <= 0)) return 0;\r\n  else return 1;\r\n}\r\n\r\n// (protected) convert to radix string\r\nfunction bnpToRadix(b) {\r\n  if(b == null) b = 10;\r\n  if(this.signum() == 0 || b < 2 || b > 36) return \"0\";\r\n  var cs = this.chunkSize(b);\r\n  var a = Math.pow(b,cs);\r\n  var d = nbv(a), y = nbi(), z = nbi(), r = \"\";\r\n  this.divRemTo(d,y,z);\r\n  while(y.signum() > 0) {\r\n    r = (a+z.intValue()).toString(b).substr(1) + r;\r\n    y.divRemTo(d,y,z);\r\n  }\r\n  return z.intValue().toString(b) + r;\r\n}\r\n\r\n// (protected) convert from radix string\r\nfunction bnpFromRadix(s,b) {\r\n  this.fromInt(0);\r\n  if(b == null) b = 10;\r\n  var cs = this.chunkSize(b);\r\n  var d = Math.pow(b,cs), mi = false, j = 0, w = 0;\r\n  for(var i = 0; i < s.length; ++i) {\r\n    var x = intAt(s,i);\r\n    if(x < 0) {\r\n      if(s.charAt(i) == \"-\" && this.signum() == 0) mi = true;\r\n      continue;\r\n    }\r\n    w = b*w+x;\r\n    if(++j >= cs) {\r\n      this.dMultiply(d);\r\n      this.dAddOffset(w,0);\r\n      j = 0;\r\n      w = 0;\r\n    }\r\n  }\r\n  if(j > 0) {\r\n    this.dMultiply(Math.pow(b,j));\r\n    this.dAddOffset(w,0);\r\n  }\r\n  if(mi) BigInteger.ZERO.subTo(this,this);\r\n}\r\n\r\n// (protected) alternate constructor\r\nfunction bnpFromNumber(a,b,c) {\r\n  if(\"number\" == typeof b) {\r\n    // new BigInteger(int,int,RNG)\r\n    if(a < 2) this.fromInt(1);\r\n    else {\r\n      this.fromNumber(a,c);\r\n      if(!this.testBit(a-1))\t// force MSB set\r\n        this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);\r\n      if(this.isEven()) this.dAddOffset(1,0); // force odd\r\n      while(!this.isProbablePrime(b)) {\r\n        this.dAddOffset(2,0);\r\n        if(this.bitLength() > a) this.subTo(BigInteger.ONE.shiftLeft(a-1),this);\r\n      }\r\n    }\r\n  }\r\n  else {\r\n    // new BigInteger(int,RNG)\r\n    var x = [], t = a&7;\r\n    x.length = (a>>3)+1;\r\n    b.nextBytes(x);\r\n    if(t > 0) x[0] &= ((1<<t)-1); else x[0] = 0;\r\n    this.fromString(x,256);\r\n  }\r\n}\r\n\r\n// (public) convert to bigendian byte array\r\nfunction bnToByteArray() {\r\n  var i = this.t, r = [];\r\n  r[0] = this.s;\r\n  var p = this.DB-(i*this.DB)%8, d, k = 0;\r\n  if(i-- > 0) {\r\n    if(p < this.DB && (d = this[i]>>p) != (this.s&this.DM)>>p)\r\n      r[k++] = d|(this.s<<(this.DB-p));\r\n    while(i >= 0) {\r\n      if(p < 8) {\r\n        d = (this[i]&((1<<p)-1))<<(8-p);\r\n        d |= this[--i]>>(p+=this.DB-8);\r\n      }\r\n      else {\r\n        d = (this[i]>>(p-=8))&0xff;\r\n        if(p <= 0) { p += this.DB; --i; }\r\n      }\r\n      if((d&0x80) != 0) d |= -256;\r\n      if(k == 0 && (this.s&0x80) != (d&0x80)) ++k;\r\n      if(k > 0 || d != this.s) r[k++] = d;\r\n    }\r\n  }\r\n  return r;\r\n}\r\n\r\nfunction bnEquals(a) { return(this.compareTo(a)==0); }\r\nfunction bnMin(a) { return(this.compareTo(a)<0)?this:a; }\r\nfunction bnMax(a) { return(this.compareTo(a)>0)?this:a; }\r\n\r\n// (protected) r = this op a (bitwise)\r\nfunction bnpBitwiseTo(a,op,r) {\r\n  var i, f, m = Math.min(a.t,this.t);\r\n  for(i = 0; i < m; ++i) r[i] = op(this[i],a[i]);\r\n  if(a.t < this.t) {\r\n    f = a.s&this.DM;\r\n    for(i = m; i < this.t; ++i) r[i] = op(this[i],f);\r\n    r.t = this.t;\r\n  }\r\n  else {\r\n    f = this.s&this.DM;\r\n    for(i = m; i < a.t; ++i) r[i] = op(f,a[i]);\r\n    r.t = a.t;\r\n  }\r\n  r.s = op(this.s,a.s);\r\n  r.clamp();\r\n}\r\n\r\n// (public) this & a\r\nfunction op_and(x,y) { return x&y; }\r\nfunction bnAnd(a) { var r = nbi(); this.bitwiseTo(a,op_and,r); return r; }\r\n\r\n// (public) this | a\r\nfunction op_or(x,y) { return x|y; }\r\nfunction bnOr(a) { var r = nbi(); this.bitwiseTo(a,op_or,r); return r; }\r\n\r\n// (public) this ^ a\r\nfunction op_xor(x,y) { return x^y; }\r\nfunction bnXor(a) { var r = nbi(); this.bitwiseTo(a,op_xor,r); return r; }\r\n\r\n// (public) this & ~a\r\nfunction op_andnot(x,y) { return x&~y; }\r\nfunction bnAndNot(a) { var r = nbi(); this.bitwiseTo(a,op_andnot,r); return r; }\r\n\r\n// (public) ~this\r\nfunction bnNot() {\r\n  var r = nbi();\r\n  for(var i = 0; i < this.t; ++i) r[i] = this.DM&~this[i];\r\n  r.t = this.t;\r\n  r.s = ~this.s;\r\n  return r;\r\n}\r\n\r\n// (public) this << n\r\nfunction bnShiftLeft(n) {\r\n  var r = nbi();\r\n  if(n < 0) this.rShiftTo(-n,r); else this.lShiftTo(n,r);\r\n  return r;\r\n}\r\n\r\n// (public) this >> n\r\nfunction bnShiftRight(n) {\r\n  var r = nbi();\r\n  if(n < 0) this.lShiftTo(-n,r); else this.rShiftTo(n,r);\r\n  return r;\r\n}\r\n\r\n// return index of lowest 1-bit in x, x < 2^31\r\nfunction lbit(x) {\r\n  if(x == 0) return -1;\r\n  var r = 0;\r\n  if((x&0xffff) == 0) { x >>= 16; r += 16; }\r\n  if((x&0xff) == 0) { x >>= 8; r += 8; }\r\n  if((x&0xf) == 0) { x >>= 4; r += 4; }\r\n  if((x&3) == 0) { x >>= 2; r += 2; }\r\n  if((x&1) == 0) ++r;\r\n  return r;\r\n}\r\n\r\n// (public) returns index of lowest 1-bit (or -1 if none)\r\nfunction bnGetLowestSetBit() {\r\n  for(var i = 0; i < this.t; ++i)\r\n    if(this[i] != 0) return i*this.DB+lbit(this[i]);\r\n  if(this.s < 0) return this.t*this.DB;\r\n  return -1;\r\n}\r\n\r\n// return number of 1 bits in x\r\nfunction cbit(x) {\r\n  var r = 0;\r\n  while(x != 0) { x &= x-1; ++r; }\r\n  return r;\r\n}\r\n\r\n// (public) return number of set bits\r\nfunction bnBitCount() {\r\n  var r = 0, x = this.s&this.DM;\r\n  for(var i = 0; i < this.t; ++i) r += cbit(this[i]^x);\r\n  return r;\r\n}\r\n\r\n// (public) true iff nth bit is set\r\nfunction bnTestBit(n) {\r\n  var j = Math.floor(n/this.DB);\r\n  if(j >= this.t) return(this.s!=0);\r\n  return((this[j]&(1<<(n%this.DB)))!=0);\r\n}\r\n\r\n// (protected) this op (1<<n)\r\nfunction bnpChangeBit(n,op) {\r\n  var r = BigInteger.ONE.shiftLeft(n);\r\n  this.bitwiseTo(r,op,r);\r\n  return r;\r\n}\r\n\r\n// (public) this | (1<<n)\r\nfunction bnSetBit(n) { return this.changeBit(n,op_or); }\r\n\r\n// (public) this & ~(1<<n)\r\nfunction bnClearBit(n) { return this.changeBit(n,op_andnot); }\r\n\r\n// (public) this ^ (1<<n)\r\nfunction bnFlipBit(n) { return this.changeBit(n,op_xor); }\r\n\r\n// (protected) r = this + a\r\nfunction bnpAddTo(a,r) {\r\n  var i = 0, c = 0, m = Math.min(a.t,this.t);\r\n  while(i < m) {\r\n    c += this[i]+a[i];\r\n    r[i++] = c&this.DM;\r\n    c >>= this.DB;\r\n  }\r\n  if(a.t < this.t) {\r\n    c += a.s;\r\n    while(i < this.t) {\r\n      c += this[i];\r\n      r[i++] = c&this.DM;\r\n      c >>= this.DB;\r\n    }\r\n    c += this.s;\r\n  }\r\n  else {\r\n    c += this.s;\r\n    while(i < a.t) {\r\n      c += a[i];\r\n      r[i++] = c&this.DM;\r\n      c >>= this.DB;\r\n    }\r\n    c += a.s;\r\n  }\r\n  r.s = (c<0)?-1:0;\r\n  if(c > 0) r[i++] = c;\r\n  else if(c < -1) r[i++] = this.DV+c;\r\n  r.t = i;\r\n  r.clamp();\r\n}\r\n\r\n// (public) this + a\r\nfunction bnAdd(a) { var r = nbi(); this.addTo(a,r); return r; }\r\n\r\n// (public) this - a\r\nfunction bnSubtract(a) { var r = nbi(); this.subTo(a,r); return r; }\r\n\r\n// (public) this * a\r\nfunction bnMultiply(a) { var r = nbi(); this.multiplyTo(a,r); return r; }\r\n\r\n// (public) this^2\r\nfunction bnSquare() { var r = nbi(); this.squareTo(r); return r; }\r\n\r\n// (public) this / a\r\nfunction bnDivide(a) { var r = nbi(); this.divRemTo(a,r,null); return r; }\r\n\r\n// (public) this % a\r\nfunction bnRemainder(a) { var r = nbi(); this.divRemTo(a,null,r); return r; }\r\n\r\n// (public) [this/a,this%a]\r\nfunction bnDivideAndRemainder(a) {\r\n  var q = nbi(), r = nbi();\r\n  this.divRemTo(a,q,r);\r\n  return new Array(q,r);\r\n}\r\n\r\n// (protected) this *= n, this >= 0, 1 < n < DV\r\nfunction bnpDMultiply(n) {\r\n  this[this.t] = this.am(0,n-1,this,0,0,this.t);\r\n  ++this.t;\r\n  this.clamp();\r\n}\r\n\r\n// (protected) this += n << w words, this >= 0\r\nfunction bnpDAddOffset(n,w) {\r\n  if(n == 0) return;\r\n  while(this.t <= w) this[this.t++] = 0;\r\n  this[w] += n;\r\n  while(this[w] >= this.DV) {\r\n    this[w] -= this.DV;\r\n    if(++w >= this.t) this[this.t++] = 0;\r\n    ++this[w];\r\n  }\r\n}\r\n\r\n// A \"null\" reducer\r\nfunction NullExp() {}\r\nfunction nNop(x) { return x; }\r\nfunction nMulTo(x,y,r) { x.multiplyTo(y,r); }\r\nfunction nSqrTo(x,r) { x.squareTo(r); }\r\n\r\nNullExp.prototype.convert = nNop;\r\nNullExp.prototype.revert = nNop;\r\nNullExp.prototype.mulTo = nMulTo;\r\nNullExp.prototype.sqrTo = nSqrTo;\r\n\r\n// (public) this^e\r\nfunction bnPow(e) { return this.exp(e,new NullExp()); }\r\n\r\n// (protected) r = lower n words of \"this * a\", a.t <= n\r\n// \"this\" should be the larger one if appropriate.\r\nfunction bnpMultiplyLowerTo(a,n,r) {\r\n  var i = Math.min(this.t+a.t,n);\r\n  r.s = 0; // assumes a,this >= 0\r\n  r.t = i;\r\n  while(i > 0) r[--i] = 0;\r\n  var j;\r\n  for(j = r.t-this.t; i < j; ++i) r[i+this.t] = this.am(0,a[i],r,i,0,this.t);\r\n  for(j = Math.min(a.t,n); i < j; ++i) this.am(0,a[i],r,i,0,n-i);\r\n  r.clamp();\r\n}\r\n\r\n// (protected) r = \"this * a\" without lower n words, n > 0\r\n// \"this\" should be the larger one if appropriate.\r\nfunction bnpMultiplyUpperTo(a,n,r) {\r\n  --n;\r\n  var i = r.t = this.t+a.t-n;\r\n  r.s = 0; // assumes a,this >= 0\r\n  while(--i >= 0) r[i] = 0;\r\n  for(i = Math.max(n-this.t,0); i < a.t; ++i)\r\n    r[this.t+i-n] = this.am(n-i,a[i],r,0,0,this.t+i-n);\r\n  r.clamp();\r\n  r.drShiftTo(1,r);\r\n}\r\n\r\n// Barrett modular reduction\r\nfunction Barrett(m) {\r\n  // setup Barrett\r\n  this.r2 = nbi();\r\n  this.q3 = nbi();\r\n  BigInteger.ONE.dlShiftTo(2*m.t,this.r2);\r\n  this.mu = this.r2.divide(m);\r\n  this.m = m;\r\n}\r\n\r\nfunction barrettConvert(x) {\r\n  if(x.s < 0 || x.t > 2*this.m.t) return x.mod(this.m);\r\n  else if(x.compareTo(this.m) < 0) return x;\r\n  else { var r = nbi(); x.copyTo(r); this.reduce(r); return r; }\r\n}\r\n\r\nfunction barrettRevert(x) { return x; }\r\n\r\n// x = x mod m (HAC 14.42)\r\nfunction barrettReduce(x) {\r\n  x.drShiftTo(this.m.t-1,this.r2);\r\n  if(x.t > this.m.t+1) { x.t = this.m.t+1; x.clamp(); }\r\n  this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);\r\n  this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);\r\n  while(x.compareTo(this.r2) < 0) x.dAddOffset(1,this.m.t+1);\r\n  x.subTo(this.r2,x);\r\n  while(x.compareTo(this.m) >= 0) x.subTo(this.m,x);\r\n}\r\n\r\n// r = x^2 mod m; x != r\r\nfunction barrettSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\r\n\r\n// r = x*y mod m; x,y != r\r\nfunction barrettMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\r\n\r\nBarrett.prototype.convert = barrettConvert;\r\nBarrett.prototype.revert = barrettRevert;\r\nBarrett.prototype.reduce = barrettReduce;\r\nBarrett.prototype.mulTo = barrettMulTo;\r\nBarrett.prototype.sqrTo = barrettSqrTo;\r\n\r\n// (public) this^e % m (HAC 14.85)\r\nfunction bnModPow(e,m) {\r\n  var i = e.bitLength(), k, r = nbv(1), z;\r\n  if(i <= 0) return r;\r\n  else if(i < 18) k = 1;\r\n  else if(i < 48) k = 3;\r\n  else if(i < 144) k = 4;\r\n  else if(i < 768) k = 5;\r\n  else k = 6;\r\n  if(i < 8)\r\n    z = new Classic(m);\r\n  else if(m.isEven())\r\n    z = new Barrett(m);\r\n  else\r\n    z = new Montgomery(m);\r\n\r\n  // precomputation\r\n  var g = [], n = 3, k1 = k-1, km = (1<<k)-1;\r\n  g[1] = z.convert(this);\r\n  if(k > 1) {\r\n    var g2 = nbi();\r\n    z.sqrTo(g[1],g2);\r\n    while(n <= km) {\r\n      g[n] = nbi();\r\n      z.mulTo(g2,g[n-2],g[n]);\r\n      n += 2;\r\n    }\r\n  }\r\n\r\n  var j = e.t-1, w, is1 = true, r2 = nbi(), t;\r\n  i = nbits(e[j])-1;\r\n  while(j >= 0) {\r\n    if(i >= k1) w = (e[j]>>(i-k1))&km;\r\n    else {\r\n      w = (e[j]&((1<<(i+1))-1))<<(k1-i);\r\n      if(j > 0) w |= e[j-1]>>(this.DB+i-k1);\r\n    }\r\n\r\n    n = k;\r\n    while((w&1) == 0) { w >>= 1; --n; }\r\n    if((i -= n) < 0) { i += this.DB; --j; }\r\n    if(is1) {\t// ret == 1, don't bother squaring or multiplying it\r\n      g[w].copyTo(r);\r\n      is1 = false;\r\n    }\r\n    else {\r\n      while(n > 1) { z.sqrTo(r,r2); z.sqrTo(r2,r); n -= 2; }\r\n      if(n > 0) z.sqrTo(r,r2); else { t = r; r = r2; r2 = t; }\r\n      z.mulTo(r2,g[w],r);\r\n    }\r\n\r\n    while(j >= 0 && (e[j]&(1<<i)) == 0) {\r\n      z.sqrTo(r,r2); t = r; r = r2; r2 = t;\r\n      if(--i < 0) { i = this.DB-1; --j; }\r\n    }\r\n  }\r\n  return z.revert(r);\r\n}\r\n\r\n// (public) gcd(this,a) (HAC 14.54)\r\nfunction bnGCD(a) {\r\n  var x = (this.s<0)?this.negate():this.clone();\r\n  var y = (a.s<0)?a.negate():a.clone();\r\n  if(x.compareTo(y) < 0) { var t = x; x = y; y = t; }\r\n  var i = x.getLowestSetBit(), g = y.getLowestSetBit();\r\n  if(g < 0) return x;\r\n  if(i < g) g = i;\r\n  if(g > 0) {\r\n    x.rShiftTo(g,x);\r\n    y.rShiftTo(g,y);\r\n  }\r\n  while(x.signum() > 0) {\r\n    if((i = x.getLowestSetBit()) > 0) x.rShiftTo(i,x);\r\n    if((i = y.getLowestSetBit()) > 0) y.rShiftTo(i,y);\r\n    if(x.compareTo(y) >= 0) {\r\n      x.subTo(y,x);\r\n      x.rShiftTo(1,x);\r\n    }\r\n    else {\r\n      y.subTo(x,y);\r\n      y.rShiftTo(1,y);\r\n    }\r\n  }\r\n  if(g > 0) y.lShiftTo(g,y);\r\n  return y;\r\n}\r\n\r\n// (protected) this % n, n < 2^26\r\nfunction bnpModInt(n) {\r\n  if(n <= 0) return 0;\r\n  var d = this.DV%n, r = (this.s<0)?n-1:0;\r\n  if(this.t > 0)\r\n    if(d == 0) r = this[0]%n;\r\n    else for(var i = this.t-1; i >= 0; --i) r = (d*r+this[i])%n;\r\n  return r;\r\n}\r\n\r\n// (public) 1/this % m (HAC 14.61)\r\nfunction bnModInverse(m) {\r\n  var ac = m.isEven();\r\n  if((this.isEven() && ac) || m.signum() == 0) return BigInteger.ZERO;\r\n  var u = m.clone(), v = this.clone();\r\n  var a = nbv(1), b = nbv(0), c = nbv(0), d = nbv(1);\r\n  while(u.signum() != 0) {\r\n    while(u.isEven()) {\r\n      u.rShiftTo(1,u);\r\n      if(ac) {\r\n        if(!a.isEven() || !b.isEven()) { a.addTo(this,a); b.subTo(m,b); }\r\n        a.rShiftTo(1,a);\r\n      }\r\n      else if(!b.isEven()) b.subTo(m,b);\r\n      b.rShiftTo(1,b);\r\n    }\r\n    while(v.isEven()) {\r\n      v.rShiftTo(1,v);\r\n      if(ac) {\r\n        if(!c.isEven() || !d.isEven()) { c.addTo(this,c); d.subTo(m,d); }\r\n        c.rShiftTo(1,c);\r\n      }\r\n      else if(!d.isEven()) d.subTo(m,d);\r\n      d.rShiftTo(1,d);\r\n    }\r\n    if(u.compareTo(v) >= 0) {\r\n      u.subTo(v,u);\r\n      if(ac) a.subTo(c,a);\r\n      b.subTo(d,b);\r\n    }\r\n    else {\r\n      v.subTo(u,v);\r\n      if(ac) c.subTo(a,c);\r\n      d.subTo(b,d);\r\n    }\r\n  }\r\n  if(v.compareTo(BigInteger.ONE) != 0) return BigInteger.ZERO;\r\n  if(d.compareTo(m) >= 0) return d.subtract(m);\r\n  if(d.signum() < 0) d.addTo(m,d); else return d;\r\n  if(d.signum() < 0) return d.add(m); else return d;\r\n}\r\n\r\nvar lowprimes = [2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];\r\nvar lplim = (1<<26)/lowprimes[lowprimes.length-1];\r\n\r\n// (public) test primality with certainty >= 1-.5^t\r\nfunction bnIsProbablePrime(t) {\r\n  var i, x = this.abs();\r\n  if(x.t == 1 && x[0] <= lowprimes[lowprimes.length-1]) {\r\n    for(i = 0; i < lowprimes.length; ++i)\r\n      if(x[0] == lowprimes[i]) return true;\r\n    return false;\r\n  }\r\n  if(x.isEven()) return false;\r\n  i = 1;\r\n  while(i < lowprimes.length) {\r\n    var m = lowprimes[i], j = i+1;\r\n    while(j < lowprimes.length && m < lplim) m *= lowprimes[j++];\r\n    m = x.modInt(m);\r\n    while(i < j) if(m%lowprimes[i++] == 0) return false;\r\n  }\r\n  return x.millerRabin(t);\r\n}\r\n\r\n// (protected) true if probably prime (HAC 4.24, Miller-Rabin)\r\nfunction bnpMillerRabin(t) {\r\n  var n1 = this.subtract(BigInteger.ONE);\r\n  var k = n1.getLowestSetBit();\r\n  if(k <= 0) return false;\r\n  var r = n1.shiftRight(k);\r\n  t = (t+1)>>1;\r\n  if(t > lowprimes.length) t = lowprimes.length;\r\n  var a = nbi();\r\n  for(var i = 0; i < t; ++i) {\r\n    //Pick bases at random, instead of starting at 2\r\n    a.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);\r\n    var y = a.modPow(r,this);\r\n    if(y.compareTo(BigInteger.ONE) != 0 && y.compareTo(n1) != 0) {\r\n      var j = 1;\r\n      while(j++ < k && y.compareTo(n1) != 0) {\r\n        y = y.modPowInt(2,this);\r\n        if(y.compareTo(BigInteger.ONE) == 0) return false;\r\n      }\r\n      if(y.compareTo(n1) != 0) return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\n// protected\r\nBigInteger.prototype.chunkSize = bnpChunkSize;\r\nBigInteger.prototype.toRadix = bnpToRadix;\r\nBigInteger.prototype.fromRadix = bnpFromRadix;\r\nBigInteger.prototype.fromNumber = bnpFromNumber;\r\nBigInteger.prototype.bitwiseTo = bnpBitwiseTo;\r\nBigInteger.prototype.changeBit = bnpChangeBit;\r\nBigInteger.prototype.addTo = bnpAddTo;\r\nBigInteger.prototype.dMultiply = bnpDMultiply;\r\nBigInteger.prototype.dAddOffset = bnpDAddOffset;\r\nBigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo;\r\nBigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo;\r\nBigInteger.prototype.modInt = bnpModInt;\r\nBigInteger.prototype.millerRabin = bnpMillerRabin;\r\n\r\n// public\r\nBigInteger.prototype.clone = bnClone;\r\nBigInteger.prototype.intValue = bnIntValue;\r\nBigInteger.prototype.byteValue = bnByteValue;\r\nBigInteger.prototype.shortValue = bnShortValue;\r\nBigInteger.prototype.signum = bnSigNum;\r\nBigInteger.prototype.toByteArray = bnToByteArray;\r\nBigInteger.prototype.equals = bnEquals;\r\nBigInteger.prototype.min = bnMin;\r\nBigInteger.prototype.max = bnMax;\r\nBigInteger.prototype.and = bnAnd;\r\nBigInteger.prototype.or = bnOr;\r\nBigInteger.prototype.xor = bnXor;\r\nBigInteger.prototype.andNot = bnAndNot;\r\nBigInteger.prototype.not = bnNot;\r\nBigInteger.prototype.shiftLeft = bnShiftLeft;\r\nBigInteger.prototype.shiftRight = bnShiftRight;\r\nBigInteger.prototype.getLowestSetBit = bnGetLowestSetBit;\r\nBigInteger.prototype.bitCount = bnBitCount;\r\nBigInteger.prototype.testBit = bnTestBit;\r\nBigInteger.prototype.setBit = bnSetBit;\r\nBigInteger.prototype.clearBit = bnClearBit;\r\nBigInteger.prototype.flipBit = bnFlipBit;\r\nBigInteger.prototype.add = bnAdd;\r\nBigInteger.prototype.subtract = bnSubtract;\r\nBigInteger.prototype.multiply = bnMultiply;\r\nBigInteger.prototype.divide = bnDivide;\r\nBigInteger.prototype.remainder = bnRemainder;\r\nBigInteger.prototype.divideAndRemainder = bnDivideAndRemainder;\r\nBigInteger.prototype.modPow = bnModPow;\r\nBigInteger.prototype.modInverse = bnModInverse;\r\nBigInteger.prototype.pow = bnPow;\r\nBigInteger.prototype.gcd = bnGCD;\r\nBigInteger.prototype.isProbablePrime = bnIsProbablePrime;\r\n\r\n// JSBN-specific extension\r\nBigInteger.prototype.square = bnSquare;\r\n\r\n// BigInteger interfaces not implemented in jsbn:\r\n\r\n// BigInteger(int signum, byte[] magnitude)\r\n// double doubleValue()\r\n// float floatValue()\r\n// int hashCode()\r\n// long longValue()\r\n// static BigInteger valueOf(long val)\r\n","// Version 1.1: support utf-8 encoding in pkcs1pad2\r\n\r\n// convert a (hex) string to a bignum object\r\n\r\nimport {BigInteger} from \"./jsbn2\";\r\nimport {SecureRandom} from \"./rng\";\r\n\r\nexport function parseBigInt(str,r) {\r\n  return new BigInteger(str,r);\r\n}\r\n\r\nfunction linebrk(s,n) {\r\n  var ret = \"\";\r\n  var i = 0;\r\n  while(i + n < s.length) {\r\n    ret += s.substring(i,i+n) + \"\\n\";\r\n    i += n;\r\n  }\r\n  return ret + s.substring(i,s.length);\r\n}\r\n\r\nfunction byte2Hex(b) {\r\n  if(b < 0x10)\r\n    return \"0\" + b.toString(16);\r\n  else\r\n    return b.toString(16);\r\n}\r\n\r\n// PKCS#1 (type 2, random) pad input string s to n bytes, and return a bigint\r\nfunction pkcs1pad2(s,n) {\r\n  if(n < s.length + 11) { // TODO: fix for utf-8\r\n    console.error(\"Message too long for RSA\");\r\n    return null;\r\n  }\r\n  var ba = [];\r\n  var i = s.length - 1;\r\n  while(i >= 0 && n > 0) {\r\n    var c = s.charCodeAt(i--);\r\n    if(c < 128) { // encode using utf-8\r\n      ba[--n] = c;\r\n    }\r\n    else if((c > 127) && (c < 2048)) {\r\n      ba[--n] = (c & 63) | 128;\r\n      ba[--n] = (c >> 6) | 192;\r\n    }\r\n    else {\r\n      ba[--n] = (c & 63) | 128;\r\n      ba[--n] = ((c >> 6) & 63) | 128;\r\n      ba[--n] = (c >> 12) | 224;\r\n    }\r\n  }\r\n  ba[--n] = 0;\r\n  var rng = new SecureRandom();\r\n  var x = [];\r\n  while(n > 2) { // random non-zero pad\r\n    x[0] = 0;\r\n    while(x[0] == 0) rng.nextBytes(x);\r\n    ba[--n] = x[0];\r\n  }\r\n  ba[--n] = 2;\r\n  ba[--n] = 0;\r\n  return new BigInteger(ba);\r\n}\r\n\r\n// \"empty\" RSA key constructor\r\nexport class RSAKey {\r\n  constructor() {\r\n    this.n = null;\r\n    this.e = 0;\r\n    this.d = null;\r\n    this.p = null;\r\n    this.q = null;\r\n    this.dmp1 = null;\r\n    this.dmq1 = null;\r\n    this.coeff = null;\r\n  }\r\n}\r\n\r\n// Set the public key fields N and e from hex strings\r\nfunction RSASetPublic(N,E) {\r\n  if(N != null && E != null && N.length > 0 && E.length > 0) {\r\n    this.n = parseBigInt(N,16);\r\n    this.e = parseInt(E,16);\r\n  }\r\n  else\r\n    console.error(\"Invalid RSA public key\");\r\n}\r\n\r\n// Perform raw public operation on \"x\": return x^e (mod n)\r\nfunction RSADoPublic(x) {\r\n  return x.modPowInt(this.e, this.n);\r\n}\r\n\r\n// Return the PKCS#1 RSA encryption of \"text\" as an even-length hex string\r\nfunction RSAEncrypt(text) {\r\n  var m = pkcs1pad2(text,(this.n.bitLength()+7)>>3);\r\n  if(m == null) return null;\r\n  var c = this.doPublic(m);\r\n  if(c == null) return null;\r\n  var h = c.toString(16);\r\n  if((h.length & 1) == 0) return h; else return \"0\" + h;\r\n}\r\n\r\n// Return the PKCS#1 RSA encryption of \"text\" as a Base64-encoded string\r\n//function RSAEncryptB64(text) {\r\n//  var h = this.encrypt(text);\r\n//  if(h) return hex2b64(h); else return null;\r\n//}\r\n\r\n// protected\r\nRSAKey.prototype.doPublic = RSADoPublic;\r\n\r\n// public\r\nRSAKey.prototype.setPublic = RSASetPublic;\r\nRSAKey.prototype.encrypt = RSAEncrypt;\r\n//RSAKey.prototype.encrypt_b64 = RSAEncryptB64;\r\n","// Version 1.1: support utf-8 decoding in pkcs1unpad2\r\n\r\n// Undo PKCS#1 (type 2, random) padding and, if valid, return the plaintext\r\n\r\nimport {SecureRandom} from \"./rng\";\r\nimport {BigInteger} from \"./jsbn\";\r\nimport {parseBigInt} from \"./rsa\";\r\nimport {RSAKey} from \"./rsa\";\r\nexport {RSAKey} from \"./rsa\";\r\n\r\nfunction pkcs1unpad2(d,n) {\r\n  var b = d.toByteArray();\r\n  var i = 0;\r\n  while(i < b.length && b[i] == 0) ++i;\r\n  if(b.length-i != n-1 || b[i] != 2)\r\n    return null;\r\n  ++i;\r\n  while(b[i] != 0)\r\n    if(++i >= b.length) return null;\r\n  var ret = \"\";\r\n  while(++i < b.length) {\r\n    var c = b[i] & 255;\r\n    if(c < 128) { // utf-8 decode\r\n      ret += String.fromCharCode(c);\r\n    }\r\n    else if((c > 191) && (c < 224)) {\r\n      ret += String.fromCharCode(((c & 31) << 6) | (b[i+1] & 63));\r\n      ++i;\r\n    }\r\n    else {\r\n      ret += String.fromCharCode(((c & 15) << 12) | ((b[i+1] & 63) << 6) | (b[i+2] & 63));\r\n      i += 2;\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n\r\n// Set the private key fields N, e, and d from hex strings\r\nfunction RSASetPrivate(N,E,D) {\r\n  if(N != null && E != null && N.length > 0 && E.length > 0) {\r\n    this.n = parseBigInt(N,16);\r\n    this.e = parseInt(E,16);\r\n    this.d = parseBigInt(D,16);\r\n  }\r\n  else\r\n    console.error(\"Invalid RSA private key\");\r\n}\r\n\r\n// Set the private key fields N, e, d and CRT params from hex strings\r\nfunction RSASetPrivateEx(N,E,D,P,Q,DP,DQ,C) {\r\n  if(N != null && E != null && N.length > 0 && E.length > 0) {\r\n    this.n = parseBigInt(N,16);\r\n    this.e = parseInt(E,16);\r\n    this.d = parseBigInt(D,16);\r\n    this.p = parseBigInt(P,16);\r\n    this.q = parseBigInt(Q,16);\r\n    this.dmp1 = parseBigInt(DP,16);\r\n    this.dmq1 = parseBigInt(DQ,16);\r\n    this.coeff = parseBigInt(C,16);\r\n  }\r\n  else\r\n    console.error(\"Invalid RSA private key\");\r\n}\r\n\r\n// Generate a new random private key B bits long, using public expt E\r\nfunction RSAGenerate(B,E) {\r\n  var rng = new SecureRandom();\r\n  var qs = B>>1;\r\n  this.e = parseInt(E,16);\r\n  var ee = new BigInteger(E,16);\r\n  for(;;) {\r\n    for(;;) {\r\n      this.p = new BigInteger(B-qs,1,rng);\r\n      if(this.p.subtract(BigInteger.ONE).gcd(ee).compareTo(BigInteger.ONE) == 0 && this.p.isProbablePrime(10)) break;\r\n    }\r\n    for(;;) {\r\n      this.q = new BigInteger(qs,1,rng);\r\n      if(this.q.subtract(BigInteger.ONE).gcd(ee).compareTo(BigInteger.ONE) == 0 && this.q.isProbablePrime(10)) break;\r\n    }\r\n    if(this.p.compareTo(this.q) <= 0) {\r\n      var t = this.p;\r\n      this.p = this.q;\r\n      this.q = t;\r\n    }\r\n    var p1 = this.p.subtract(BigInteger.ONE);\r\n    var q1 = this.q.subtract(BigInteger.ONE);\r\n    var phi = p1.multiply(q1);\r\n    if(phi.gcd(ee).compareTo(BigInteger.ONE) == 0) {\r\n      this.n = this.p.multiply(this.q);\r\n      this.d = ee.modInverse(phi);\r\n      this.dmp1 = this.d.mod(p1);\r\n      this.dmq1 = this.d.mod(q1);\r\n      this.coeff = this.q.modInverse(this.p);\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\n// Perform raw private operation on \"x\": return x^d (mod n)\r\nfunction RSADoPrivate(x) {\r\n  if(this.p == null || this.q == null)\r\n    return x.modPow(this.d, this.n);\r\n\r\n  // TODO: re-calculate any missing CRT params\r\n  var xp = x.mod(this.p).modPow(this.dmp1, this.p);\r\n  var xq = x.mod(this.q).modPow(this.dmq1, this.q);\r\n\r\n  while(xp.compareTo(xq) < 0)\r\n    xp = xp.add(this.p);\r\n  return xp.subtract(xq).multiply(this.coeff).mod(this.p).multiply(this.q).add(xq);\r\n}\r\n\r\n// Return the PKCS#1 RSA decryption of \"ctext\".\r\n// \"ctext\" is an even-length hex string and the output is a plain string.\r\nfunction RSADecrypt(ctext) {\r\n  var c = parseBigInt(ctext, 16);\r\n  var m = this.doPrivate(c);\r\n  if(m == null) return null;\r\n  return pkcs1unpad2(m, (this.n.bitLength()+7)>>3);\r\n}\r\n\r\n// Return the PKCS#1 RSA decryption of \"ctext\".\r\n// \"ctext\" is a Base64-encoded string and the output is a plain string.\r\n//function RSAB64Decrypt(ctext) {\r\n//  var h = b64tohex(ctext);\r\n//  if(h) return this.decrypt(h); else return null;\r\n//}\r\n\r\n// protected\r\nRSAKey.prototype.doPrivate = RSADoPrivate;\r\n\r\n// public\r\nRSAKey.prototype.setPrivate = RSASetPrivate;\r\nRSAKey.prototype.setPrivateEx = RSASetPrivateEx;\r\nRSAKey.prototype.generate = RSAGenerate;\r\nRSAKey.prototype.decrypt = RSADecrypt;\r\n//RSAKey.prototype.b64_decrypt = RSAB64Decrypt;","// Base64 JavaScript decoder\r\n// Copyright (c) 2008-2013 Lapo Luchini <lapo@lapo.it>\r\n\r\n// Permission to use, copy, modify, and/or distribute this software for any\r\n// purpose with or without fee is hereby granted, provided that the above\r\n// copyright notice and this permission notice appear in all copies.\r\n// \r\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\r\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\r\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\r\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\r\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\r\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\r\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\r\n\r\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\r\n\r\nexport const Base64 = {};\r\nlet decoder;\r\n\r\nBase64.decode = function (a) {\r\n    var i;\r\n    if (decoder === undefined) {\r\n        var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",\r\n            ignore = \"= \\f\\n\\r\\t\\u00A0\\u2028\\u2029\";\r\n        decoder = [];\r\n        for (i = 0; i < 64; ++i)\r\n            decoder[b64.charAt(i)] = i;\r\n        for (i = 0; i < ignore.length; ++i)\r\n            decoder[ignore.charAt(i)] = -1;\r\n    }\r\n    var out = [];\r\n    var bits = 0, char_count = 0;\r\n    for (i = 0; i < a.length; ++i) {\r\n        var c = a.charAt(i);\r\n        if (c == '=')\r\n            break;\r\n        c = decoder[c];\r\n        if (c == -1)\r\n            continue;\r\n        if (c === undefined)\r\n            throw 'Illegal character at offset ' + i;\r\n        bits |= c;\r\n        if (++char_count >= 4) {\r\n            out[out.length] = (bits >> 16);\r\n            out[out.length] = (bits >> 8) & 0xFF;\r\n            out[out.length] = bits & 0xFF;\r\n            bits = 0;\r\n            char_count = 0;\r\n        } else {\r\n            bits <<= 6;\r\n        }\r\n    }\r\n    switch (char_count) {\r\n      case 1:\r\n        throw \"Base64 encoding incomplete: at least 2 bits missing\";\r\n      case 2:\r\n        out[out.length] = (bits >> 10);\r\n        break;\r\n      case 3:\r\n        out[out.length] = (bits >> 16);\r\n        out[out.length] = (bits >> 8) & 0xFF;\r\n        break;\r\n    }\r\n    return out;\r\n};\r\n\r\nBase64.re = /-----BEGIN [^-]+-----([A-Za-z0-9+\\/=\\s]+)-----END [^-]+-----|begin-base64[^\\n]+\\n([A-Za-z0-9+\\/=\\s]+)====/;\r\nBase64.unarmor = function (a) {\r\n    var m = Base64.re.exec(a);\r\n    if (m) {\r\n        if (m[1])\r\n            a = m[1];\r\n        else if (m[2])\r\n            a = m[2];\r\n        else\r\n            throw \"RegExp out of sync\";\r\n    }\r\n    return Base64.decode(a);\r\n};\r\n","// Hex JavaScript decoder\r\n// Copyright (c) 2008-2013 Lapo Luchini <lapo@lapo.it>\r\n\r\n// Permission to use, copy, modify, and/or distribute this software for any\r\n// purpose with or without fee is hereby granted, provided that the above\r\n// copyright notice and this permission notice appear in all copies.\r\n// \r\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\r\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\r\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\r\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\r\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\r\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\r\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\r\n\r\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\r\nexport const Hex = {};\r\nlet decoder;\r\n\r\nHex.decode = function(a) {\r\n    var i;\r\n    if (decoder === undefined) {\r\n        var hex = \"0123456789ABCDEF\",\r\n            ignore = \" \\f\\n\\r\\t\\u00A0\\u2028\\u2029\";\r\n        decoder = [];\r\n        for (i = 0; i < 16; ++i)\r\n            decoder[hex.charAt(i)] = i;\r\n        hex = hex.toLowerCase();\r\n        for (i = 10; i < 16; ++i)\r\n            decoder[hex.charAt(i)] = i;\r\n        for (i = 0; i < ignore.length; ++i)\r\n            decoder[ignore.charAt(i)] = -1;\r\n    }\r\n    var out = [],\r\n        bits = 0,\r\n        char_count = 0;\r\n    for (i = 0; i < a.length; ++i) {\r\n        var c = a.charAt(i);\r\n        if (c == '=')\r\n            break;\r\n        c = decoder[c];\r\n        if (c == -1)\r\n            continue;\r\n        if (c === undefined)\r\n            throw 'Illegal character at offset ' + i;\r\n        bits |= c;\r\n        if (++char_count >= 2) {\r\n            out[out.length] = bits;\r\n            bits = 0;\r\n            char_count = 0;\r\n        } else {\r\n            bits <<= 4;\r\n        }\r\n    }\r\n    if (char_count)\r\n        throw \"Hex encoding incomplete: 4 bits missing\";\r\n    return out;\r\n};","import {BigInteger} from \"../jsbn/jsbn2\";\r\n/*! asn1-1.0.2.js (c) 2013 Kenji Urushima | kjur.github.com/jsrsasign/license\r\n */\r\n\r\nexport const JSX = /*window.JSX || */{};\r\nJSX.env = JSX.env || {};\r\n\r\nvar L = JSX, OP = Object.prototype, FUNCTION_TOSTRING = '[object Function]',ADD = [\"toString\", \"valueOf\"];\r\n\r\nJSX.env.parseUA = function(agent) {\r\n\r\n    var numberify = function(s) {\r\n        var c = 0;\r\n        return parseFloat(s.replace(/\\./g, function() {\r\n            return (c++ == 1) ? '' : '.';\r\n        }));\r\n    },\r\n\r\n    nav = navigator,\r\n    o = {\r\n        ie: 0,\r\n        opera: 0,\r\n        gecko: 0,\r\n        webkit: 0,\r\n        chrome: 0,\r\n        mobile: null,\r\n        air: 0,\r\n        ipad: 0,\r\n        iphone: 0,\r\n        ipod: 0,\r\n        ios: null,\r\n        android: 0,\r\n        webos: 0,\r\n        caja: nav && nav.cajaVersion,\r\n        secure: false,\r\n        os: null\r\n\r\n    },\r\n\r\n    ua = agent || (navigator && navigator.userAgent),\r\n    loc = window && window.location,\r\n    href = loc && loc.href,\r\n    m;\r\n\r\n    o.secure = href && (href.toLowerCase().indexOf(\"https\") === 0);\r\n\r\n    if (ua) {\r\n\r\n        if ((/windows|win32/i).test(ua)) {\r\n            o.os = 'windows';\r\n        } else if ((/macintosh/i).test(ua)) {\r\n            o.os = 'macintosh';\r\n        } else if ((/rhino/i).test(ua)) {\r\n            o.os = 'rhino';\r\n        }\r\n        if ((/KHTML/).test(ua)) {\r\n            o.webkit = 1;\r\n        }\r\n        m = ua.match(/AppleWebKit\\/([^\\s]*)/);\r\n        if (m && m[1]) {\r\n            o.webkit = numberify(m[1]);\r\n            if (/ Mobile\\//.test(ua)) {\r\n                o.mobile = 'Apple'; // iPhone or iPod Touch\r\n                m = ua.match(/OS ([^\\s]*)/);\r\n                if (m && m[1]) {\r\n                    m = numberify(m[1].replace('_', '.'));\r\n                }\r\n                o.ios = m;\r\n                o.ipad = o.ipod = o.iphone = 0;\r\n                m = ua.match(/iPad|iPod|iPhone/);\r\n                if (m && m[0]) {\r\n                    o[m[0].toLowerCase()] = o.ios;\r\n                }\r\n            } else {\r\n                m = ua.match(/NokiaN[^\\/]*|Android \\d\\.\\d|webOS\\/\\d\\.\\d/);\r\n                if (m) {\r\n                    o.mobile = m[0];\r\n                }\r\n                if (/webOS/.test(ua)) {\r\n                    o.mobile = 'WebOS';\r\n                    m = ua.match(/webOS\\/([^\\s]*);/);\r\n                    if (m && m[1]) {\r\n                        o.webos = numberify(m[1]);\r\n                    }\r\n                }\r\n                if (/ Android/.test(ua)) {\r\n                    o.mobile = 'Android';\r\n                    m = ua.match(/Android ([^\\s]*);/);\r\n                    if (m && m[1]) {\r\n                        o.android = numberify(m[1]);\r\n                    }\r\n                }\r\n            }\r\n            m = ua.match(/Chrome\\/([^\\s]*)/);\r\n            if (m && m[1]) {\r\n                o.chrome = numberify(m[1]); // Chrome\r\n            } else {\r\n                m = ua.match(/AdobeAIR\\/([^\\s]*)/);\r\n                if (m) {\r\n                    o.air = m[0]; // Adobe AIR 1.0 or better\r\n                }\r\n            }\r\n        }\r\n        if (!o.webkit) {\r\n            m = ua.match(/Opera[\\s\\/]([^\\s]*)/);\r\n            if (m && m[1]) {\r\n                o.opera = numberify(m[1]);\r\n                m = ua.match(/Version\\/([^\\s]*)/);\r\n                if (m && m[1]) {\r\n                    o.opera = numberify(m[1]); // opera 10+\r\n                }\r\n                m = ua.match(/Opera Mini[^;]*/);\r\n                if (m) {\r\n                    o.mobile = m[0]; // ex: Opera Mini/2.0.4509/1316\r\n                }\r\n            } else { // not opera or webkit\r\n                m = ua.match(/MSIE\\s([^;]*)/);\r\n                if (m && m[1]) {\r\n                    o.ie = numberify(m[1]);\r\n                } else { // not opera, webkit, or ie\r\n                    m = ua.match(/Gecko\\/([^\\s]*)/);\r\n                    if (m) {\r\n                        o.gecko = 1; // Gecko detected, look for revision\r\n                        m = ua.match(/rv:([^\\s\\)]*)/);\r\n                        if (m && m[1]) {\r\n                            o.gecko = numberify(m[1]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return o;\r\n};\r\n\r\nJSX.env.ua = JSX.env.parseUA();\r\n\r\nJSX.isFunction = function(o) {\r\n    return (typeof o === 'function') || OP.toString.apply(o) === FUNCTION_TOSTRING;\r\n};\r\n\r\nJSX._IEEnumFix = (JSX.env.ua.ie) ? function(r, s) {\r\n    var i, fname, f;\r\n    for (i=0;i<ADD.length;i=i+1) {\r\n\r\n        fname = ADD[i];\r\n        f = s[fname];\r\n\r\n        if (L.isFunction(f) && f!=OP[fname]) {\r\n            r[fname]=f;\r\n        }\r\n    }\r\n} : function(){};\r\n\r\nJSX.extend = function(subc, superc, overrides) {\r\n    if (!superc||!subc) {\r\n        throw new Error(\"extend failed, please check that \" +\r\n                        \"all dependencies are included.\");\r\n    }\r\n    var F = function() {}, i;\r\n    F.prototype=superc.prototype;\r\n    subc.prototype=new F();\r\n    subc.prototype.constructor=subc;\r\n    subc.superclass=superc.prototype;\r\n    if (superc.prototype.constructor == OP.constructor) {\r\n        superc.prototype.constructor=superc;\r\n    }\r\n\r\n    if (overrides) {\r\n        for (i in overrides) {\r\n            if (L.hasOwnProperty(overrides, i)) {\r\n                subc.prototype[i]=overrides[i];\r\n            }\r\n        }\r\n\r\n        L._IEEnumFix(subc.prototype, overrides);\r\n    }\r\n};\r\n\r\n/*\r\n * asn1.js - ASN.1 DER encoder classes\r\n *\r\n * Copyright (c) 2013 Kenji Urushima (kenji.urushima@gmail.com)\r\n *\r\n * This software is licensed under the terms of the MIT License.\r\n * http://kjur.github.com/jsrsasign/license\r\n *\r\n * The above copyright and license notice shall be \r\n * included in all copies or substantial portions of the Software.\r\n */\r\n\r\n/**\r\n * @fileOverview\r\n * @name asn1-1.0.js\r\n * @author Kenji Urushima kenji.urushima@gmail.com\r\n * @version 1.0.2 (2013-May-30)\r\n * @since 2.1\r\n * @license <a href=\"http://kjur.github.io/jsrsasign/license/\">MIT License</a>\r\n */\r\n\r\n/** \r\n * kjur's class library name space\r\n * <p>\r\n * This name space provides following name spaces:\r\n * <ul>\r\n * <li>{@link KJUR.asn1} - ASN.1 primitive hexadecimal encoder</li>\r\n * <li>{@link KJUR.asn1.x509} - ASN.1 structure for X.509 certificate and CRL</li>\r\n * <li>{@link KJUR.crypto} - Java Cryptographic Extension(JCE) style MessageDigest/Signature \r\n * class and utilities</li>\r\n * </ul>\r\n * </p> \r\n * NOTE: Please ignore method summary and document of this namespace. This caused by a bug of jsdoc2.\r\n  * @name KJUR\r\n * @namespace kjur's class library name space\r\n */\r\n// if (typeof KJUR == \"undefined\" || !KJUR)\r\nexport const KJUR = {};\r\n\r\n/**\r\n * kjur's ASN.1 class library name space\r\n * <p>\r\n * This is ITU-T X.690 ASN.1 DER encoder class library and\r\n * class structure and methods is very similar to \r\n * org.bouncycastle.asn1 package of \r\n * well known BouncyCaslte Cryptography Library.\r\n *\r\n * <h4>PROVIDING ASN.1 PRIMITIVES</h4>\r\n * Here are ASN.1 DER primitive classes.\r\n * <ul>\r\n * <li>{@link KJUR.asn1.DERBoolean}</li>\r\n * <li>{@link KJUR.asn1.DERInteger}</li>\r\n * <li>{@link KJUR.asn1.DERBitString}</li>\r\n * <li>{@link KJUR.asn1.DEROctetString}</li>\r\n * <li>{@link KJUR.asn1.DERNull}</li>\r\n * <li>{@link KJUR.asn1.DERObjectIdentifier}</li>\r\n * <li>{@link KJUR.asn1.DERUTF8String}</li>\r\n * <li>{@link KJUR.asn1.DERNumericString}</li>\r\n * <li>{@link KJUR.asn1.DERPrintableString}</li>\r\n * <li>{@link KJUR.asn1.DERTeletexString}</li>\r\n * <li>{@link KJUR.asn1.DERIA5String}</li>\r\n * <li>{@link KJUR.asn1.DERUTCTime}</li>\r\n * <li>{@link KJUR.asn1.DERGeneralizedTime}</li>\r\n * <li>{@link KJUR.asn1.DERSequence}</li>\r\n * <li>{@link KJUR.asn1.DERSet}</li>\r\n * </ul>\r\n *\r\n * <h4>OTHER ASN.1 CLASSES</h4>\r\n * <ul>\r\n * <li>{@link KJUR.asn1.ASN1Object}</li>\r\n * <li>{@link KJUR.asn1.DERAbstractString}</li>\r\n * <li>{@link KJUR.asn1.DERAbstractTime}</li>\r\n * <li>{@link KJUR.asn1.DERAbstractStructured}</li>\r\n * <li>{@link KJUR.asn1.DERTaggedObject}</li>\r\n * </ul>\r\n * </p>\r\n * NOTE: Please ignore method summary and document of this namespace. This caused by a bug of jsdoc2.\r\n * @name KJUR.asn1\r\n * @namespace\r\n */\r\nif (typeof KJUR.asn1 == \"undefined\" || !KJUR.asn1) KJUR.asn1 = {};\r\n\r\n/**\r\n * ASN1 utilities class\r\n * @name KJUR.asn1.ASN1Util\r\n * @classs ASN1 utilities class\r\n * @since asn1 1.0.2\r\n */\r\nKJUR.asn1.ASN1Util = new function() {\r\n    this.integerToByteHex = function(i) {\r\n\tvar h = i.toString(16);\r\n\tif ((h.length % 2) == 1) h = '0' + h;\r\n\treturn h;\r\n    };\r\n    this.bigIntToMinTwosComplementsHex = function(bigIntegerValue) {\r\n\tvar h = bigIntegerValue.toString(16);\r\n\tif (h.substr(0, 1) != '-') {\r\n\t    if (h.length % 2 == 1) {\r\n\t\th = '0' + h;\r\n\t    } else {\r\n\t\tif (! h.match(/^[0-7]/)) {\r\n\t\t    h = '00' + h;\r\n\t\t}\r\n\t    }\r\n\t} else {\r\n\t    var hPos = h.substr(1);\r\n\t    var xorLen = hPos.length;\r\n\t    if (xorLen % 2 == 1) {\r\n\t\txorLen += 1;\r\n\t    } else {\r\n\t\tif (! h.match(/^[0-7]/)) {\r\n\t\t    xorLen += 2;\r\n\t\t}\r\n\t    }\r\n\t    var hMask = '';\r\n\t    for (var i = 0; i < xorLen; i++) {\r\n\t\thMask += 'f';\r\n\t    }\r\n\t    var biMask = new BigInteger(hMask, 16);\r\n\t    var biNeg = biMask.xor(bigIntegerValue).add(BigInteger.ONE);\r\n\t    h = biNeg.toString(16).replace(/^-/, '');\r\n\t}\r\n\treturn h;\r\n    };\r\n    /**\r\n     * get PEM string from hexadecimal data and header string\r\n     * @name getPEMStringFromHex\r\n     * @memberOf KJUR.asn1.ASN1Util\r\n     * @function\r\n     * @param {String} dataHex hexadecimal string of PEM body\r\n     * @param {String} pemHeader PEM header string (ex. 'RSA PRIVATE KEY')\r\n     * @return {String} PEM formatted string of input data\r\n     * @description\r\n     * @example\r\n     * var pem  = KJUR.asn1.ASN1Util.getPEMStringFromHex('616161', 'RSA PRIVATE KEY');\r\n     * // value of pem will be:\r\n     * -----BEGIN PRIVATE KEY-----\r\n     * YWFh\r\n     * -----END PRIVATE KEY-----\r\n     */\r\n    this.getPEMStringFromHex = function(dataHex, pemHeader) {\r\n\tvar dataWA = CryptoJS.enc.Hex.parse(dataHex);\r\n\tvar dataB64 = CryptoJS.enc.Base64.stringify(dataWA);\r\n\tvar pemBody = dataB64.replace(/(.{64})/g, \"$1\\r\\n\");\r\n        pemBody = pemBody.replace(/\\r\\n$/, '');\r\n\treturn \"-----BEGIN \" + pemHeader + \"-----\\r\\n\" + \r\n               pemBody + \r\n               \"\\r\\n-----END \" + pemHeader + \"-----\\r\\n\";\r\n    };\r\n};\r\n\r\n// ********************************************************************\r\n//  Abstract ASN.1 Classes\r\n// ********************************************************************\r\n\r\n// ********************************************************************\r\n\r\n/**\r\n * base class for ASN.1 DER encoder object\r\n * @name KJUR.asn1.ASN1Object\r\n * @class base class for ASN.1 DER encoder object\r\n * @property {Boolean} isModified flag whether internal data was changed\r\n * @property {String} hTLV hexadecimal string of ASN.1 TLV\r\n * @property {String} hT hexadecimal string of ASN.1 TLV tag(T)\r\n * @property {String} hL hexadecimal string of ASN.1 TLV length(L)\r\n * @property {String} hV hexadecimal string of ASN.1 TLV value(V)\r\n * @description\r\n */\r\nKJUR.asn1.ASN1Object = function() {\r\n    var isModified = true;\r\n    var hTLV = null;\r\n    var hT = '00'\r\n    var hL = '00';\r\n    var hV = '';\r\n\r\n    /**\r\n     * get hexadecimal ASN.1 TLV length(L) bytes from TLV value(V)\r\n     * @name getLengthHexFromValue\r\n     * @memberOf KJUR.asn1.ASN1Object\r\n     * @function\r\n     * @return {String} hexadecimal string of ASN.1 TLV length(L)\r\n     */\r\n    this.getLengthHexFromValue = function() {\r\n\tif (typeof this.hV == \"undefined\" || this.hV == null) {\r\n\t    throw \"this.hV is null or undefined.\";\r\n\t}\r\n\tif (this.hV.length % 2 == 1) {\r\n\t    throw \"value hex must be even length: n=\" + hV.length + \",v=\" + this.hV;\r\n\t}\r\n\tvar n = this.hV.length / 2;\r\n\tvar hN = n.toString(16);\r\n\tif (hN.length % 2 == 1) {\r\n\t    hN = \"0\" + hN;\r\n\t}\r\n\tif (n < 128) {\r\n\t    return hN;\r\n\t} else {\r\n\t    var hNlen = hN.length / 2;\r\n\t    if (hNlen > 15) {\r\n\t\tthrow \"ASN.1 length too long to represent by 8x: n = \" + n.toString(16);\r\n\t    }\r\n\t    var head = 128 + hNlen;\r\n\t    return head.toString(16) + hN;\r\n\t}\r\n    };\r\n\r\n    /**\r\n     * get hexadecimal string of ASN.1 TLV bytes\r\n     * @name getEncodedHex\r\n     * @memberOf KJUR.asn1.ASN1Object\r\n     * @function\r\n     * @return {String} hexadecimal string of ASN.1 TLV\r\n     */\r\n    this.getEncodedHex = function() {\r\n\tif (this.hTLV == null || this.isModified) {\r\n\t    this.hV = this.getFreshValueHex();\r\n\t    this.hL = this.getLengthHexFromValue();\r\n\t    this.hTLV = this.hT + this.hL + this.hV;\r\n\t    this.isModified = false;\r\n\t    //console.error(\"first time: \" + this.hTLV);\r\n\t}\r\n\treturn this.hTLV;\r\n    };\r\n\r\n    /**\r\n     * get hexadecimal string of ASN.1 TLV value(V) bytes\r\n     * @name getValueHex\r\n     * @memberOf KJUR.asn1.ASN1Object\r\n     * @function\r\n     * @return {String} hexadecimal string of ASN.1 TLV value(V) bytes\r\n     */\r\n    this.getValueHex = function() {\r\n\tthis.getEncodedHex();\r\n\treturn this.hV;\r\n    }\r\n\r\n    this.getFreshValueHex = function() {\r\n\treturn '';\r\n    };\r\n};\r\n\r\n// == BEGIN DERAbstractString ================================================\r\n/**\r\n * base class for ASN.1 DER string classes\r\n * @name KJUR.asn1.DERAbstractString\r\n * @class base class for ASN.1 DER string classes\r\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\r\n * @property {String} s internal string of value\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>str - specify initial ASN.1 value(V) by a string</li>\r\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n */\r\nKJUR.asn1.DERAbstractString = function(params) {\r\n    KJUR.asn1.DERAbstractString.superclass.constructor.call(this);\r\n    var s = null;\r\n    var hV = null;\r\n\r\n    /**\r\n     * get string value of this string object\r\n     * @name getString\r\n     * @memberOf KJUR.asn1.DERAbstractString\r\n     * @function\r\n     * @return {String} string value of this string object\r\n     */\r\n    this.getString = function() {\r\n\treturn this.s;\r\n    };\r\n\r\n    /**\r\n     * set value by a string\r\n     * @name setString\r\n     * @memberOf KJUR.asn1.DERAbstractString\r\n     * @function\r\n     * @param {String} newS value by a string to set\r\n     */\r\n    this.setString = function(newS) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.s = newS;\r\n\tthis.hV = stohex(this.s);\r\n    };\r\n\r\n    /**\r\n     * set value by a hexadecimal string\r\n     * @name setStringHex\r\n     * @memberOf KJUR.asn1.DERAbstractString\r\n     * @function\r\n     * @param {String} newHexString value by a hexadecimal string to set\r\n     */\r\n    this.setStringHex = function(newHexString) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.s = null;\r\n\tthis.hV = newHexString;\r\n    };\r\n\r\n    this.getFreshValueHex = function() {\r\n\treturn this.hV;\r\n    };\r\n\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['str'] != \"undefined\") {\r\n\t    this.setString(params['str']);\r\n\t} else if (typeof params['hex'] != \"undefined\") {\r\n\t    this.setStringHex(params['hex']);\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERAbstractString, KJUR.asn1.ASN1Object);\r\n// == END   DERAbstractString ================================================\r\n\r\n// == BEGIN DERAbstractTime ==================================================\r\n/**\r\n * base class for ASN.1 DER Generalized/UTCTime class\r\n * @name KJUR.asn1.DERAbstractTime\r\n * @class base class for ASN.1 DER Generalized/UTCTime class\r\n * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * @see KJUR.asn1.ASN1Object - superclass\r\n */\r\nKJUR.asn1.DERAbstractTime = function(params) {\r\n    KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);\r\n    var s = null;\r\n    var date = null;\r\n\r\n    // --- PRIVATE METHODS --------------------\r\n    this.localDateToUTC = function(d) {\r\n\tutc = d.getTime() + (d.getTimezoneOffset() * 60000);\r\n\tvar utcDate = new Date(utc);\r\n\treturn utcDate;\r\n    };\r\n\r\n    this.formatDate = function(dateObject, type) {\r\n\tvar pad = this.zeroPadding;\r\n\tvar d = this.localDateToUTC(dateObject);\r\n\tvar year = String(d.getFullYear());\r\n\tif (type == 'utc') year = year.substr(2, 2);\r\n\tvar month = pad(String(d.getMonth() + 1), 2);\r\n\tvar day = pad(String(d.getDate()), 2);\r\n\tvar hour = pad(String(d.getHours()), 2);\r\n\tvar min = pad(String(d.getMinutes()), 2);\r\n\tvar sec = pad(String(d.getSeconds()), 2);\r\n\treturn year + month + day + hour + min + sec + 'Z';\r\n    };\r\n\r\n    this.zeroPadding = function(s, len) {\r\n\tif (s.length >= len) return s;\r\n\treturn new Array(len - s.length + 1).join('0') + s;\r\n    };\r\n\r\n    // --- PUBLIC METHODS --------------------\r\n    /**\r\n     * get string value of this string object\r\n     * @name getString\r\n     * @memberOf KJUR.asn1.DERAbstractTime\r\n     * @function\r\n     * @return {String} string value of this time object\r\n     */\r\n    this.getString = function() {\r\n\treturn this.s;\r\n    };\r\n\r\n    /**\r\n     * set value by a string\r\n     * @name setString\r\n     * @memberOf KJUR.asn1.DERAbstractTime\r\n     * @function\r\n     * @param {String} newS value by a string to set such like \"130430235959Z\"\r\n     */\r\n    this.setString = function(newS) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.s = newS;\r\n\tthis.hV = stohex(this.s);\r\n    };\r\n\r\n    /**\r\n     * set value by a Date object\r\n     * @name setByDateValue\r\n     * @memberOf KJUR.asn1.DERAbstractTime\r\n     * @function\r\n     * @param {Integer} year year of date (ex. 2013)\r\n     * @param {Integer} month month of date between 1 and 12 (ex. 12)\r\n     * @param {Integer} day day of month\r\n     * @param {Integer} hour hours of date\r\n     * @param {Integer} min minutes of date\r\n     * @param {Integer} sec seconds of date\r\n     */\r\n    this.setByDateValue = function(year, month, day, hour, min, sec) {\r\n\tvar dateObject = new Date(Date.UTC(year, month - 1, day, hour, min, sec, 0));\r\n\tthis.setByDate(dateObject);\r\n    };\r\n\r\n    this.getFreshValueHex = function() {\r\n\treturn this.hV;\r\n    };\r\n};\r\nJSX.extend(KJUR.asn1.DERAbstractTime, KJUR.asn1.ASN1Object);\r\n// == END   DERAbstractTime ==================================================\r\n\r\n// == BEGIN DERAbstractStructured ============================================\r\n/**\r\n * base class for ASN.1 DER structured class\r\n * @name KJUR.asn1.DERAbstractStructured\r\n * @class base class for ASN.1 DER structured class\r\n * @property {Array} asn1Array internal array of ASN1Object\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * @see KJUR.asn1.ASN1Object - superclass\r\n */\r\nKJUR.asn1.DERAbstractStructured = function(params) {\r\n    KJUR.asn1.DERAbstractString.superclass.constructor.call(this);\r\n    var asn1Array = null;\r\n\r\n    /**\r\n     * set value by array of ASN1Object\r\n     * @name setByASN1ObjectArray\r\n     * @memberOf KJUR.asn1.DERAbstractStructured\r\n     * @function\r\n     * @param {array} asn1ObjectArray array of ASN1Object to set\r\n     */\r\n    this.setByASN1ObjectArray = function(asn1ObjectArray) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.asn1Array = asn1ObjectArray;\r\n    };\r\n\r\n    /**\r\n     * append an ASN1Object to internal array\r\n     * @name appendASN1Object\r\n     * @memberOf KJUR.asn1.DERAbstractStructured\r\n     * @function\r\n     * @param {ASN1Object} asn1Object to add\r\n     */\r\n    this.appendASN1Object = function(asn1Object) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.asn1Array.push(asn1Object);\r\n    };\r\n\r\n    this.asn1Array = new Array();\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['array'] != \"undefined\") {\r\n\t    this.asn1Array = params['array'];\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERAbstractStructured, KJUR.asn1.ASN1Object);\r\n\r\n\r\n// ********************************************************************\r\n//  ASN.1 Object Classes\r\n// ********************************************************************\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER Boolean\r\n * @name KJUR.asn1.DERBoolean\r\n * @class class for ASN.1 DER Boolean\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * @see KJUR.asn1.ASN1Object - superclass\r\n */\r\nKJUR.asn1.DERBoolean = function() {\r\n    KJUR.asn1.DERBoolean.superclass.constructor.call(this);\r\n    this.hT = \"01\";\r\n    this.hTLV = \"0101ff\";\r\n};\r\nJSX.extend(KJUR.asn1.DERBoolean, KJUR.asn1.ASN1Object);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER Integer\r\n * @name KJUR.asn1.DERInteger\r\n * @class class for ASN.1 DER Integer\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>int - specify initial ASN.1 value(V) by integer value</li>\r\n * <li>bigint - specify initial ASN.1 value(V) by BigInteger object</li>\r\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n */\r\nKJUR.asn1.DERInteger = function(params) {\r\n    KJUR.asn1.DERInteger.superclass.constructor.call(this);\r\n    this.hT = \"02\";\r\n\r\n    /**\r\n     * set value by Tom Wu's BigInteger object\r\n     * @name setByBigInteger\r\n     * @memberOf KJUR.asn1.DERInteger\r\n     * @function\r\n     * @param {BigInteger} bigIntegerValue to set\r\n     */\r\n    this.setByBigInteger = function(bigIntegerValue) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue);\r\n    };\r\n\r\n    /**\r\n     * set value by integer value\r\n     * @name setByInteger\r\n     * @memberOf KJUR.asn1.DERInteger\r\n     * @function\r\n     * @param {Integer} integer value to set\r\n     */\r\n    this.setByInteger = function(intValue) {\r\n\tvar bi = new BigInteger(String(intValue), 10);\r\n\tthis.setByBigInteger(bi);\r\n    };\r\n\r\n    /**\r\n     * set value by integer value\r\n     * @name setValueHex\r\n     * @memberOf KJUR.asn1.DERInteger\r\n     * @function\r\n     * @param {String} hexadecimal string of integer value\r\n     * @description\r\n     * <br/>\r\n     * NOTE: Value shall be represented by minimum octet length of\r\n     * two's complement representation.\r\n     */\r\n    this.setValueHex = function(newHexString) {\r\n\tthis.hV = newHexString;\r\n    };\r\n\r\n    this.getFreshValueHex = function() {\r\n\treturn this.hV;\r\n    };\r\n\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['bigint'] != \"undefined\") {\r\n\t    this.setByBigInteger(params['bigint']);\r\n\t} else if (typeof params['int'] != \"undefined\") {\r\n\t    this.setByInteger(params['int']);\r\n\t} else if (typeof params['hex'] != \"undefined\") {\r\n\t    this.setValueHex(params['hex']);\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERInteger, KJUR.asn1.ASN1Object);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER encoded BitString primitive\r\n * @name KJUR.asn1.DERBitString\r\n * @class class for ASN.1 DER encoded BitString primitive\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description \r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>bin - specify binary string (ex. '10111')</li>\r\n * <li>array - specify array of boolean (ex. [true,false,true,true])</li>\r\n * <li>hex - specify hexadecimal string of ASN.1 value(V) including unused bits</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n */\r\nKJUR.asn1.DERBitString = function(params) {\r\n    KJUR.asn1.DERBitString.superclass.constructor.call(this);\r\n    this.hT = \"03\";\r\n\r\n    /**\r\n     * set ASN.1 value(V) by a hexadecimal string including unused bits\r\n     * @name setHexValueIncludingUnusedBits\r\n     * @memberOf KJUR.asn1.DERBitString\r\n     * @function\r\n     * @param {String} newHexStringIncludingUnusedBits\r\n     */\r\n    this.setHexValueIncludingUnusedBits = function(newHexStringIncludingUnusedBits) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.hV = newHexStringIncludingUnusedBits;\r\n    };\r\n\r\n    /**\r\n     * set ASN.1 value(V) by unused bit and hexadecimal string of value\r\n     * @name setUnusedBitsAndHexValue\r\n     * @memberOf KJUR.asn1.DERBitString\r\n     * @function\r\n     * @param {Integer} unusedBits\r\n     * @param {String} hValue\r\n     */\r\n    this.setUnusedBitsAndHexValue = function(unusedBits, hValue) {\r\n\tif (unusedBits < 0 || 7 < unusedBits) {\r\n\t    throw \"unused bits shall be from 0 to 7: u = \" + unusedBits;\r\n\t}\r\n\tvar hUnusedBits = \"0\" + unusedBits;\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.hV = hUnusedBits + hValue;\r\n    };\r\n\r\n    /**\r\n     * set ASN.1 DER BitString by binary string\r\n     * @name setByBinaryString\r\n     * @memberOf KJUR.asn1.DERBitString\r\n     * @function\r\n     * @param {String} binaryString binary value string (i.e. '10111')\r\n     * @description\r\n     * Its unused bits will be calculated automatically by length of \r\n     * 'binaryValue'. <br/>\r\n     * NOTE: Trailing zeros '0' will be ignored.\r\n     */\r\n    this.setByBinaryString = function(binaryString) {\r\n\tbinaryString = binaryString.replace(/0+$/, '');\r\n\tvar unusedBits = 8 - binaryString.length % 8;\r\n\tif (unusedBits == 8) unusedBits = 0;\r\n\tfor (var i = 0; i <= unusedBits; i++) {\r\n\t    binaryString += '0';\r\n\t}\r\n\tvar h = '';\r\n\tfor (var i = 0; i < binaryString.length - 1; i += 8) {\r\n\t    var b = binaryString.substr(i, 8);\r\n\t    var x = parseInt(b, 2).toString(16);\r\n\t    if (x.length == 1) x = '0' + x;\r\n\t    h += x;  \r\n\t}\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.hV = '0' + unusedBits + h;\r\n    };\r\n\r\n    /**\r\n     * set ASN.1 TLV value(V) by an array of boolean\r\n     * @name setByBooleanArray\r\n     * @memberOf KJUR.asn1.DERBitString\r\n     * @function\r\n     * @param {array} booleanArray array of boolean (ex. [true, false, true])\r\n     * @description\r\n     * NOTE: Trailing falses will be ignored.\r\n     */\r\n    this.setByBooleanArray = function(booleanArray) {\r\n\tvar s = '';\r\n\tfor (var i = 0; i < booleanArray.length; i++) {\r\n\t    if (booleanArray[i] == true) {\r\n\t\ts += '1';\r\n\t    } else {\r\n\t\ts += '0';\r\n\t    }\r\n\t}\r\n\tthis.setByBinaryString(s);\r\n    };\r\n\r\n    /**\r\n     * generate an array of false with specified length\r\n     * @name newFalseArray\r\n     * @memberOf KJUR.asn1.DERBitString\r\n     * @function\r\n     * @param {Integer} nLength length of array to generate\r\n     * @return {array} array of boolean faluse\r\n     * @description\r\n     * This static method may be useful to initialize boolean array.\r\n     */\r\n    this.newFalseArray = function(nLength) {\r\n\tvar a = new Array(nLength);\r\n\tfor (var i = 0; i < nLength; i++) {\r\n\t    a[i] = false;\r\n\t}\r\n\treturn a;\r\n    };\r\n\r\n    this.getFreshValueHex = function() {\r\n\treturn this.hV;\r\n    };\r\n\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['hex'] != \"undefined\") {\r\n\t    this.setHexValueIncludingUnusedBits(params['hex']);\r\n\t} else if (typeof params['bin'] != \"undefined\") {\r\n\t    this.setByBinaryString(params['bin']);\r\n\t} else if (typeof params['array'] != \"undefined\") {\r\n\t    this.setByBooleanArray(params['array']);\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERBitString, KJUR.asn1.ASN1Object);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER OctetString\r\n * @name KJUR.asn1.DEROctetString\r\n * @class class for ASN.1 DER OctetString\r\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\r\n * @extends KJUR.asn1.DERAbstractString\r\n * @description\r\n * @see KJUR.asn1.DERAbstractString - superclass\r\n */\r\nKJUR.asn1.DEROctetString = function(params) {\r\n    KJUR.asn1.DEROctetString.superclass.constructor.call(this, params);\r\n    this.hT = \"04\";\r\n};\r\nJSX.extend(KJUR.asn1.DEROctetString, KJUR.asn1.DERAbstractString);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER Null\r\n * @name KJUR.asn1.DERNull\r\n * @class class for ASN.1 DER Null\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * @see KJUR.asn1.ASN1Object - superclass\r\n */\r\nKJUR.asn1.DERNull = function() {\r\n    KJUR.asn1.DERNull.superclass.constructor.call(this);\r\n    this.hT = \"05\";\r\n    this.hTLV = \"0500\";\r\n};\r\nJSX.extend(KJUR.asn1.DERNull, KJUR.asn1.ASN1Object);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER ObjectIdentifier\r\n * @name KJUR.asn1.DERObjectIdentifier\r\n * @class class for ASN.1 DER ObjectIdentifier\r\n * @param {Array} params associative array of parameters (ex. {'oid': '2.5.4.5'})\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>oid - specify initial ASN.1 value(V) by a oid string (ex. 2.5.4.13)</li>\r\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n */\r\nKJUR.asn1.DERObjectIdentifier = function(params) {\r\n    var itox = function(i) {\r\n\tvar h = i.toString(16);\r\n\tif (h.length == 1) h = '0' + h;\r\n\treturn h;\r\n    };\r\n    var roidtox = function(roid) {\r\n\tvar h = '';\r\n\tvar bi = new BigInteger(roid, 10);\r\n\tvar b = bi.toString(2);\r\n\tvar padLen = 7 - b.length % 7;\r\n\tif (padLen == 7) padLen = 0;\r\n\tvar bPad = '';\r\n\tfor (var i = 0; i < padLen; i++) bPad += '0';\r\n\tb = bPad + b;\r\n\tfor (var i = 0; i < b.length - 1; i += 7) {\r\n\t    var b8 = b.substr(i, 7);\r\n\t    if (i != b.length - 7) b8 = '1' + b8;\r\n\t    h += itox(parseInt(b8, 2));\r\n\t}\r\n\treturn h;\r\n    }\r\n\r\n    KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this);\r\n    this.hT = \"06\";\r\n\r\n    /**\r\n     * set value by a hexadecimal string\r\n     * @name setValueHex\r\n     * @memberOf KJUR.asn1.DERObjectIdentifier\r\n     * @function\r\n     * @param {String} newHexString hexadecimal value of OID bytes\r\n     */\r\n    this.setValueHex = function(newHexString) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.s = null;\r\n\tthis.hV = newHexString;\r\n    };\r\n\r\n    /**\r\n     * set value by a OID string\r\n     * @name setValueOidString\r\n     * @memberOf KJUR.asn1.DERObjectIdentifier\r\n     * @function\r\n     * @param {String} oidString OID string (ex. 2.5.4.13)\r\n     */\r\n    this.setValueOidString = function(oidString) {\r\n\tif (! oidString.match(/^[0-9.]+$/)) {\r\n\t    throw \"malformed oid string: \" + oidString;\r\n\t}\r\n\tvar h = '';\r\n\tvar a = oidString.split('.');\r\n\tvar i0 = parseInt(a[0]) * 40 + parseInt(a[1]);\r\n\th += itox(i0);\r\n\ta.splice(0, 2);\r\n\tfor (var i = 0; i < a.length; i++) {\r\n\t    h += roidtox(a[i]);\r\n\t}\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.s = null;\r\n\tthis.hV = h;\r\n    };\r\n\r\n    /**\r\n     * set value by a OID name\r\n     * @name setValueName\r\n     * @memberOf KJUR.asn1.DERObjectIdentifier\r\n     * @function\r\n     * @param {String} oidName OID name (ex. 'serverAuth')\r\n     * @since 1.0.1\r\n     * @description\r\n     * OID name shall be defined in 'KJUR.asn1.x509.OID.name2oidList'.\r\n     * Otherwise raise error.\r\n     */\r\n    this.setValueName = function(oidName) {\r\n\tif (typeof KJUR.asn1.x509.OID.name2oidList[oidName] != \"undefined\") {\r\n\t    var oid = KJUR.asn1.x509.OID.name2oidList[oidName];\r\n\t    this.setValueOidString(oid);\r\n\t} else {\r\n\t    throw \"DERObjectIdentifier oidName undefined: \" + oidName;\r\n\t}\r\n    };\r\n\r\n    this.getFreshValueHex = function() {\r\n\treturn this.hV;\r\n    };\r\n\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['oid'] != \"undefined\") {\r\n\t    this.setValueOidString(params['oid']);\r\n\t} else if (typeof params['hex'] != \"undefined\") {\r\n\t    this.setValueHex(params['hex']);\r\n\t} else if (typeof params['name'] != \"undefined\") {\r\n\t    this.setValueName(params['name']);\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERObjectIdentifier, KJUR.asn1.ASN1Object);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER UTF8String\r\n * @name KJUR.asn1.DERUTF8String\r\n * @class class for ASN.1 DER UTF8String\r\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\r\n * @extends KJUR.asn1.DERAbstractString\r\n * @description\r\n * @see KJUR.asn1.DERAbstractString - superclass\r\n */\r\nKJUR.asn1.DERUTF8String = function(params) {\r\n    KJUR.asn1.DERUTF8String.superclass.constructor.call(this, params);\r\n    this.hT = \"0c\";\r\n};\r\nJSX.extend(KJUR.asn1.DERUTF8String, KJUR.asn1.DERAbstractString);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER NumericString\r\n * @name KJUR.asn1.DERNumericString\r\n * @class class for ASN.1 DER NumericString\r\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\r\n * @extends KJUR.asn1.DERAbstractString\r\n * @description\r\n * @see KJUR.asn1.DERAbstractString - superclass\r\n */\r\nKJUR.asn1.DERNumericString = function(params) {\r\n    KJUR.asn1.DERNumericString.superclass.constructor.call(this, params);\r\n    this.hT = \"12\";\r\n};\r\nJSX.extend(KJUR.asn1.DERNumericString, KJUR.asn1.DERAbstractString);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER PrintableString\r\n * @name KJUR.asn1.DERPrintableString\r\n * @class class for ASN.1 DER PrintableString\r\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\r\n * @extends KJUR.asn1.DERAbstractString\r\n * @description\r\n * @see KJUR.asn1.DERAbstractString - superclass\r\n */\r\nKJUR.asn1.DERPrintableString = function(params) {\r\n    KJUR.asn1.DERPrintableString.superclass.constructor.call(this, params);\r\n    this.hT = \"13\";\r\n};\r\nJSX.extend(KJUR.asn1.DERPrintableString, KJUR.asn1.DERAbstractString);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER TeletexString\r\n * @name KJUR.asn1.DERTeletexString\r\n * @class class for ASN.1 DER TeletexString\r\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\r\n * @extends KJUR.asn1.DERAbstractString\r\n * @description\r\n * @see KJUR.asn1.DERAbstractString - superclass\r\n */\r\nKJUR.asn1.DERTeletexString = function(params) {\r\n    KJUR.asn1.DERTeletexString.superclass.constructor.call(this, params);\r\n    this.hT = \"14\";\r\n};\r\nJSX.extend(KJUR.asn1.DERTeletexString, KJUR.asn1.DERAbstractString);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER IA5String\r\n * @name KJUR.asn1.DERIA5String\r\n * @class class for ASN.1 DER IA5String\r\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\r\n * @extends KJUR.asn1.DERAbstractString\r\n * @description\r\n * @see KJUR.asn1.DERAbstractString - superclass\r\n */\r\nKJUR.asn1.DERIA5String = function(params) {\r\n    KJUR.asn1.DERIA5String.superclass.constructor.call(this, params);\r\n    this.hT = \"16\";\r\n};\r\nJSX.extend(KJUR.asn1.DERIA5String, KJUR.asn1.DERAbstractString);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER UTCTime\r\n * @name KJUR.asn1.DERUTCTime\r\n * @class class for ASN.1 DER UTCTime\r\n * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})\r\n * @extends KJUR.asn1.DERAbstractTime\r\n * @description\r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>str - specify initial ASN.1 value(V) by a string (ex.'130430235959Z')</li>\r\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\r\n * <li>date - specify Date object.</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n * <h4>EXAMPLES</h4>\r\n * @example\r\n * var d1 = new KJUR.asn1.DERUTCTime();\r\n * d1.setString('130430125959Z');\r\n *\r\n * var d2 = new KJUR.asn1.DERUTCTime({'str': '130430125959Z'});\r\n *\r\n * var d3 = new KJUR.asn1.DERUTCTime({'date': new Date(Date.UTC(2015, 0, 31, 0, 0, 0, 0))});\r\n */\r\nKJUR.asn1.DERUTCTime = function(params) {\r\n    KJUR.asn1.DERUTCTime.superclass.constructor.call(this, params);\r\n    this.hT = \"17\";\r\n\r\n    /**\r\n     * set value by a Date object\r\n     * @name setByDate\r\n     * @memberOf KJUR.asn1.DERUTCTime\r\n     * @function\r\n     * @param {Date} dateObject Date object to set ASN.1 value(V)\r\n     */\r\n    this.setByDate = function(dateObject) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.date = dateObject;\r\n\tthis.s = this.formatDate(this.date, 'utc');\r\n\tthis.hV = stohex(this.s);\r\n    };\r\n\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['str'] != \"undefined\") {\r\n\t    this.setString(params['str']);\r\n\t} else if (typeof params['hex'] != \"undefined\") {\r\n\t    this.setStringHex(params['hex']);\r\n\t} else if (typeof params['date'] != \"undefined\") {\r\n\t    this.setByDate(params['date']);\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERUTCTime, KJUR.asn1.DERAbstractTime);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER GeneralizedTime\r\n * @name KJUR.asn1.DERGeneralizedTime\r\n * @class class for ASN.1 DER GeneralizedTime\r\n * @param {Array} params associative array of parameters (ex. {'str': '20130430235959Z'})\r\n * @extends KJUR.asn1.DERAbstractTime\r\n * @description\r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>str - specify initial ASN.1 value(V) by a string (ex.'20130430235959Z')</li>\r\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\r\n * <li>date - specify Date object.</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n */\r\nKJUR.asn1.DERGeneralizedTime = function(params) {\r\n    KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this, params);\r\n    this.hT = \"18\";\r\n\r\n    /**\r\n     * set value by a Date object\r\n     * @name setByDate\r\n     * @memberOf KJUR.asn1.DERGeneralizedTime\r\n     * @function\r\n     * @param {Date} dateObject Date object to set ASN.1 value(V)\r\n     * @example\r\n     * When you specify UTC time, use 'Date.UTC' method like this:<br/>\r\n     * var o = new DERUTCTime();\r\n     * var date = new Date(Date.UTC(2015, 0, 31, 23, 59, 59, 0)); #2015JAN31 23:59:59\r\n     * o.setByDate(date);\r\n     */\r\n    this.setByDate = function(dateObject) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.date = dateObject;\r\n\tthis.s = this.formatDate(this.date, 'gen');\r\n\tthis.hV = stohex(this.s);\r\n    };\r\n\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['str'] != \"undefined\") {\r\n\t    this.setString(params['str']);\r\n\t} else if (typeof params['hex'] != \"undefined\") {\r\n\t    this.setStringHex(params['hex']);\r\n\t} else if (typeof params['date'] != \"undefined\") {\r\n\t    this.setByDate(params['date']);\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERGeneralizedTime, KJUR.asn1.DERAbstractTime);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER Sequence\r\n * @name KJUR.asn1.DERSequence\r\n * @class class for ASN.1 DER Sequence\r\n * @extends KJUR.asn1.DERAbstractStructured\r\n * @description\r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>array - specify array of ASN1Object to set elements of content</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n */\r\nKJUR.asn1.DERSequence = function(params) {\r\n    KJUR.asn1.DERSequence.superclass.constructor.call(this, params);\r\n    this.hT = \"30\";\r\n    this.getFreshValueHex = function() {\r\n\tvar h = '';\r\n\tfor (var i = 0; i < this.asn1Array.length; i++) {\r\n\t    var asn1Obj = this.asn1Array[i];\r\n\t    h += asn1Obj.getEncodedHex();\r\n\t}\r\n\tthis.hV = h;\r\n\treturn this.hV;\r\n    };\r\n};\r\nJSX.extend(KJUR.asn1.DERSequence, KJUR.asn1.DERAbstractStructured);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER Set\r\n * @name KJUR.asn1.DERSet\r\n * @class class for ASN.1 DER Set\r\n * @extends KJUR.asn1.DERAbstractStructured\r\n * @description\r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>array - specify array of ASN1Object to set elements of content</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n */\r\nKJUR.asn1.DERSet = function(params) {\r\n    KJUR.asn1.DERSet.superclass.constructor.call(this, params);\r\n    this.hT = \"31\";\r\n    this.getFreshValueHex = function() {\r\n\tvar a = new Array();\r\n\tfor (var i = 0; i < this.asn1Array.length; i++) {\r\n\t    var asn1Obj = this.asn1Array[i];\r\n\t    a.push(asn1Obj.getEncodedHex());\r\n\t}\r\n\ta.sort();\r\n\tthis.hV = a.join('');\r\n\treturn this.hV;\r\n    };\r\n};\r\nJSX.extend(KJUR.asn1.DERSet, KJUR.asn1.DERAbstractStructured);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER TaggedObject\r\n * @name KJUR.asn1.DERTaggedObject\r\n * @class class for ASN.1 DER TaggedObject\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * <br/>\r\n * Parameter 'tagNoNex' is ASN.1 tag(T) value for this object.\r\n * For example, if you find '[1]' tag in a ASN.1 dump, \r\n * 'tagNoHex' will be 'a1'.\r\n * <br/>\r\n * As for optional argument 'params' for constructor, you can specify *ANY* of\r\n * following properties:\r\n * <ul>\r\n * <li>explicit - specify true if this is explicit tag otherwise false \r\n *     (default is 'true').</li>\r\n * <li>tag - specify tag (default is 'a0' which means [0])</li>\r\n * <li>obj - specify ASN1Object which is tagged</li>\r\n * </ul>\r\n * @example\r\n * d1 = new KJUR.asn1.DERUTF8String({'str':'a'});\r\n * d2 = new KJUR.asn1.DERTaggedObject({'obj': d1});\r\n * hex = d2.getEncodedHex();\r\n */\r\nKJUR.asn1.DERTaggedObject = function(params) {\r\n    KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);\r\n    this.hT = \"a0\";\r\n    this.hV = '';\r\n    this.isExplicit = true;\r\n    this.asn1Object = null;\r\n\r\n    /**\r\n     * set value by an ASN1Object\r\n     * @name setString\r\n     * @memberOf KJUR.asn1.DERTaggedObject\r\n     * @function\r\n     * @param {Boolean} isExplicitFlag flag for explicit/implicit tag\r\n     * @param {Integer} tagNoHex hexadecimal string of ASN.1 tag\r\n     * @param {ASN1Object} asn1Object ASN.1 to encapsulate\r\n     */\r\n    this.setASN1Object = function(isExplicitFlag, tagNoHex, asn1Object) {\r\n\tthis.hT = tagNoHex;\r\n\tthis.isExplicit = isExplicitFlag;\r\n\tthis.asn1Object = asn1Object;\r\n\tif (this.isExplicit) {\r\n\t    this.hV = this.asn1Object.getEncodedHex();\r\n\t    this.hTLV = null;\r\n\t    this.isModified = true;\r\n\t} else {\r\n\t    this.hV = null;\r\n\t    this.hTLV = asn1Object.getEncodedHex();\r\n\t    this.hTLV = this.hTLV.replace(/^../, tagNoHex);\r\n\t    this.isModified = false;\r\n\t}\r\n    };\r\n\r\n    this.getFreshValueHex = function() {\r\n\treturn this.hV;\r\n    };\r\n\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['tag'] != \"undefined\") {\r\n\t    this.hT = params['tag'];\r\n\t}\r\n\tif (typeof params['explicit'] != \"undefined\") {\r\n\t    this.isExplicit = params['explicit'];\r\n\t}\r\n\tif (typeof params['obj'] != \"undefined\") {\r\n\t    this.asn1Object = params['obj'];\r\n\t    this.setASN1Object(this.isExplicit, this.hT, this.asn1Object);\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERTaggedObject, KJUR.asn1.ASN1Object);","import {int2char} from \"./jsbn\";\r\n\r\nvar b64map=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\nvar b64pad=\"=\";\r\n\r\nexport function hex2b64(h) {\r\n  var i;\r\n  var c;\r\n  var ret = \"\";\r\n  for(i = 0; i+3 <= h.length; i+=3) {\r\n    c = parseInt(h.substring(i,i+3),16);\r\n    ret += b64map.charAt(c >> 6) + b64map.charAt(c & 63);\r\n  }\r\n  if(i+1 == h.length) {\r\n    c = parseInt(h.substring(i,i+1),16);\r\n    ret += b64map.charAt(c << 2);\r\n  }\r\n  else if(i+2 == h.length) {\r\n    c = parseInt(h.substring(i,i+2),16);\r\n    ret += b64map.charAt(c >> 2) + b64map.charAt((c & 3) << 4);\r\n  }\r\n  while((ret.length & 3) > 0) ret += b64pad;\r\n  return ret;\r\n}\r\n\r\n// convert a base64 string to hex\r\nexport function b64tohex(s) {\r\n  var ret = \"\";\r\n  var i;\r\n  var k = 0; // b64 state, 0-3\r\n  var slop;\r\n  for(i = 0; i < s.length; ++i) {\r\n    if(s.charAt(i) == b64pad) break;\r\n    let v = b64map.indexOf(s.charAt(i));\r\n    if(v < 0) continue;\r\n    if(k == 0) {\r\n      ret += int2char(v >> 2);\r\n      slop = v & 3;\r\n      k = 1;\r\n    }\r\n    else if(k == 1) {\r\n      ret += int2char((slop << 2) | (v >> 4));\r\n      slop = v & 0xf;\r\n      k = 2;\r\n    }\r\n    else if(k == 2) {\r\n      ret += int2char(slop);\r\n      ret += int2char(v >> 2);\r\n      slop = v & 3;\r\n      k = 3;\r\n    }\r\n    else {\r\n      ret += int2char((slop << 2) | (v >> 4));\r\n      ret += int2char(v & 0xf);\r\n      k = 0;\r\n    }\r\n  }\r\n  if(k == 1)\r\n    ret += int2char(slop << 2);\r\n  return ret;\r\n}\r\n\r\n// convert a base64 string to a byte/number array\r\nexport function b64toBA(s) {\r\n  //piggyback on b64tohex for now, optimize later\r\n  var h = b64tohex(s);\r\n  var i;\r\n  var a = [];\r\n  for(i = 0; 2*i < h.length; ++i) {\r\n    a[i] = parseInt(h.substring(2*i,2*i+2),16);\r\n  }\r\n  return a;\r\n}\r\n","import {ASN1} from \"../lib/asn1js/asn1\";\r\nimport {RSAKey} from \"../lib/jsbn/rsa2\";\r\nimport {Base64} from \"../lib/asn1js/base64\";\r\nimport {Hex} from \"../lib/asn1js/hex\";\r\nimport {parseBigInt} from \"../lib/jsbn/rsa\";\r\nimport {KJUR} from \"../lib/jsrsasign/asn1-1.0\";\r\nimport {hex2b64} from \"../lib/jsbn/base64\";\r\nimport {b64tohex} from \"../lib/jsbn/base64\";\r\n/**\r\n * Retrieve the hexadecimal value (as a string) of the current ASN.1 element\r\n * @returns {string}\r\n * @public\r\n */\r\nASN1.prototype.getHexStringValue = function () {\r\n  var hexString = this.toHexString();\r\n  var offset = this.header * 2;\r\n  var length = this.length * 2;\r\n  return hexString.substr(offset, length);\r\n};\r\n\r\n/**\r\n * Method to parse a pem encoded string containing both a public or private key.\r\n * The method will translate the pem encoded string in a der encoded string and\r\n * will parse private key and public key parameters. This method accepts public key\r\n * in the rsaencryption pkcs #1 format (oid: 1.2.840.113549.1.1.1).\r\n *\r\n * @todo Check how many rsa formats use the same format of pkcs #1.\r\n *\r\n * The format is defined as:\r\n * PublicKeyInfo ::= SEQUENCE {\r\n *   algorithm       AlgorithmIdentifier,\r\n *   PublicKey       BIT STRING\r\n * }\r\n * Where AlgorithmIdentifier is:\r\n * AlgorithmIdentifier ::= SEQUENCE {\r\n *   algorithm       OBJECT IDENTIFIER,     the OID of the enc algorithm\r\n *   parameters      ANY DEFINED BY algorithm OPTIONAL (NULL for PKCS #1)\r\n * }\r\n * and PublicKey is a SEQUENCE encapsulated in a BIT STRING\r\n * RSAPublicKey ::= SEQUENCE {\r\n *   modulus           INTEGER,  -- n\r\n *   publicExponent    INTEGER   -- e\r\n * }\r\n * it's possible to examine the structure of the keys obtained from openssl using\r\n * an asn.1 dumper as the one used here to parse the components: http://lapo.it/asn1js/\r\n * @argument {string} pem the pem encoded string, can include the BEGIN/END header/footer\r\n * @private\r\n */\r\nRSAKey.prototype.parseKey = function (pem) {\r\n  try {\r\n    var modulus = 0;\r\n    var public_exponent = 0;\r\n    var reHex = /^\\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\\s*)+$/;\r\n    var der = reHex.test(pem) ? Hex.decode(pem) : Base64.unarmor(pem);\r\n    var asn1 = ASN1.decode(der);\r\n\r\n    //Fixes a bug with OpenSSL 1.0+ private keys\r\n    if(asn1.sub.length === 3){\r\n        asn1 = asn1.sub[2].sub[0];\r\n    }\r\n    if (asn1.sub.length === 9) {\r\n\r\n      // Parse the private key.\r\n      modulus = asn1.sub[1].getHexStringValue(); //bigint\r\n      this.n = parseBigInt(modulus, 16);\r\n\r\n      public_exponent = asn1.sub[2].getHexStringValue(); //int\r\n      this.e = parseInt(public_exponent, 16);\r\n\r\n      var private_exponent = asn1.sub[3].getHexStringValue(); //bigint\r\n      this.d = parseBigInt(private_exponent, 16);\r\n\r\n      var prime1 = asn1.sub[4].getHexStringValue(); //bigint\r\n      this.p = parseBigInt(prime1, 16);\r\n\r\n      var prime2 = asn1.sub[5].getHexStringValue(); //bigint\r\n      this.q = parseBigInt(prime2, 16);\r\n\r\n      var exponent1 = asn1.sub[6].getHexStringValue(); //bigint\r\n      this.dmp1 = parseBigInt(exponent1, 16);\r\n\r\n      var exponent2 = asn1.sub[7].getHexStringValue(); //bigint\r\n      this.dmq1 = parseBigInt(exponent2, 16);\r\n\r\n      var coefficient = asn1.sub[8].getHexStringValue(); //bigint\r\n      this.coeff = parseBigInt(coefficient, 16);\r\n\r\n    }\r\n    else if (asn1.sub.length === 2) {\r\n\r\n      // Parse the public key.\r\n      var bit_string = asn1.sub[1];\r\n      var sequence = bit_string.sub[0];\r\n\r\n      modulus = sequence.sub[0].getHexStringValue();\r\n      this.n = parseBigInt(modulus, 16);\r\n      public_exponent = sequence.sub[1].getHexStringValue();\r\n      this.e = parseInt(public_exponent, 16);\r\n\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  catch (ex) {\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Translate rsa parameters in a hex encoded string representing the rsa key.\r\n *\r\n * The translation follow the ASN.1 notation :\r\n * RSAPrivateKey ::= SEQUENCE {\r\n *   version           Version,\r\n *   modulus           INTEGER,  -- n\r\n *   publicExponent    INTEGER,  -- e\r\n *   privateExponent   INTEGER,  -- d\r\n *   prime1            INTEGER,  -- p\r\n *   prime2            INTEGER,  -- q\r\n *   exponent1         INTEGER,  -- d mod (p1)\r\n *   exponent2         INTEGER,  -- d mod (q-1)\r\n *   coefficient       INTEGER,  -- (inverse of q) mod p\r\n * }\r\n * @returns {string}  DER Encoded String representing the rsa private key\r\n * @private\r\n */\r\nRSAKey.prototype.getPrivateBaseKey = function () {\r\n  var options = {\r\n    'array': [\r\n      new KJUR.asn1.DERInteger({'int': 0}),\r\n      new KJUR.asn1.DERInteger({'bigint': this.n}),\r\n      new KJUR.asn1.DERInteger({'int': this.e}),\r\n      new KJUR.asn1.DERInteger({'bigint': this.d}),\r\n      new KJUR.asn1.DERInteger({'bigint': this.p}),\r\n      new KJUR.asn1.DERInteger({'bigint': this.q}),\r\n      new KJUR.asn1.DERInteger({'bigint': this.dmp1}),\r\n      new KJUR.asn1.DERInteger({'bigint': this.dmq1}),\r\n      new KJUR.asn1.DERInteger({'bigint': this.coeff})\r\n    ]\r\n  };\r\n  var seq = new KJUR.asn1.DERSequence(options);\r\n  return seq.getEncodedHex();\r\n};\r\n\r\n/**\r\n * base64 (pem) encoded version of the DER encoded representation\r\n * @returns {string} pem encoded representation without header and footer\r\n * @public\r\n */\r\nRSAKey.prototype.getPrivateBaseKeyB64 = function () {\r\n  return hex2b64(this.getPrivateBaseKey());\r\n};\r\n\r\n/**\r\n * Translate rsa parameters in a hex encoded string representing the rsa public key.\r\n * The representation follow the ASN.1 notation :\r\n * PublicKeyInfo ::= SEQUENCE {\r\n *   algorithm       AlgorithmIdentifier,\r\n *   PublicKey       BIT STRING\r\n * }\r\n * Where AlgorithmIdentifier is:\r\n * AlgorithmIdentifier ::= SEQUENCE {\r\n *   algorithm       OBJECT IDENTIFIER,     the OID of the enc algorithm\r\n *   parameters      ANY DEFINED BY algorithm OPTIONAL (NULL for PKCS #1)\r\n * }\r\n * and PublicKey is a SEQUENCE encapsulated in a BIT STRING\r\n * RSAPublicKey ::= SEQUENCE {\r\n *   modulus           INTEGER,  -- n\r\n *   publicExponent    INTEGER   -- e\r\n * }\r\n * @returns {string} DER Encoded String representing the rsa public key\r\n * @private\r\n */\r\nRSAKey.prototype.getPublicBaseKey = function () {\r\n  var options = {\r\n    'array': [\r\n      new KJUR.asn1.DERObjectIdentifier({'oid': '1.2.840.113549.1.1.1'}), //RSA Encryption pkcs #1 oid\r\n      new KJUR.asn1.DERNull()\r\n    ]\r\n  };\r\n  var first_sequence = new KJUR.asn1.DERSequence(options);\r\n\r\n  options = {\r\n    'array': [\r\n      new KJUR.asn1.DERInteger({'bigint': this.n}),\r\n      new KJUR.asn1.DERInteger({'int': this.e})\r\n    ]\r\n  };\r\n  var second_sequence = new KJUR.asn1.DERSequence(options);\r\n\r\n  options = {\r\n    'hex': '00' + second_sequence.getEncodedHex()\r\n  };\r\n  var bit_string = new KJUR.asn1.DERBitString(options);\r\n\r\n  options = {\r\n    'array': [\r\n      first_sequence,\r\n      bit_string\r\n    ]\r\n  };\r\n  var seq = new KJUR.asn1.DERSequence(options);\r\n  return seq.getEncodedHex();\r\n};\r\n\r\n/**\r\n * base64 (pem) encoded version of the DER encoded representation\r\n * @returns {string} pem encoded representation without header and footer\r\n * @public\r\n */\r\nRSAKey.prototype.getPublicBaseKeyB64 = function () {\r\n  return hex2b64(this.getPublicBaseKey());\r\n};\r\n\r\n/**\r\n * wrap the string in block of width chars. The default value for rsa keys is 64\r\n * characters.\r\n * @param {string} str the pem encoded string without header and footer\r\n * @param {Number} [width=64] - the length the string has to be wrapped at\r\n * @returns {string}\r\n * @private\r\n */\r\nRSAKey.prototype.wordwrap = function (str, width) {\r\n  width = width || 64;\r\n  if (!str) {\r\n    return str;\r\n  }\r\n  var regex = '(.{1,' + width + '})( +|$\\n?)|(.{1,' + width + '})';\r\n  return str.match(RegExp(regex, 'g')).join('\\n');\r\n};\r\n\r\n/**\r\n * Retrieve the pem encoded private key\r\n * @returns {string} the pem encoded private key with header/footer\r\n * @public\r\n */\r\nRSAKey.prototype.getPrivateKey = function () {\r\n  var key = \"-----BEGIN RSA PRIVATE KEY-----\\n\";\r\n  key += this.wordwrap(this.getPrivateBaseKeyB64()) + \"\\n\";\r\n  key += \"-----END RSA PRIVATE KEY-----\";\r\n  return key;\r\n};\r\n\r\n/**\r\n * Retrieve the pem encoded public key\r\n * @returns {string} the pem encoded public key with header/footer\r\n * @public\r\n */\r\nRSAKey.prototype.getPublicKey = function () {\r\n  var key = \"-----BEGIN PUBLIC KEY-----\\n\";\r\n  key += this.wordwrap(this.getPublicBaseKeyB64()) + \"\\n\";\r\n  key += \"-----END PUBLIC KEY-----\";\r\n  return key;\r\n};\r\n\r\n/**\r\n * Check if the object contains the necessary parameters to populate the rsa modulus\r\n * and public exponent parameters.\r\n * @param {Object} [obj={}] - An object that may contain the two public key\r\n * parameters\r\n * @returns {boolean} true if the object contains both the modulus and the public exponent\r\n * properties (n and e)\r\n * @todo check for types of n and e. N should be a parseable bigInt object, E should\r\n * be a parseable integer number\r\n * @private\r\n */\r\nRSAKey.prototype.hasPublicKeyProperty = function (obj) {\r\n  obj = obj || {};\r\n  return (\r\n    obj.hasOwnProperty('n') &&\r\n    obj.hasOwnProperty('e')\r\n  );\r\n};\r\n\r\n/**\r\n * Check if the object contains ALL the parameters of an RSA key.\r\n * @param {Object} [obj={}] - An object that may contain nine rsa key\r\n * parameters\r\n * @returns {boolean} true if the object contains all the parameters needed\r\n * @todo check for types of the parameters all the parameters but the public exponent\r\n * should be parseable bigint objects, the public exponent should be a parseable integer number\r\n * @private\r\n */\r\nRSAKey.prototype.hasPrivateKeyProperty = function (obj) {\r\n  obj = obj || {};\r\n  return (\r\n    obj.hasOwnProperty('n') &&\r\n    obj.hasOwnProperty('e') &&\r\n    obj.hasOwnProperty('d') &&\r\n    obj.hasOwnProperty('p') &&\r\n    obj.hasOwnProperty('q') &&\r\n    obj.hasOwnProperty('dmp1') &&\r\n    obj.hasOwnProperty('dmq1') &&\r\n    obj.hasOwnProperty('coeff')\r\n  );\r\n};\r\n\r\n/**\r\n * Parse the properties of obj in the current rsa object. Obj should AT LEAST\r\n * include the modulus and public exponent (n, e) parameters.\r\n * @param {Object} obj - the object containing rsa parameters\r\n * @private\r\n */\r\nRSAKey.prototype.parsePropertiesFrom = function (obj) {\r\n  this.n = obj.n;\r\n  this.e = obj.e;\r\n\r\n  if (obj.hasOwnProperty('d')) {\r\n    this.d = obj.d;\r\n    this.p = obj.p;\r\n    this.q = obj.q;\r\n    this.dmp1 = obj.dmp1;\r\n    this.dmq1 = obj.dmq1;\r\n    this.coeff = obj.coeff;\r\n  }\r\n};\r\n\r\n/**\r\n * Create a new JSEncryptRSAKey that extends Tom Wu's RSA key object.\r\n * This object is just a decorator for parsing the key parameter\r\n * @param {string|Object} key - The key in string format, or an object containing\r\n * the parameters needed to build a RSAKey object.\r\n * @constructor\r\n */\r\nclass JSEncryptRSAKey extends RSAKey {\r\n  constructor(key) {\r\n    // Call the super constructor.\r\n    super();\r\n    // If a key key was provided.\r\n    if (key) {\r\n      // If this is a string...\r\n      if (typeof key === 'string') {\r\n        this.parseKey(key);\r\n      }\r\n      else if (\r\n          this.hasPrivateKeyProperty(key) ||\r\n          this.hasPublicKeyProperty(key)\r\n      ) {\r\n        // Set the values for the key.\r\n        this.parsePropertiesFrom(key);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param {Object} [options = {}] - An object to customize JSEncrypt behaviour\r\n * possible parameters are:\r\n * - default_key_size        {number}  default: 1024 the key size in bit\r\n * - default_public_exponent {string}  default: '010001' the hexadecimal representation of the public exponent\r\n * - log                     {boolean} default: false whether log warn/error or not\r\n * @constructor\r\n */\r\nexport class JSEncrypt{\r\n  constructor (options) {\r\n    options = options || {};\r\n    this.default_key_size = parseInt(options.default_key_size) || 1024;\r\n    this.default_public_exponent = options.default_public_exponent || '010001'; //65537 default openssl public exponent for rsa key type\r\n    this.log = options.log || false;\r\n    // The private and public key.\r\n    this.key = null;\r\n  }\r\n}\r\n\r\n/**\r\n * Method to set the rsa key parameter (one method is enough to set both the public\r\n * and the private key, since the private key contains the public key paramenters)\r\n * Log a warning if logs are enabled\r\n * @param {Object|string} key the pem encoded string or an object (with or without header/footer)\r\n * @public\r\n */\r\nJSEncrypt.prototype.setKey = function (key) {\r\n  if (this.log && this.key) {\r\n    console.warn('A key was already set, overriding existing.');\r\n  }\r\n  this.key = new JSEncryptRSAKey(key);\r\n};\r\n\r\n/**\r\n * Proxy method for setKey, for api compatibility\r\n * @see setKey\r\n * @public\r\n */\r\nJSEncrypt.prototype.setPrivateKey = function (privkey) {\r\n  // Create the key.\r\n  this.setKey(privkey);\r\n};\r\n\r\n/**\r\n * Proxy method for setKey, for api compatibility\r\n * @see setKey\r\n * @public\r\n */\r\nJSEncrypt.prototype.setPublicKey = function (pubkey) {\r\n  // Sets the public key.\r\n  this.setKey(pubkey);\r\n};\r\n\r\n/**\r\n * Proxy method for RSAKey object's decrypt, decrypt the string using the private\r\n * components of the rsa key object. Note that if the object was not set will be created\r\n * on the fly (by the getKey method) using the parameters passed in the JSEncrypt constructor\r\n * @param {string} string base64 encoded crypted string to decrypt\r\n * @return {string} the decrypted string\r\n * @public\r\n */\r\nJSEncrypt.prototype.decrypt = function (string) {\r\n  // Return the decrypted string.\r\n  try {\r\n    return this.getKey().decrypt(b64tohex(string));\r\n  }\r\n  catch (ex) {\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Proxy method for RSAKey object's encrypt, encrypt the string using the public\r\n * components of the rsa key object. Note that if the object was not set will be created\r\n * on the fly (by the getKey method) using the parameters passed in the JSEncrypt constructor\r\n * @param {string} string the string to encrypt\r\n * @return {string} the encrypted string encoded in base64\r\n * @public\r\n */\r\nJSEncrypt.prototype.encrypt = function (string) {\r\n  // Return the encrypted string.\r\n  try {\r\n    return hex2b64(this.getKey().encrypt(string));\r\n  }\r\n  catch (ex) {\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Getter for the current JSEncryptRSAKey object. If it doesn't exists a new object\r\n * will be created and returned\r\n * @param {callback} [cb] the callback to be called if we want the key to be generated\r\n * in an async fashion\r\n * @returns {JSEncryptRSAKey} the JSEncryptRSAKey object\r\n * @public\r\n */\r\nJSEncrypt.prototype.getKey = function (cb) {\r\n  // Only create new if it does not exist.\r\n  if (!this.key) {\r\n    // Get a new private key.\r\n    this.key = new JSEncryptRSAKey();\r\n    if (cb && {}.toString.call(cb) === '[object Function]') {\r\n      this.key.generateAsync(this.default_key_size, this.default_public_exponent, cb);\r\n      return;\r\n    }\r\n    // Generate the key.\r\n    this.key.generate(this.default_key_size, this.default_public_exponent);\r\n  }\r\n  return this.key;\r\n};\r\n\r\n/**\r\n * Returns the pem encoded representation of the private key\r\n * If the key doesn't exists a new key will be created\r\n * @returns {string} pem encoded representation of the private key WITH header and footer\r\n * @public\r\n */\r\nJSEncrypt.prototype.getPrivateKey = function () {\r\n  // Return the private representation of this key.\r\n  return this.getKey().getPrivateKey();\r\n};\r\n\r\n/**\r\n * Returns the pem encoded representation of the private key\r\n * If the key doesn't exists a new key will be created\r\n * @returns {string} pem encoded representation of the private key WITHOUT header and footer\r\n * @public\r\n */\r\nJSEncrypt.prototype.getPrivateKeyB64 = function () {\r\n  // Return the private representation of this key.\r\n  return this.getKey().getPrivateBaseKeyB64();\r\n};\r\n\r\n\r\n/**\r\n * Returns the pem encoded representation of the public key\r\n * If the key doesn't exists a new key will be created\r\n * @returns {string} pem encoded representation of the public key WITH header and footer\r\n * @public\r\n */\r\nJSEncrypt.prototype.getPublicKey = function () {\r\n  // Return the private representation of this key.\r\n  return this.getKey().getPublicKey();\r\n};\r\n\r\n/**\r\n * Returns the pem encoded representation of the public key\r\n * If the key doesn't exists a new key will be created\r\n * @returns {string} pem encoded representation of the public key WITHOUT header and footer\r\n * @public\r\n */\r\nJSEncrypt.prototype.getPublicKeyB64 = function () {\r\n  // Return the private representation of this key.\r\n  return this.getKey().getPublicBaseKeyB64();\r\n};\r\n\r\n","import {EventEmitter} from \"../deps/bp_event.js\";\r\n\r\nexport class BaseRequest {\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.before = (data)=>{return Promise.resolve(data)};\r\n    }\r\n\r\n    send() {\r\n        return this.before(this.data);\r\n    }\r\n\r\n    before(fn) {\r\n        return Promise.resolve\r\n    }\r\n}\r\n\r\nexport class BaseTransport {\r\n    constructor(endpoint, stream_type, config={}) {\r\n        this.stream_type = stream_type;\r\n        this.endpoint = endpoint;\r\n        this.eventSource = new EventEmitter();\r\n        this.dataQueue = [];\r\n    }\r\n\r\n    static canTransfer(stream_type) {\r\n        return BaseTransport.streamTypes().includes(stream_type);\r\n    }\r\n    \r\n    static streamTypes() {\r\n        return [];\r\n    }\r\n\r\n    destroy() {\r\n        this.eventSource.destroy();\r\n    }\r\n\r\n    connect() {\r\n        // TO be impemented\r\n    }\r\n\r\n    disconnect() {\r\n        // TO be impemented\r\n    }\r\n\r\n    reconnect() {\r\n        return this.disconnect().then(()=>{\r\n            return this.connect();\r\n        });\r\n    }\r\n\r\n    setEndpoint(endpoint) {\r\n        this.endpoint = endpoint;\r\n        return this.reconnect();\r\n    }\r\n\r\n    send(data) {\r\n        // TO be impemented\r\n        // return this.prepare(data).send();\r\n    }\r\n\r\n    prepare(data) {\r\n        // TO be impemented\r\n        // return new Request(data);\r\n    }\r\n\r\n    // onData(type, data) {\r\n    //     this.eventSource.dispatchEvent(type, data);\r\n    // }\r\n}","export const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n\r\nexport const CPU_CORES = 1;//navigator.hardwareConcurrency || 3;","import {getTagged} from '../deps/bp_logger.js';\r\nimport {JSEncrypt} from '../deps/jsencrypt.js';\r\nimport {BaseTransport} from \"../core/base_transport.js\";\r\nimport {CPU_CORES} from \"../core/util/browser.js\";\r\n\r\nconst LOG_TAG = \"transport:ws\";\r\nconst Log = getTagged(LOG_TAG);\r\nconst WORKER_COUNT = CPU_CORES;\r\n\r\nexport default class WebsocketTransport extends BaseTransport {\r\n    constructor(endpoint, stream_type, options={\r\n        socket:`${location.protocol.replace('http', 'ws')}//${location.host}/ws/`,\r\n        workers: 1\r\n    }) {\r\n        super(endpoint, stream_type);\r\n        this.proxies = [];\r\n        this.currentProxy = 0;\r\n        this.workers = 1;\r\n        this.socket_url = options.socket;\r\n        this.ready = this.connect();\r\n    }\r\n\r\n    destroy() {\r\n        return this.disconnect().then(()=>{\r\n            return super.destroy();\r\n        });\r\n\r\n    }\r\n\r\n    static canTransfer(stream_type) {\r\n        return WebsocketTransport.streamTypes().includes(stream_type);\r\n    }\r\n\r\n    static streamTypes() {\r\n        return ['hls', 'rtsp'];\r\n    }\r\n\r\n    connect() {\r\n        return this.disconnect().then(()=>{\r\n            let promises = [];\r\n            // TODO: get mirror list\r\n            for (let i=0; i<this.workers; ++i) {\r\n                let proxy = new WebSocketProxy(this.socket_url, this.endpoint, this.stream_type);\r\n\r\n                proxy.set_disconnect_handler((e)=> {\r\n                    this.eventSource.dispatchEvent('disconnected', {code: e.code, reason: e.reason});\r\n                    // TODO: only reconnect on demand\r\n                    if ([1000, 1006, 1013, 1011].includes(e.code)) {\r\n                        setTimeout(()=> {\r\n                            if (this.ready && this.ready.reject) {\r\n                                this.ready.reject();\r\n                            }\r\n                            this.ready = this.connect();\r\n                        }, 3000);\r\n                    }\r\n                });\r\n\r\n                proxy.set_data_handler((data)=> {\r\n                    this.dataQueue.push(new Uint8Array(data));\r\n                    this.eventSource.dispatchEvent('data');\r\n                });\r\n\r\n                promises.push(proxy.connect().then(()=> {\r\n                    this.eventSource.dispatchEvent('connected');\r\n                }).catch((e)=> {\r\n                    this.eventSource.dispatchEvent('error');\r\n                    throw new Error(e);\r\n                }));\r\n                this.proxies.push(proxy);\r\n            }\r\n            return Promise.all(promises);\r\n        });\r\n    }\r\n\r\n    disconnect() {\r\n        let promises = [];\r\n        for (let i=0; i<this.proxies.length; ++i) {\r\n            promises.push(this.proxies[i].close());\r\n        }\r\n        this.proxies= [];\r\n        if (this.proxies.length) {\r\n            return Promise.all(promises);\r\n        } else {\r\n            return Promise.resolve();\r\n        }\r\n    }\r\n\r\n    socket() {\r\n        return this.proxies[(this.currentProxy++)%this.proxies.length];\r\n    }\r\n\r\n    send(_data, fn) {\r\n        let res = this.socket().send(_data);\r\n        if (fn) {\r\n            fn(res.seq);\r\n        }\r\n        return res.promise;\r\n    }\r\n}\r\n\r\nclass WSPProtocol {\r\n    static get PROTO() {return  'WSP';}\r\n\r\n    static get V1_1() {return '1.1';}\r\n\r\n    static get CMD_INIT() {return 'INIT';}\r\n    static get CMD_JOIN() {return  'JOIN';}\r\n    static get CMD_WRAP() {return  'WRAP';}\r\n\r\n\r\n    constructor(ver){\r\n        this.ver = ver;\r\n    }\r\n\r\n    build(cmd, data, payload=''){\r\n        let data_str='';\r\n        if (!data.seq) {\r\n            data.seq = ++WSPProtocol.seq;\r\n        }\r\n        for (let k in data) {\r\n            data_str += `${k}: ${data[k]}\\r\\n`;\r\n        }\r\n        return `${WSPProtocol.PROTO}/${this.ver} ${cmd}\\r\\n${data_str}\\r\\n${payload}`;\r\n    }\r\n\r\n    static parse(data) {\r\n        let payIdx = data.indexOf('\\r\\n\\r\\n');\r\n        let lines = data.substr(0, payIdx).split('\\r\\n');\r\n        let hdr = lines.shift().match(new RegExp(`${WSPProtocol.PROTO}/${WSPProtocol.V1_1}\\\\s+(\\\\d+)\\\\s+(.+)`));\r\n        if (hdr) {\r\n            let res = {\r\n                code: Number(hdr[1]),\r\n                msg:  hdr[2],\r\n                data: {},\r\n                payload: ''\r\n            };\r\n            while (lines.length) {\r\n                let line = lines.shift();\r\n                if (line) {\r\n                    let [k,v] = line.split(':');\r\n                    res.data[k.trim()] = v.trim();\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n            res.payload = data.substr(payIdx+4);\r\n            return res;\r\n        }\r\n        return null;\r\n    }\r\n}\r\nWSPProtocol.seq = 0;\r\n\r\nclass WebSocketProxy {\r\n    static get CHN_CONTROL() {return 'control';}\r\n    static get CHN_DATA() {return  'data';}\r\n\r\n    constructor(wsurl, endpoint, stream_type) {\r\n        this.url = wsurl;\r\n        this.stream_type = stream_type;\r\n        this.endpoint = endpoint;\r\n        this.data_handler = ()=>{};\r\n        this.disconnect_handler = ()=>{};\r\n        this.builder = new WSPProtocol(WSPProtocol.V1_1);\r\n        this.awaitingPromises = {};\r\n        this.seq = 0;\r\n        this.encryptor = new JSEncrypt();\r\n    }\r\n\r\n    set_data_handler(handler) {\r\n        this.data_handler = handler;\r\n    }\r\n\r\n    set_disconnect_handler(handler) {\r\n        this.disconnect_handler = handler;\r\n    }\r\n\r\n    close() {\r\n        Log.log('closing connection');\r\n        return new Promise((resolve)=>{\r\n            this.ctrlChannel.onclose = ()=>{\r\n                if (this.dataChannel) {\r\n                    this.dataChannel.onclose = ()=>{\r\n                        Log.log('closed');\r\n                        resolve();\r\n                    };\r\n                    this.dataChannel.close();\r\n                } else {\r\n                    Log.log('closed');\r\n                    resolve();\r\n                }\r\n            };\r\n            this.ctrlChannel.close();\r\n        });\r\n    }\r\n\r\n    onDisconnect(){\r\n        this.ctrlChannel.onclose=null;\r\n        this.ctrlChannel.close();\r\n        if (this.dataChannel) {\r\n            this.dataChannel.onclose = null;\r\n            this.dataChannel.close();\r\n        }\r\n        this.disconnect_handler(this);\r\n    }\r\n\r\n    initDataChannel(channel_id) {\r\n        return new Promise((resolve, reject)=>{\r\n            this.dataChannel = new WebSocket(this.url + WebSocketProxy.CHN_DATA);\r\n            this.dataChannel.binaryType = 'arraybuffer';\r\n            this.dataChannel.onopen = ()=>{\r\n                let msg = this.builder.build(WSPProtocol.CMD_JOIN, {\r\n                    channel: channel_id\r\n                });\r\n                Log.debug(msg);\r\n                this.dataChannel.send(msg);\r\n            };\r\n            this.dataChannel.onmessage = (ev)=>{\r\n                Log.debug(`[data]\\r\\n${ev.data}`);\r\n                let res = WSPProtocol.parse(ev.data);\r\n                if (!res) {\r\n                    return reject();\r\n                }\r\n\r\n                this.dataChannel.onmessage=(e)=>{\r\n                    // Log.debug('got data');\r\n                    if (this.data_handler) {\r\n                        this.data_handler(e.data);\r\n                    }\r\n                };\r\n                resolve();\r\n            };\r\n            this.dataChannel.onerror = (e)=>{\r\n                Log.error(`[data] ${e.type}`);\r\n                this.dataChannel.close();\r\n            };\r\n            this.dataChannel.onclose = (e)=>{\r\n                Log.error(`[data] ${e.type}. code: ${e.code}, reason: ${e.reason || 'unknown reason'}`);\r\n                this.onDisconnect(e);\r\n            };\r\n        });\r\n    }\r\n\r\n    connect() {\r\n        this.encryptionKey = null;\r\n        return new Promise((resolve, reject)=>{\r\n            this.ctrlChannel = new WebSocket(this.url + WebSocketProxy.CHN_CONTROL);\r\n\r\n            this.connected = false;\r\n\r\n            this.ctrlChannel.onopen = ()=>{\r\n                let headers = {\r\n                    proto: this.stream_type\r\n                };\r\n                if (this.endpoint.socket) {\r\n                    headers.socket = this.endpoint.socket;\r\n                } else {\r\n                    Object.assign(headers, {\r\n                        host:  this.endpoint.host,\r\n                        port:  this.endpoint.port\r\n                    })\r\n                }\r\n                let msg = this.builder.build(WSPProtocol.CMD_INIT, headers);\r\n                Log.debug(msg);\r\n                this.ctrlChannel.send(msg);\r\n            };\r\n\r\n            this.ctrlChannel.onmessage = (ev)=>{\r\n                Log.debug(`[ctrl]\\r\\n${ev.data}`);\r\n\r\n                let res = WSPProtocol.parse(ev.data);\r\n                if (!res) {\r\n                    return reject();\r\n                }\r\n\r\n                if (res.code >= 300) {\r\n                    Log.error(`[ctrl]\\r\\n${res.code}: ${res.msg}`);\r\n                    return reject();\r\n                }\r\n                this.ctrlChannel.onmessage = (e)=> {\r\n                    let res = WSPProtocol.parse(e.data);\r\n                    Log.debug(`[ctrl]\\r\\n${e.data}`);\r\n                    if (res.data.seq in this.awaitingPromises) {\r\n                        if (res.code < 300) {\r\n                            this.awaitingPromises[res.data.seq].resolve(res);\r\n                        } else {\r\n                            this.awaitingPromises[res.data.seq].reject(res);\r\n                        }\r\n                        delete this.awaitingPromises[res.data.seq];\r\n                    }\r\n                };\r\n                this.encryptionKey = res.data.pubkey || null;\r\n                if (this.encryptionKey) {\r\n                    this.encryptor.setPublicKey(this.encryptionKey);\r\n                    // TODO: check errors\r\n                }\r\n                this.initDataChannel(res.data.channel).then(resolve).catch(reject);\r\n            };\r\n\r\n            this.ctrlChannel.onerror = (e)=>{\r\n                Log.error(`[ctrl] ${e.type}`);\r\n                this.ctrlChannel.close();\r\n            };\r\n            this.ctrlChannel.onclose = (e)=>{\r\n                Log.error(`[ctrl] ${e.type}. code: ${e.code} ${e.reason || 'unknown reason'}`);\r\n                this.onDisconnect(e);\r\n            };\r\n        });\r\n    }\r\n\r\n    encrypt(msg) {\r\n        if (this.encryptionKey) {\r\n            let crypted = this.encryptor.encrypt(msg);\r\n            if (crypted === false) {\r\n                throw new Error(\"Encryption failed. Stopping\")\r\n            }\r\n            return crypted;\r\n        }\r\n        return msg;\r\n    }\r\n\r\n    send(payload) {\r\n        if (this.ctrlChannel.readyState != WebSocket.OPEN) {\r\n            this.close();\r\n            // .then(this.connect.bind(this));\r\n            // return;\r\n            throw new Error('disconnected');\r\n        }\r\n        // Log.debug(payload);\r\n        let data = {\r\n            contentLength: payload.length,\r\n            seq: ++WSPProtocol.seq\r\n        };\r\n        return {\r\n            seq:data.seq,\r\n            promise: new Promise((resolve, reject)=>{\r\n                this.awaitingPromises[data.seq] = {resolve, reject};\r\n                let msg = this.builder.build(WSPProtocol.CMD_WRAP, data, payload);\r\n                Log.debug(msg);\r\n                this.ctrlChannel.send(this.encrypt(msg));\r\n            })};\r\n    }\r\n}","import {getTagged} from './deps/bp_logger.js';\r\nimport {Url} from './core/util/url.js';\r\nimport {Remuxer} from './core/remuxer/remuxer.js';\r\nimport DEFAULT_CLIENT from './client/rtsp/client.js';\r\nimport DEFAULT_TRANSPORT from './transport/websocket.js';\r\n\r\nconst Log = getTagged('wsp');\r\n\r\nexport class StreamType {\r\n    static get HLS() {return 'hls';}\r\n    static get RTSP() {return 'rtsp';}\r\n\r\n    static isSupported(type) {\r\n        return [StreamType.HLS, StreamType.RTSP].includes(type);\r\n    }\r\n\r\n    static fromUrl(url) {\r\n        let parsed;\r\n        try {\r\n            parsed = Url.parse(url);\r\n        } catch (e) {\r\n            return null;\r\n        }\r\n        switch (parsed.protocol) {\r\n            case 'rtsp':\r\n                return StreamType.RTSP;\r\n            case 'http':\r\n            case 'https':\r\n                if (url.indexOf('.m3u8')>=0) {\r\n                    return StreamType.HLS;\r\n                } else {\r\n                    return null;\r\n                }\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n\r\n    static fromMime(mime) {\r\n        switch (mime) {\r\n            case 'application/x-rtsp':\r\n                return StreamType.RTSP;\r\n            case 'application/vnd.apple.mpegurl':\r\n            case 'application/x-mpegurl':\r\n                return StreamType.HLS;\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n}\r\n\r\nexport class WSPlayer {\r\n\r\n    constructor(node, opts) {\r\n        if (typeof node == typeof '') {\r\n            this.player = document.getElementById(node);\r\n        } else {\r\n            this.player = node;\r\n        }\r\n\r\n        let modules = opts.modules || {\r\n            client: DEFAULT_CLIENT,\r\n            transport: {\r\n                constructor: DEFAULT_TRANSPORT\r\n            }\r\n        };\r\n        this.errorHandler = opts.errorHandler || null;\r\n        this.queryCredentials = opts.queryCredentials || null;\r\n\r\n        this.modules = {};\r\n        for (let module of modules) {\r\n            let transport = module.transport || DEFAULT_TRANSPORT;\r\n            let client = module.client || DEFAULT_CLIENT;\r\n            if (transport.constructor.canTransfer(client.streamType())) {\r\n                this.modules[client.streamType()] = {\r\n                    client: client,\r\n                    transport: transport\r\n                }\r\n            } else {\r\n                Log.warn(`Client stream type ${client.streamType()} is incompatible with transport types [${transport.streamTypes().join(', ')}]. Skip`)\r\n            }\r\n        }\r\n\r\n        this.type = StreamType.RTSP;\r\n        this.url = null;\r\n        if (opts.url && opts.type) {\r\n            this.url = opts.url;\r\n            this.type = opts.type;\r\n        } else {\r\n            if (!this._checkSource(this.player)) {\r\n                for (let i=0; i<this.player.children.length; ++i) {\r\n                    if (this._checkSource(this.player.children[i])) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            // if (!this.url) {\r\n            //      throw new Error('No playable endpoint found');\r\n            // }\r\n        }\r\n\r\n        if (this.url) {\r\n            this.setSource(this.url, this.type);\r\n        }\r\n\r\n        this.player.addEventListener('play', ()=>{\r\n            if (!this.isPlaying()) {\r\n                this.client.start();\r\n            }\r\n        }, false);\r\n\r\n        this.player.addEventListener('pause', ()=>{\r\n            this.client.stop();\r\n        }, false);\r\n\r\n        this.player.addEventListener('abort', () => {\r\n            // disconnect the transport when the player is closed\r\n            this.client.stop();\r\n            this.transport.disconnect().then(() => {\r\n                this.client.destroy();\r\n            });\r\n        }, false);\r\n    }\r\n\r\n    // TODO: check native support\r\n\r\n    isPlaying() {\r\n        return !(this.player.paused || this.client.paused);\r\n    }\r\n\r\n    static canPlayWithModules(mimeType, modules) {\r\n\r\n        let filteredModules = {};\r\n        for (let module of modules) {\r\n            let transport = module.transport || DEFAULT_TRANSPORT;\r\n            let client = module.client || DEFAULT_CLIENT;\r\n            if (transport.canTransfer(client.streamType())) {\r\n                filteredModules[client.streamType()] = true;\r\n            }\r\n        }\r\n\r\n        for (let type in filteredModules) {\r\n            if (type == StreamType.fromMime(mimeType)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /// TODO: deprecate it?\r\n    static canPlay(resource) {\r\n        return StreamType.fromMime(resource.type) || StreamType.fromUrl(resource.src);\r\n    }\r\n\r\n    canPlayUrl(src) {\r\n        let type = StreamType.fromUrl(src);\r\n        return (type in this.modules);\r\n    }\r\n\r\n    _checkSource(src) {\r\n        if (!src.dataset['ignore'] && src.src && !this.player.canPlayType(src.type) && (StreamType.fromMime(src.type) || StreamType.fromUrl(src.src))) {\r\n            this.url = src.src;\r\n            this.type = src.type ? StreamType.fromMime(src.type) : StreamType.fromUrl(src.src);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    async setSource(url, type) {\r\n        if (this.transport) {\r\n            if (this.client) {\r\n                await this.client.detachTransport();\r\n            }\r\n            await this.transport.destroy();\r\n        }\r\n        try {\r\n            this.endpoint = Url.parse(url);\r\n        } catch (e) {\r\n            return;\r\n        }\r\n        this.url = url;\r\n        let transport = this.modules[type].transport;\r\n        this.transport = new transport.constructor(this.endpoint, this.type, transport.options);\r\n\r\n\r\n        let lastType = this.type;\r\n        this.type = (StreamType.isSupported(type)?type:false) || StreamType.fromMime(type);\r\n        if (!this.type) {\r\n            throw new Error(\"Bad stream type\");\r\n        }\r\n\r\n        if (lastType!=this.type || !this.client) {\r\n            if (this.client) {\r\n                await this.client.destroy();\r\n            }\r\n            let client = this.modules[type].client;\r\n            this.client = new client();\r\n        } else {\r\n            this.client.reset();\r\n        }\r\n\r\n        if (this.queryCredentials) {\r\n            this.client.queryCredentials = this.queryCredentials;\r\n        }\r\n        if (this.remuxer) {\r\n            this.remuxer.destroy();\r\n            this.remuxer = null;\r\n        }\r\n        this.remuxer = new Remuxer(this.player);\r\n        this.remuxer.attachClient(this.client);\r\n\r\n        this.client.attachTransport(this.transport);\r\n        this.client.setSource(this.endpoint);\r\n\r\n        if (this.player.autoplay) {\r\n            this.start();\r\n        }\r\n    }\r\n\r\n    start() {\r\n        if (this.client) {\r\n            this.client.start().catch((e)=>{\r\n                if (this.errorHandler) {\r\n                    this.errorHandler(e);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        if (this.client) {\r\n            this.client.stop();\r\n        }\r\n    }\r\n\r\n    async destroy() {\r\n        if (this.transport) {\r\n            if (this.client) {\r\n                await this.client.detachTransport();\r\n            }\r\n            await this.transport.destroy();\r\n        }\r\n        if (this.client) {\r\n            await this.client.destroy();\r\n        }\r\n        if (this.remuxer) {\r\n            this.remuxer.destroy();\r\n            this.remuxer = null;\r\n        }\r\n    }\r\n\r\n}\r\n","import {appendByteArray} from '../util/binary.js';\r\n\r\nexport class PESAsm {\r\n\r\n    constructor() {\r\n        this.fragments = [];\r\n        this.pesLength=0;\r\n        this.pesPkt = null;\r\n    }\r\n\r\n    parse(frag) {\r\n\r\n        if (this.extPresent) {\r\n            let ext = this.parseExtension(frag);\r\n            ext.data = frag.subarray(ext.offset);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    parseHeader() {\r\n        let hdr = this.fragments[0];\r\n        let pesPrefix = (hdr[0] << 16) + (hdr[1] << 8) + hdr[2];\r\n        this.extPresent = ![0xbe, 0xbf].includes(hdr[3]);\r\n        if (pesPrefix === 1) {\r\n            let pesLength = (hdr[4] << 8) + hdr[5];\r\n            if (pesLength) {\r\n                this.pesLength = pesLength;\r\n                this.hasLength = true;\r\n            } else {\r\n                this.hasLength = false;\r\n                this.pesPkt = null;\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    static PTSNormalize(value, reference) {\r\n\r\n        let offset;\r\n        if (reference === undefined) {\r\n            return value;\r\n        }\r\n        if (reference < value) {\r\n            // - 2^33\r\n            offset = -8589934592;\r\n        } else {\r\n            // + 2^33\r\n            offset = 8589934592;\r\n        }\r\n        /* PTS is 33bit (from 0 to 2^33 -1)\r\n         if diff between value and reference is bigger than half of the amplitude (2^32) then it means that\r\n         PTS looping occured. fill the gap */\r\n        while (Math.abs(value - reference) > 4294967296) {\r\n            value += offset;\r\n        }\r\n        return value;\r\n    }\r\n\r\n    parseExtension(frag) {\r\n        let  pesFlags, pesPrefix, pesLen, pesHdrLen, pesPts, pesDts, payloadStartOffset;\r\n            pesFlags = frag[1];\r\n            if (pesFlags & 0xC0) {\r\n                /* PES header described here : http://dvd.sourceforge.net/dvdinfo/pes-hdr.html\r\n                 as PTS / DTS is 33 bit we cannot use bitwise operator in JS,\r\n                 as Bitwise operators treat their operands as a sequence of 32 bits */\r\n                pesPts = (frag[3] & 0x0E) * 536870912 +// 1 << 29\r\n                    (frag[4] & 0xFF) * 4194304 +// 1 << 22\r\n                    (frag[5] & 0xFE) * 16384 +// 1 << 14\r\n                    (frag[6] & 0xFF) * 128 +// 1 << 7\r\n                    (frag[7] & 0xFE) / 2;\r\n                // check if greater than 2^32 -1\r\n                if (pesPts > 4294967295) {\r\n                    // decrement 2^33\r\n                    pesPts -= 8589934592;\r\n                }\r\n                if (pesFlags & 0x40) {\r\n                    pesDts = (frag[8] & 0x0E ) * 536870912 +// 1 << 29\r\n                        (frag[9] & 0xFF ) * 4194304 +// 1 << 22\r\n                        (frag[10] & 0xFE ) * 16384 +// 1 << 14\r\n                        (frag[11] & 0xFF ) * 128 +// 1 << 7\r\n                        (frag[12] & 0xFE ) / 2;\r\n                    // check if greater than 2^32 -1\r\n                    if (pesDts > 4294967295) {\r\n                        // decrement 2^33\r\n                        pesDts -= 8589934592;\r\n                    }\r\n                } else {\r\n                    pesDts = pesPts;\r\n                }\r\n\r\n            pesHdrLen = frag[2];\r\n            payloadStartOffset = pesHdrLen + 9;\r\n\r\n            // TODO: normalize pts/dts\r\n            return {offset: payloadStartOffset, pts: pesPts, dts: pesDts};\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n    \r\n    feed(frag, shouldParse) {\r\n\r\n        let res = null;\r\n        if (shouldParse && this.fragments.length) {\r\n            if (!this.parseHeader()) {\r\n                throw new Error(\"Invalid PES packet\");\r\n            }\r\n\r\n            let offset = 6;\r\n            let parsed = {};\r\n            if (this.extPresent) {\r\n                // TODO: make sure fragment have necessary length\r\n                parsed = this.parseExtension(this.fragments[0].subarray(6));\r\n                offset = parsed.offset;\r\n            }\r\n            if (!this.pesPkt) {\r\n                this.pesPkt = new Uint8Array(this.pesLength);\r\n            }\r\n\r\n            let poffset = 0;\r\n            while (this.pesLength && this.fragments.length) {\r\n                let data = this.fragments.shift();\r\n                if (offset) {\r\n                    if (data.byteLength < offset) {\r\n                        offset -= data.byteLength;\r\n                        continue;\r\n                    } else {\r\n                        data = data.subarray(offset);\r\n                        this.pesLength -= offset - (this.hasLength?6:0);\r\n                        offset = 0;\r\n                    }\r\n                }\r\n                this.pesPkt.set(data, poffset);\r\n                poffset += data.byteLength;\r\n                this.pesLength -= data.byteLength;\r\n            }\r\n            res = {data:this.pesPkt, pts: parsed.pts, dts: parsed.dts};\r\n        } else {\r\n            this.pesPkt = null;\r\n        }\r\n        this.pesLength += frag.byteLength;\r\n\r\n        if (this.fragments.length && this.fragments[this.fragments.length-1].byteLength < 6) {\r\n            this.fragments[this.fragments.length-1] = appendByteArray(this.fragments[0], frag);\r\n        } else {\r\n            this.fragments.push(frag);\r\n        }\r\n\r\n        return res;\r\n    }\r\n}","import {BitArray} from '../util/binary.js';\r\nimport {PESAsm} from './pes.js';\r\nimport {PayloadType} from '../defs.js';\r\n\r\nexport class PESType {\r\n    static get AAC() {return  0x0f;}  // ISO/IEC 13818-7 ADTS AAC (MPEG-2 lower bit-rate audio)\r\n    static get ID3() {return  0x15;}  // Packetized metadata (ID3)\r\n    static get H264() {return  0x1b;}  // ITU-T Rec. H.264 and ISO/IEC 14496-10 (lower bit-rate video)\r\n}\r\n\r\nexport class TSParser {\r\n    static get PACKET_LENGTH() {return  188;}\r\n\r\n    constructor() {\r\n        this.pmtParsed = false;\r\n        this.pesParserTypes = new Map();\r\n        this.pesParsers = new Map();\r\n        this.pesAsms = {};\r\n        this.ontracks = null;\r\n        this.toSkip = 0;\r\n    }\r\n\r\n    addPesParser(pesType, constructor) {\r\n        this.pesParserTypes.set(pesType, constructor);\r\n    }\r\n\r\n    parse(packet) {\r\n        let bits = new BitArray(packet);\r\n        if (packet[0] === 0x47) {\r\n            bits.skipBits(9);\r\n            let payStart = bits.readBits(1);\r\n            bits.skipBits(1);\r\n            let pid = bits.readBits(13);\r\n            bits.skipBits(2);\r\n            let adaptFlag = bits.readBits(1);\r\n            let payFlag = bits.readBits(1);\r\n            bits.skipBits(4);\r\n            if (adaptFlag) {\r\n                let adaptSize = bits.readBits(8);\r\n                this.toSkip = bits.skipBits(adaptSize*8);\r\n                if (bits.finished()) {\r\n                    return;\r\n                }\r\n            }\r\n            if (!payFlag) return;\r\n\r\n            let payload = packet.subarray(bits.bytepos);//bitSlice(packet, bits.bitpos+bits.bytepos*8);\r\n\r\n            if (this.pmtParsed && this.pesParsers.has(pid)) {\r\n                let pes = this.pesAsms[pid].feed(payload, payStart);\r\n                if (pes) {\r\n                    return this.pesParsers.get(pid).parse(pes);\r\n                }\r\n            } else {\r\n                if (pid === 0) {\r\n                    this.pmtId = this.parsePAT(payload);\r\n                } else if (pid === this.pmtId) {\r\n                    this.parsePMT(payload);\r\n                    this.pmtParsed = true;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    parsePAT(data) {\r\n        let bits = new BitArray(data);\r\n        let ptr = bits.readBits(8);\r\n        bits.skipBits(8*ptr+83);\r\n        return bits.readBits(13);\r\n    }\r\n\r\n    parsePMT(data) {\r\n        let bits = new BitArray(data);\r\n        let ptr = bits.readBits(8);\r\n        bits.skipBits(8*ptr + 8);\r\n        bits.skipBits(6);\r\n        let secLen = bits.readBits(10);\r\n        bits.skipBits(62);\r\n        let pil = bits.readBits(10);\r\n        bits.skipBits(pil*8);\r\n\r\n        let tracks = new Set();\r\n        let readLen = secLen-13-pil;\r\n        while (readLen>0) {\r\n            let pesType = bits.readBits(8);\r\n            bits.skipBits(3);\r\n            let pid = bits.readBits(13);\r\n            bits.skipBits(6);\r\n            let il = bits.readBits(10);\r\n            bits.skipBits(il*8);\r\n            if ([PESType.AAC, PESType.H264].includes(pesType)) {\r\n                if (this.pesParserTypes.has(pesType) && !this.pesParsers.has(pid)) {\r\n                    this.pesParsers.set(pid, new (this.pesParserTypes.get(pesType)));\r\n                    this.pesAsms[pid] = new PESAsm();\r\n                    switch (pesType) {\r\n                        case PESType.H264: tracks.add({type: PayloadType.H264, offset: 0});break;\r\n                        case PESType.AAC: tracks.add({type: PayloadType.AAC, offset: 0});break;\r\n                    }\r\n                }\r\n            }\r\n            readLen -= 5+il;\r\n        }\r\n        // TODO: notify about tracks\r\n        if (this.ontracks) {\r\n            this.ontracks(tracks);\r\n        }\r\n    }\r\n}","import {NALUAsm} from \"../../core/elementary/NALUAsm.js\";\r\nimport {NALU} from \"../../core/elementary/NALU.js\";\r\nimport {appendByteArray} from \"../../core/util/binary.js\";\r\nimport {StreamType, PayloadType} from '../../core/defs.js';\r\n\r\nexport class AVCPES {\r\n    constructor() {\r\n        this.naluasm = new NALUAsm();\r\n        this.lastUnit = null;\r\n    }\r\n\r\n    parse(pes) {\r\n        let array = pes.data;\r\n        let i = 0, len = array.byteLength, value, overflow, state = 0;\r\n        let units = [], lastUnitStart;\r\n        while (i < len) {\r\n            value = array[i++];\r\n            // finding 3 or 4-byte start codes (00 00 01 OR 00 00 00 01)\r\n            switch (state) {\r\n                case 0:\r\n                    if (value === 0) {\r\n                        state = 1;\r\n                    }\r\n                    break;\r\n                case 1:\r\n                    if( value === 0) {\r\n                        state = 2;\r\n                    } else {\r\n                        state = 0;\r\n                    }\r\n                    break;\r\n                case 2:\r\n                case 3:\r\n                    if( value === 0) {\r\n                        state = 3;\r\n                    } else if (value === 1 && i < len) {\r\n                        if (lastUnitStart) {\r\n                            let nalu = this.naluasm.onNALUFragment(array.subarray(lastUnitStart, i - state - 1), pes.dts);\r\n                            if (nalu && (nalu.type() in NALU.TYPES)) {\r\n                                units.push(nalu);\r\n                            }\r\n                        } else {\r\n                            // If NAL units are not starting right at the beginning of the PES packet, push preceding data into previous NAL unit.\r\n                            overflow  = i - state - 1;\r\n                            if (overflow) {\r\n                                if (this.lastUnit) {\r\n                                    this.lastUnit.data = appendByteArray(this.lastUnit.data.byteLength, array.subarray(0, overflow));\r\n                                }\r\n                            }\r\n                        }\r\n                        lastUnitStart = i;\r\n                        state = 0;\r\n                    } else {\r\n                        state = 0;\r\n                    }\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        if (lastUnitStart) {\r\n            let nalu = this.naluasm.onNALUFragment(array.subarray(lastUnitStart, len), pes.dts, pes.pts);\r\n            if (nalu) {\r\n                units.push(nalu);\r\n            }\r\n        }\r\n        this.lastUnit = units[units.length-1];\r\n        return {units: units, type: StreamType.VIDEO, pay: PayloadType.H264};\r\n    }\r\n}","import {BitArray} from '../../core/util/binary.js';\r\nimport {AACParser} from '../../core/parsers/aac.js';\r\n\r\nexport class ADTS {\r\n\r\n    static parseHeader(data) {\r\n        let bits = new BitArray(data);\r\n        bits.skipBits(15);\r\n        let protectionAbs = bits.readBits(1);\r\n        bits.skipBits(14);\r\n        let len = bits.readBits(13);\r\n        bits.skipBits(11);\r\n        let cnt = bits.readBits(2);\r\n        if (!protectionAbs) {\r\n            bits.skipBits(16);\r\n        }\r\n        return {size: len-bits.bytepos, frameCount: cnt, offset: bits.bytepos}\r\n    }\r\n\r\n    static parseHeaderConfig(data) {\r\n        let bits = new BitArray(data);\r\n        bits.skipBits(15);\r\n        let protectionAbs = bits.readBits(1);\r\n        let profile = bits.readBits(2) + 1;\r\n        let freq = bits.readBits(4);\r\n        bits.skipBits(1);\r\n        let channels = bits.readBits(3);\r\n        bits.skipBits(4);\r\n        let len = bits.readBits(13);\r\n        bits.skipBits(11);\r\n        let cnt = bits.readBits(2);\r\n        if (!protectionAbs) {\r\n            bits.skipBits(16);\r\n        }\r\n\r\n        let userAgent = navigator.userAgent.toLowerCase();\r\n        let configLen = 4;\r\n        let extSamplingIdx;\r\n\r\n        // firefox: freq less than 24kHz = AAC SBR (HE-AAC)\r\n        if (userAgent.indexOf('firefox') !== -1) {\r\n            if (freq >= 6) {\r\n                profile = 5;\r\n                configLen = 4;\r\n                // HE-AAC uses SBR (Spectral Band Replication) , high frequencies are constructed from low frequencies\r\n                // there is a factor 2 between frame sample rate and output sample rate\r\n                // multiply frequency by 2 (see table below, equivalent to substract 3)\r\n                extSamplingIdx = freq - 3;\r\n            } else {\r\n                profile = 2;\r\n                configLen = 2;\r\n                extSamplingIdx = freq;\r\n            }\r\n            // Android : always use AAC\r\n        } else if (userAgent.indexOf('android') !== -1) {\r\n            profile = 2;\r\n            configLen = 2;\r\n            extSamplingIdx = freq;\r\n        } else {\r\n            /*  for other browsers (chrome ...)\r\n             always force audio type to be HE-AAC SBR, as some browsers do not support audio codec switch properly (like Chrome ...)\r\n             */\r\n            profile = 5;\r\n            configLen = 4;\r\n            // if (manifest codec is HE-AAC or HE-AACv2) OR (manifest codec not specified AND frequency less than 24kHz)\r\n            if (freq >= 6) {\r\n                // HE-AAC uses SBR (Spectral Band Replication) , high frequencies are constructed from low frequencies\r\n                // there is a factor 2 between frame sample rate and output sample rate\r\n                // multiply frequency by 2 (see table below, equivalent to substract 3)\r\n                extSamplingIdx = freq - 3;\r\n            } else {\r\n                // if (manifest codec is AAC) AND (frequency less than 24kHz OR nb channel is 1) OR (manifest codec not specified and mono audio)\r\n                // Chrome fails to play back with AAC LC mono when initialized with HE-AAC.  This is not a problem with stereo.\r\n                if (channels === 1) {\r\n                    profile = 2;\r\n                    configLen = 2;\r\n                }\r\n                extSamplingIdx = freq;\r\n            }\r\n        }\r\n\r\n\r\n        let config = new Uint8Array(configLen);\r\n\r\n        config[0] = profile << 3;\r\n        // samplingFrequencyIndex\r\n        config[0] |= (freq & 0x0E) >> 1;\r\n        config[1] |= (freq & 0x01) << 7;\r\n        // channelConfiguration\r\n        config[1] |= channels << 3;\r\n        if (profile === 5) {\r\n            // adtsExtensionSampleingIndex\r\n            config[1] |= (extSamplingIdx & 0x0E) >> 1;\r\n            config[2] = (extSamplingIdx & 0x01) << 7;\r\n            // adtsObjectType (force to 2, chrome is checking that object type is less than 5 ???\r\n            //    https://chromium.googlesource.com/chromium/src.git/+/master/media/formats/mp4/aac.cc\r\n            config[2] |= 2 << 2;\r\n            config[3] = 0;\r\n        }\r\n        return {\r\n            config: {\r\n                config: config,\r\n                codec: `mp4a.40.${profile}`,\r\n                samplerate: AACParser.SampleRates[freq],\r\n                channels: channels,\r\n            },\r\n            size: len-bits.bytepos,\r\n            frameCount: cnt,\r\n            offset: bits.bytepos\r\n        };\r\n    }\r\n}","import {Log} from '../../deps/bp_logger.js';\r\nimport {ADTS} from './adts.js';\r\nimport {StreamType, PayloadType} from '../../core/defs.js';\r\nimport {AACFrame} from '../../core/elementary/AACFrame.js';\r\n\r\nexport class AACPES {\r\n    constructor() {\r\n        this.aacOverFlow = null;\r\n        this.lastAacPTS = null;\r\n        this.track = {};\r\n        this.config = null;\r\n    }\r\n\r\n    parse(pes) {\r\n            let data = pes.data;\r\n            let pts = pes.pts;\r\n            let startOffset = 0;\r\n            let aacOverFlow = this.aacOverFlow;\r\n            let lastAacPTS = this.lastAacPTS;\r\n            var config, frameDuration, frameIndex, offset, stamp, len;\r\n\r\n        if (aacOverFlow) {\r\n            var tmp = new Uint8Array(aacOverFlow.byteLength + data.byteLength);\r\n            tmp.set(aacOverFlow, 0);\r\n            tmp.set(data, aacOverFlow.byteLength);\r\n            Log.debug(`AAC: append overflowing ${aacOverFlow.byteLength} bytes to beginning of new PES`);\r\n            data = tmp;\r\n        }\r\n\r\n        // look for ADTS header (0xFFFx)\r\n        for (offset = startOffset, len = data.length; offset < len - 1; offset++) {\r\n            if ((data[offset] === 0xff) && (data[offset+1] & 0xf0) === 0xf0) {\r\n                break;\r\n            }\r\n        }\r\n        // if ADTS header does not start straight from the beginning of the PES payload, raise an error\r\n        if (offset) {\r\n            var reason, fatal;\r\n            if (offset < len - 1) {\r\n                reason = `AAC PES did not start with ADTS header,offset:${offset}`;\r\n                fatal = false;\r\n            } else {\r\n                reason = 'no ADTS header found in AAC PES';\r\n                fatal = true;\r\n            }\r\n            Log.error(reason);\r\n            if (fatal) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        let hdr = null;\r\n        let res = {units:[], type: StreamType.AUDIO, pay: PayloadType.AAC};\r\n        if (!this.config) {\r\n            hdr = ADTS.parseHeaderConfig(data.subarray(offset));\r\n            this.config = hdr.config;\r\n            res.config = hdr.config;\r\n            hdr.config = null;\r\n            Log.debug(`parsed codec:${this.config.codec},rate:${this.config.samplerate},nb channel:${this.config.channels}`);\r\n        }\r\n        frameIndex = 0;\r\n        frameDuration = 1024 * 90000 / this.config.samplerate;\r\n\r\n        // if last AAC frame is overflowing, we should ensure timestamps are contiguous:\r\n        // first sample PTS should be equal to last sample PTS + frameDuration\r\n        if(aacOverFlow && lastAacPTS) {\r\n            var newPTS = lastAacPTS+frameDuration;\r\n            if(Math.abs(newPTS-pts) > 1) {\r\n                Log.debug(`AAC: align PTS for overlapping frames by ${Math.round((newPTS-pts)/90)}`);\r\n                pts=newPTS;\r\n            }\r\n        }\r\n\r\n        while ((offset + 5) < len) {\r\n            if (!hdr) {\r\n                hdr = ADTS.parseHeader(data.subarray(offset));\r\n            }\r\n            if ((hdr.size > 0) && ((offset + hdr.offset + hdr.size) <= len)) {\r\n                stamp = pts + frameIndex * frameDuration;\r\n                res.units.push(new AACFrame(data.subarray(offset + hdr.offset, offset + hdr.offset + hdr.size), stamp));\r\n                offset += hdr.offset + hdr.size;\r\n                frameIndex++;\r\n                // look for ADTS header (0xFFFx)\r\n                for ( ; offset < (len - 1); offset++) {\r\n                    if ((data[offset] === 0xff) && ((data[offset + 1] & 0xf0) === 0xf0)) {\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                break;\r\n            }\r\n            hdr = null;\r\n        }\r\n        if ((offset < len) && (data[offset]==0xff)) {   // TODO: check it\r\n            aacOverFlow = data.subarray(offset, len);\r\n            //logger.log(`AAC: overflow detected:${len-offset}`);\r\n        } else {\r\n            aacOverFlow = null;\r\n        }\r\n        this.aacOverFlow = aacOverFlow;\r\n        this.lastAacPTS = stamp;\r\n\r\n        return res;\r\n    }\r\n}","// adapted from https://github.com/kanongil/node-m3u8parse/blob/master/attrlist.js\r\nclass AttrList {\r\n\r\n    constructor(attrs) {\r\n        if (typeof attrs === 'string') {\r\n            attrs = AttrList.parseAttrList(attrs);\r\n        }\r\n        for(var attr in attrs){\r\n            if(attrs.hasOwnProperty(attr)) {\r\n                this[attr] = attrs[attr];\r\n            }\r\n        }\r\n        this.attrs = attrs;\r\n    }\r\n\r\n    decimalInteger(attrName) {\r\n        const intValue = parseInt(this[attrName], 10);\r\n        if (intValue > Number.MAX_SAFE_INTEGER) {\r\n            return Infinity;\r\n        }\r\n        return intValue;\r\n    }\r\n\r\n    hexadecimalInteger(attrName) {\r\n        if(this[attrName]) {\r\n            let stringValue = (this[attrName] || '0x').slice(2);\r\n            stringValue = ((stringValue.length & 1) ? '0' : '') + stringValue;\r\n\r\n            const value = new Uint8Array(stringValue.length / 2);\r\n            for (let i = 0; i < stringValue.length / 2; i++) {\r\n                value[i] = parseInt(stringValue.slice(i * 2, i * 2 + 2), 16);\r\n            }\r\n            return value;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    hexadecimalIntegerAsNumber(attrName) {\r\n        const intValue = parseInt(this[attrName], 16);\r\n        if (intValue > Number.MAX_SAFE_INTEGER) {\r\n            return Infinity;\r\n        }\r\n        return intValue;\r\n    }\r\n\r\n    decimalFloatingPoint(attrName) {\r\n        return parseFloat(this[attrName]);\r\n    }\r\n\r\n    enumeratedString(attrName) {\r\n        return this[attrName];\r\n    }\r\n\r\n    decimalResolution(attrName) {\r\n        const res = /^(\\d+)x(\\d+)$/.exec(this[attrName]);\r\n        if (res === null) {\r\n            return undefined;\r\n        }\r\n        return {\r\n            width: parseInt(res[1], 10),\r\n            height: parseInt(res[2], 10)\r\n        };\r\n    }\r\n\r\n    static parseAttrList(input) {\r\n        const re = /\\s*(.+?)\\s*=((?:\\\".*?\\\")|.*?)(?:,|$)/g;\r\n        var match, attrs = {};\r\n        while ((match = re.exec(input)) !== null) {\r\n            var value = match[2], quote = '\"';\r\n\r\n            if (value.indexOf(quote) === 0 &&\r\n                value.lastIndexOf(quote) === (value.length-1)) {\r\n                value = value.slice(1, -1);\r\n            }\r\n            attrs[match[1]] = value;\r\n        }\r\n        return attrs;\r\n    }\r\n\r\n}\r\n\r\nexport class M3U8Parser {\r\n    static get TYPE_CHUNK() {return  0;}\r\n    static get TYPE_PLAYLIST() {return  1;}\r\n    // TODO: parse master playlists\r\n    static parse(playlist, baseUrl='') {\r\n        playlist = playlist.replace(/\\r/, '').split('\\n');\r\n        if (playlist.shift().indexOf('#EXTM3U') < 0) {\r\n            throw new Error(\"Bad playlist\");\r\n        }\r\n        let chunkList = [];\r\n        let playlistList = [];\r\n        let expectedUrl = false;\r\n        let cont = {};\r\n        let urlType=null;\r\n        while (playlist.length) {\r\n            let entry = playlist.shift().replace(/\\r/, '');\r\n            if (expectedUrl) {\r\n                if (entry) {\r\n                    cont.url = entry.startsWith('http')?entry:`${baseUrl}/${entry}`;\r\n                    switch (urlType) {\r\n                        case M3U8Parser.TYPE_CHUNK:\r\n                            chunkList.push(cont);\r\n                            break;\r\n                        case M3U8Parser.TYPE_PLAYLIST:\r\n                            playlistList.push(cont);\r\n                            break;\r\n                    }\r\n                    cont={};\r\n                    expectedUrl = false;\r\n                }\r\n            } else {\r\n                if (entry.startsWith('#EXTINF')) {\r\n                    // TODO: it's unsafe\r\n                    cont.duration = Number(entry.split(':')[1].split(',')[0]);\r\n                    urlType = M3U8Parser.TYPE_CHUNK;\r\n                    expectedUrl = true;\r\n                } else if (entry.startsWith('#EXT-X-STREAM-INF')){\r\n                    let props = entry.split(':')[1];\r\n                    let al = new AttrList(props);\r\n                    for (let prop in al.attrs) {\r\n                        cont[prop.toLowerCase()]= al.attrs[prop];\r\n                    }\r\n                    urlType = M3U8Parser.TYPE_PLAYLIST;\r\n                    expectedUrl = true;\r\n                }\r\n            }\r\n        }\r\n        return {chunks: chunkList, playlists: playlistList}\r\n    }\r\n}","import {getTagged} from '../../deps/bp_logger.js';\r\nimport {BaseClient} from '../../core/base_client.js';\r\nimport {TSParser, PESType} from '../../core/parsers/ts.js';\r\nimport {AVCPES} from '../../client/hls/pes_avc.js';\r\nimport {AACPES} from '../../client/hls/pes_aac.js';\r\nimport {StreamType} from '../../core/defs.js';\r\nimport {M3U8Parser} from '../../core/parsers/m3u8.js';\r\nimport {CPU_CORES} from '../../core/util/browser.js';\r\n\r\nconst LOG_TAG = \"client:hls\";\r\nconst Log = getTagged(LOG_TAG);\r\n\r\n\r\nexport default class HLSClient extends BaseClient {\r\n    static get CHUNKS_TO_LOAD() {return  CPU_CORES;}\r\n\r\n    constructor(transport, options) {\r\n        super(transport, options);\r\n\r\n        this.parser = new TSParser();\r\n        this.parser.addPesParser(PESType.H264, AVCPES);\r\n        this.parser.addPesParser(PESType.AAC, AACPES);\r\n        this.parser.ontracks = (tracks)=>{\r\n            let duration = 0;\r\n            for (let chunk of this.chunks) {\r\n                duration+=chunk.duration;\r\n            }\r\n            for (let track of tracks) {\r\n                track.duration = duration;\r\n                this.sampleQueues[track.type]=[];\r\n            }\r\n\r\n            this.eventSource.dispatchEvent('tracks', tracks);\r\n            this.startStreamFlush();\r\n        };\r\n\r\n        this.playlists = [];\r\n        this.chunks = [];\r\n        this.loadedChunks = [];\r\n        this.pendingChunks = new Set();\r\n        this.chunkIdx = 0;\r\n        this.seqMap = new Map();\r\n        this.sampleQueues = {};\r\n        this.chunkSeq = new Map();\r\n\r\n        this.eventSource.addEventListener('needData', this.loadChunks.bind(this, HLSClient.CHUNKS_TO_LOAD));\r\n        this.resume = false;\r\n\r\n        this.parsing = false;\r\n    }\r\n\r\n    static streamType() {\r\n        return 'hls';\r\n    }\r\n\r\n    parse(data) {\r\n        let seq = new DataView(data.buffer, data.byteOffset, 4).getUint32(0);\r\n        // console.log(`data for ${seq}`);\r\n        // console.log('begin parse');\r\n        let offset = 4;\r\n        while (offset < data.byteLength) {\r\n            let parsed = this.parser.parse(data.subarray(offset, offset + TSParser.PACKET_LENGTH));\r\n            if (parsed) {\r\n                if (parsed.config) {\r\n                    this.eventSource.dispatchEvent(`${StreamType.map[parsed.type]}_config`, {\r\n                        config: parsed.config,\r\n                        pay: parsed.pay\r\n                    });\r\n                }\r\n                this.sampleQueues[parsed.type].push(parsed.units);\r\n                this.eventSource.dispatchEvent('samples', {pay: parsed.pay});\r\n            }\r\n            offset += TSParser.PACKET_LENGTH;\r\n        }\r\n        // this.eventSource.dispatchEvent('flush');\r\n        // console.log('end parse');\r\n        this.parsing = false;\r\n        if (this.loadedChunks.length) {\r\n            this.onData(this.loadedChunks.shift());\r\n        }\r\n    }\r\n\r\n    checkSeq(seq, data) {\r\n        seq = Number(seq);\r\n        if (this.seqMap.has(seq)) {\r\n            // parse data\r\n            let cs = this.chunkSeq.get(seq);\r\n            this.pendingChunks.delete(cs.idx);\r\n            this.chunkSeq.delete(seq);\r\n            this.parse(data?data:this.seqMap.get(seq));\r\n            this.seqMap.delete(seq);\r\n            cs.promise.resolve();\r\n        } else {\r\n            this.seqMap.set(seq, data);\r\n        }\r\n    }\r\n\r\n    onData(data) {\r\n        if (this.parsing) {\r\n            this.loadedChunks.push(data);\r\n        } else {\r\n            this.parsing = true;\r\n            let seq = new DataView(data.buffer, data.byteOffset, 4).getUint32(0);\r\n            // TODO: store seq & check if data ready\r\n            this.checkSeq(seq, data);\r\n        }\r\n    }\r\n\r\n    onConnected() {\r\n        super.onConnected();\r\n        Log.debug('HLS connected');\r\n        if (!this.paused) {\r\n            this.start();\r\n        }\r\n    }\r\n\r\n    onDisconnected() {\r\n        super.onDisconnected();\r\n        Log.debug('HLS disconnected');\r\n        this.parsing = false;\r\n        this.seqMap.clear();\r\n        this.chunkSeq.clear();\r\n        // this.stop();\r\n    }\r\n\r\n    start() {\r\n        super.start();\r\n        if (this.resume) {\r\n            this.eventSource.dispatchEvent('needData');\r\n        } else {\r\n            this.resume = true;\r\n            this.eventSource.dispatchEvent('clear');\r\n            Log.debug('waiting for transport ready');\r\n            this.transport.ready.then(()=> {\r\n                Log.debug('loading playlist');\r\n                this.loadPlaylist();\r\n            }).catch((e)=>{\r\n                Log.debug('reject transport', e);\r\n            });\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        super.stop();\r\n    }\r\n\r\n    setSource(source) {\r\n        this.resume = false;\r\n        super.setSource(source);\r\n    }\r\n\r\n    send(request, beforeSend) {\r\n        try {\r\n            return this.transport.send(request, beforeSend);\r\n        } catch (e) {\r\n            Log.error(e);\r\n            this.onDisconnected();\r\n            this.transport.connect();\r\n            return Promise.reject();\r\n        }\r\n    }\r\n\r\n    loadPlaylist(playlist=null) {\r\n        let url = playlist?playlist.url:this.sourceUrl;\r\n        this.send(`GET ${url} HTTP/1.1\\r\\nHost: ${this.transport.endpoint.host}\\r\\n\\r\\n`).then((data)=>{\r\n            let entries = data.payload.split('\\r\\n\\r\\n');\r\n            let http = entries[0].split('\\r\\n');\r\n            let status = http[0].match(new RegExp(`HTTP/\\\\d\\\\.\\\\d\\\\s+(\\\\d+)\\\\s+(\\\\w+)`));\r\n            if (!status || status[1]>=400) {\r\n                Log.error('bad playlist response');\r\n                return;\r\n            }\r\n            Log.debug(status);\r\n            let baseUrl = url.substr(0, url.lastIndexOf('/'));\r\n            let playlist = M3U8Parser.parse(entries[1], baseUrl);\r\n            if (playlist.chunks.length) {\r\n                this.chunks = playlist.chunks;\r\n                this.resume = true;\r\n                // Load first chunk to detect initial timestamps\r\n                this.loadChunks(1);\r\n            } else if (playlist.playlists) {\r\n                this.playlists = playlist.playlists;\r\n                // TODO: check playlist support\r\n                this.loadPlaylist(this.playlists[0])\r\n            }\r\n            // this.chunks = entries[1].split('\\n').map((e)=>{e.replace(/\\r/, ''); return e;});\r\n            // this.loadChunk();\r\n        }).catch((e)=>{\r\n            this.resume = false;\r\n        });\r\n    }\r\n\r\n    loadChunk(chunk, idx) {\r\n        return new Promise((resolve, reject)=>{\r\n            this.send(`GET ${chunk.url}?${Math.random()} HTTP/1.1\\r\\nHost: ${this.transport.endpoint.host}\\r\\n\\r\\n`, (seq)=>{\r\n                this.chunkSeq.set(seq, {\r\n                    idx: idx,\r\n                    promise: {resolve, reject}\r\n                });\r\n            }).then((res)=>{\r\n                let lines = res.payload.split('\\r\\n');\r\n                let [version, code, msg] = lines[0].split(' ');\r\n                if (Number(code) >= 300) {\r\n                    throw new Error(`Load error: ${code} ${msg}`);\r\n                }\r\n\r\n                // TODO: store seq & check if data ready\r\n                this.checkSeq(res.data.seq, null);\r\n            });\r\n        });\r\n    }\r\n\r\n    loadChunks(count) {\r\n        if (this.chunkIdx>= this.chunks.length) return;\r\n        let promises = [];\r\n        if (this.pendingChunks.size) {\r\n            Log.debug(`Reload chunks: ${Array.from(this.pendingChunks)}`);\r\n            for (let i of this.pendingChunks) {\r\n                let chunk = this.chunks[i];\r\n                Log.log(`Loading ${chunk.url} (${i+1} of ${this.chunks.length})`);\r\n                promises.push(this.loadChunk(chunk, i));\r\n            }\r\n        } else {\r\n            for (let i = this.chunkIdx; i < this.chunkIdx+count; ++i) {\r\n                let chunk = this.chunks[i];//.shift();\r\n                Log.log(`Loading ${chunk.url} (${i+1} of ${this.chunks.length})`);\r\n                this.pendingChunks.add(i);\r\n\r\n                promises.push(this.loadChunk(chunk, i));\r\n                if (i+1 >= this.chunks.length) return;\r\n            }\r\n        }\r\n        return Promise.all(promises).then(()=>{\r\n            Log.log('chunk loaded');\r\n            // TODO: check queue overflow\r\n            this.chunkIdx+=HLSClient.CHUNKS_TO_LOAD;\r\n            if (!this.paused) {\r\n                this.eventSource.dispatchEvent('needData');\r\n            }\r\n        }).catch((e)=>{\r\n            Log.error(e);\r\n            // this.stop();\r\n        });\r\n    }\r\n}","import videojs from 'video.js';\r\nimport * as streamedian from '../../../src/player';\r\nimport WebsocketTransport from '../../../src//transport/websocket';\r\nimport RTSPClient from '../../../src//client/rtsp/client';\r\nimport HLSClient from '../../../src//client/hls/client';\r\n\r\nclass StreamedianVideojs{\r\n\r\n    constructor(source, tech, techOptions){\r\n\r\n        var player = videojs.getPlayer(techOptions.playerId);\r\n        this.playerOptions = player.options_;\r\n        this.tech    = tech;\r\n\r\n        this.transport = {\r\n            constructor: WebsocketTransport,\r\n            options: {\r\n                socket: this.playerOptions.rtsp_config.websocket_url\r\n            }\r\n        };\r\n        this.player = new streamedian.WSPlayer(tech.el(), {\r\n            modules: [\r\n                {\r\n                    client: RTSPClient,\r\n                    transport: this.transport\r\n                },\r\n                {\r\n                    client: HLSClient,\r\n                    transport: this.transport\r\n                }\r\n            ]\r\n        });\r\n    }\r\n}\r\n\r\nvar StreamedianSourceHandler = {\r\n    canHandleSource: function (source) {\r\n        return this.canPlayType(source.type);\r\n    },\r\n    handleSource: function (source, tech, options) {\r\n        return new StreamedianVideojs(source, tech, options);\r\n    },\r\n    canPlayType: function (type) {\r\n        var canPlayType = '';\r\n        if (streamedian.WSPlayer.canPlayWithModules(type,[\r\n                {\r\n                    client: RTSPClient,\r\n                    transport: WebsocketTransport\r\n                },\r\n                {\r\n                    client: HLSClient,\r\n                    transport: WebsocketTransport\r\n                }\r\n            ])) {\r\n            canPlayType = 'probably';\r\n        }\r\n        return canPlayType;\r\n    }\r\n};\r\n\r\nvideojs.getTech('Html5').registerSourceHandler(StreamedianSourceHandler, 0);"],"names":["LogLevel","DEFAULT_LOG_LEVEL","Logger","level","tag","lvl","args","taggedLoggers","getTagged","Log","Url","url","ret","regex","result","parts","loginSplit","hostport","userpass","parsed","protocol","listener","listeners","DestructibleEventListener","eventListener","entry","fn","event","selector","e","ev","EventEmitter","element","data","EventSourceWrapper","eventSource","MP4","i","videoHdlr","audioHdlr","dref","stco","majorBrand","avc1Brand","minorVersion","type","payload","size","len","timescale","duration","track","sequenceNumber","sn","baseMediaDecodeTime","tracks","boxes","bytes","samples","flags","sps","pps","avcc","width","height","configlen","audiosamplerate","id","volume","sampleDependencyTable","offset","arraylen","array","sample","cts","movie","LOG_TAG","MSEBuffer","parent","codec","resolver","promises","resolve","reject","is_live","range","removeBound","removeStart","removeEnd","err","MSE","video","codecs","players","playing","idx","buffer","mimeCodec","track_id","BaseRemuxer","scaleFactor","params","timestamp","unit","config","initPTS","initDTS","shouldInitialize","a","b","gop","groupBy","xs","key","rv","x","sampleFunction","setupSample","AACRemuxer","aac","mp4Sample","lastDTS","pts","dts","delta","ExpGolomb","position","workingBytes","availableBytes","count","skipBytes","bits","valu","logger","leadingZeroCount","clz","appendByteArray","buffer1","buffer2","tmp","base64ToArrayBuffer","base64","binary_string","hexToByteArray","hex","bufView","bitSlice","bytearray","start","end","byteLen","res","startByte","endByte","bitOffset","nBitOffset","endOffset","tail","BitArray","src","length","NALU","nalu","ntype","nri","idata","header","view","H264Parser","remuxer","codecarray","h","push","byte_idx","pay_type","pay_size","sz","uuid","decoder","slice_type","lastScale","nextScale","deltaScale","j","frameCropLeftOffset","frameCropRightOffset","frameCropTopOffset","frameCropBottomOffset","sarScale","profileIdc","profileCompat","levelIdc","numRefFramesInPicOrderCntCycle","picWidthInMbsMinus1","picHeightInMapUnitsMinus1","frameMbsOnlyFlag","scalingListCount","chromaFormatIdc","picOrderCntType","sarRatio","aspectRatioIdc","unitsInTick","timeScale","fixedFrameRate","frameDuration","H264Remuxer","arr","groupedGop","group","preUnit","curUnit","naluData","sampleDuration","avgDuration","StreamType","PayloadType","Remuxer","mediaElement","timeOffset","initmse","initPts","initDts","track_type","pay","qidx","queue","units","chunk","client","State","name","stateMachine","StateMachine","activate","finishTransition","deactivate","state","fromName","toName","promise","stateName","SDPParser","content","dataString","success","currentMediaBlock","line","matches","media","fmt","index","separator","attribute","attrs","param","mediaType","pt","m","RTSPStream","lastSetupPromise","obj","sessionBlock","ctrl","RTSPError","_cmd","_params","session","RTSPClient","interleavedChannels","_data","transport","interleaved","sessionParamsChunks","sessionParams","kv","safeAdd","y","lsw","msw","bitRotateLeft","num","cnt","md5cmn","q","s","t","md5ff","c","d","md5gg","md5hh","md5ii","binlMD5","olda","oldb","oldc","oldd","binl2rstr","input","output","length32","rstr2binl","length8","rstrMD5","rstrHMACMD5","bkey","ipad","opad","hash","rstr2hex","hexTab","str2rstrUTF8","rawMD5","hexMD5","rawHMACMD5","k","hexHMACMD5","md5","string","raw","RTP","pkt","sdp","pktIndex","padLength","RTPFactory","rtp","tsOffset","RTSPMessage","_rtsp_version","_host","_payload","requestString","lines","match","lineIdx","v","MessageBuilder","NALUAsm","hdr","rawData","nal_start_idx","don","fu_header","is_start","is_end","payload_type","AACFrame","AACAsm","sizeLength","indexLength","indexDeltaLength","CTSDeltaLength","DTSDeltaLength","RandomAccessIndication","StreamStateIndication","AuxiliaryDataSizeLength","configHeaderLength","auHeadersLengthPadded","ts","auHeadersLengthInBits","frames","frameOffset","aacData","RTPPayloadParser","RTPH264Parser","RTPAACParser","conf","BaseClient","options","source","user","password","AACParser","bytesOrBits","bitpos","prof","sfi","channels","RTSPSession","sessionId","pos","RTSPClientSM","AuthError","msg","channel","stream","method","_method","response","auth","chunks","ep","parsedChunks","ha1","ha2","streams","lastPromise","setupPromise","rtp_info","val","sps_pps","generic","sessionPromises","hardLimit","ellipsis","DOM","tagName","className","str","Stream","enc","high_byte","low_byte","n","unusedBit","lenBit","skip","ASN1","sub","tagClass","tagNumber","indent","max","node","head","preview","value","oid","current","re","root","first","last","buf","p","subTag","subLength","exception","streamStart","test","Arcfour","ARC4init","ARC4next","prng_newstate","rng_psize","rng_state","rng_pool","rng_pptr","z","onMouseMoveListener","mouseCoordinates","rng_get_byte","random","rng_get_bytes","ba","SecureRandom","dbits","BigInteger","nbi","am1","w","am2","xl","xh","l","am3","BI_FP","BI_RM","BI_RC","rr","vv","int2char","intAt","bnpCopyTo","r","bnpFromInt","nbv","bnpFromString","mi","sh","bnpClamp","bnToString","km","bnNegate","bnAbs","bnCompareTo","nbits","bnBitLength","bnpDLShiftTo","bnpDRShiftTo","bnpLShiftTo","bs","cbs","bm","ds","bnpRShiftTo","bnpSubTo","bnpMultiplyTo","bnpSquareTo","bnpDivRemTo","pm","ms","nsh","ys","y0","yt","d1","d2","qd","bnMod","Classic","cConvert","cRevert","cReduce","cMulTo","cSqrTo","bnpInvDigit","Montgomery","montConvert","montRevert","montReduce","u0","montSqrTo","montMulTo","bnpIsEven","bnpExp","r2","g","bnModPowInt","bnClone","bnIntValue","bnByteValue","bnShortValue","bnpChunkSize","bnSigNum","bnpToRadix","cs","bnpFromRadix","bnpFromNumber","op_or","bnToByteArray","bnEquals","bnMin","bnMax","bnpBitwiseTo","op","f","op_and","bnAnd","bnOr","op_xor","bnXor","op_andnot","bnAndNot","bnNot","bnShiftLeft","bnShiftRight","lbit","bnGetLowestSetBit","cbit","bnBitCount","bnTestBit","bnpChangeBit","bnSetBit","bnClearBit","bnFlipBit","bnpAddTo","bnAdd","bnSubtract","bnMultiply","bnSquare","bnDivide","bnRemainder","bnDivideAndRemainder","bnpDMultiply","bnpDAddOffset","NullExp","nNop","nMulTo","nSqrTo","bnPow","bnpMultiplyLowerTo","bnpMultiplyUpperTo","Barrett","barrettConvert","barrettRevert","barrettReduce","barrettSqrTo","barrettMulTo","bnModPow","k1","g2","is1","bnGCD","bnpModInt","bnModInverse","ac","u","lowprimes","lplim","bnIsProbablePrime","bnpMillerRabin","n1","parseBigInt","pkcs1pad2","rng","RSAKey","RSASetPublic","N","E","RSADoPublic","RSAEncrypt","text","pkcs1unpad2","RSASetPrivate","D","RSASetPrivateEx","P","Q","DP","DQ","C","RSAGenerate","B","qs","ee","p1","q1","phi","RSADoPrivate","xp","xq","RSADecrypt","ctext","Base64","b64","ignore","out","char_count","Hex","JSX","L","OP","FUNCTION_TOSTRING","ADD","agent","numberify","nav","o","ua","loc","href","fname","subc","superc","overrides","F","KJUR","bigIntegerValue","hPos","xorLen","hMask","biMask","biNeg","dataHex","pemHeader","dataWA","dataB64","pemBody","hV","hN","hNlen","newS","newHexString","utcDate","dateObject","pad","year","month","day","hour","min","sec","asn1ObjectArray","asn1Object","intValue","bi","newHexStringIncludingUnusedBits","unusedBits","hValue","hUnusedBits","binaryString","booleanArray","nLength","itox","roidtox","roid","padLen","bPad","b8","oidString","i0","oidName","asn1Obj","isExplicitFlag","tagNoHex","b64map","b64pad","hex2b64","b64tohex","slop","hexString","pem","modulus","public_exponent","reHex","der","asn1","private_exponent","prime1","prime2","exponent1","exponent2","coefficient","bit_string","sequence","ex","seq","first_sequence","second_sequence","JSEncryptRSAKey","JSEncrypt","privkey","pubkey","cb","BaseTransport","endpoint","stream_type","CPU_CORES","WebsocketTransport","proxy","WebSocketProxy","WSPProtocol","ver","cmd","data_str","payIdx","wsurl","handler","channel_id","headers","crypted","mime","WSPlayer","opts","modules","DEFAULT_CLIENT","DEFAULT_TRANSPORT","module","mimeType","filteredModules","resource","lastType","PESAsm","frag","ext","pesPrefix","pesLength","reference","pesFlags","pesHdrLen","pesPts","pesDts","payloadStartOffset","shouldParse","poffset","PESType","TSParser","pesType","constructor","packet","payStart","pid","adaptFlag","payFlag","adaptSize","pes","ptr","secLen","pil","readLen","il","AVCPES","overflow","lastUnitStart","ADTS","protectionAbs","profile","freq","userAgent","configLen","extSamplingIdx","AACPES","startOffset","aacOverFlow","lastAacPTS","frameIndex","stamp","reason","fatal","newPTS","AttrList","attr","attrName","stringValue","quote","M3U8Parser","playlist","baseUrl","chunkList","playlistList","expectedUrl","cont","urlType","props","al","prop","HLSClient","request","beforeSend","entries","http","status","version","code","StreamedianVideojs","tech","techOptions","player","videojs","streamedian.WSPlayer","StreamedianSourceHandler","canPlayType"],"mappings":"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AC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CA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"}